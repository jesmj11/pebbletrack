{"file_contents":{"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# Task Management & E-Learning Platform\n\n## Overview\nA comprehensive task management and e-learning platform optimized for homeschool environments, featuring:\n- Advanced teacher planner with dynamic student tracking\n- PostgreSQL database for persistent data storage\n- TypeScript with Drizzle ORM for robust type-checking\n- React frontend with Tailwind CSS\n- Express.js backend with modular architecture\n- Replit authentication integration\n- Responsive design with customizable weekly planner\n- Printable planner functionality\n\n## Project Architecture\n\n### Backend\n- **Express.js** server with Replit authentication\n- **PostgreSQL** database via Neon with Drizzle ORM\n- **Storage Layer**: `server/storage-replit.ts` - PostgreSQL implementation\n- **Authentication**: Replit OAuth with session management\n- **API Routes**: RESTful endpoints for all CRUD operations\n\n### Frontend\n- **React** with TypeScript\n- **TanStack Query** for data fetching and caching\n- **Wouter** for client-side routing\n- **Tailwind CSS** with shadcn/ui components\n- **PWA** capabilities with service worker\n\n### Database Schema\n- Users (Replit auth integration)\n- Students (with gamification features)\n- Classes and Assignments\n- Tasks with completion tracking\n- Curriculum management system\n- Lesson progress tracking\n\n## Recent Changes\n\n### January 20, 2025\n- **Completed Multi-Page Authentication System**: Implemented role-based login with proper access control\n- **Database Integration**: Full PostgreSQL integration with localStorage fallback for offline use\n- **Security Enhancement**: All pages now require authentication before access\n- **UI Refinement**: Removed standalone parent reports button, integrated functionality into parent dashboard\n- **Professional Design**: Consistent Pebble Track color palette across all interfaces\n- **Static HTML Solution**: Successfully bypassed React/Vite runtime errors with pure HTML/CSS/JavaScript implementation\n- **AI Curriculum Import**: Added Claude-powered image analysis to automatically extract lessons from curriculum photos\n  - Teachers can upload images of curriculum indexes/table of contents\n  - AI automatically extracts lesson titles, subjects, and grade levels\n  - Lessons are added directly to the planner with appropriate scheduling\n  - Uses Anthropic's latest Claude model for accurate text recognition and educational content analysis\n\n### Authentication System\n- Teachers access dashboard and planner functionality\n- Students access dedicated portal for task completion  \n- Parents access comprehensive reporting dashboard (removed from login screen, accessible via teacher dashboard)\n- All pages protected with localStorage-based session management\n- Proper logout functionality across all interfaces\n\n## User Preferences\n- Project uses PostgreSQL for production data persistence\n- Prefers TypeScript for type safety\n- Uses Drizzle ORM for database operations\n- Follows fullstack JavaScript development guidelines\n\n## Development Guidelines\n- Always use `npm run db:push` for schema changes (never manual SQL migrations)\n- Import storage from `./storage-replit` for database operations\n- Follow existing TypeScript patterns and schemas\n- Maintain consistency with Replit authentication flow\n- Use shadcn/ui components for UI consistency\n\n## Current Status\n✅ **Complete Multi-Page Homeschool Management System with AI Integration**\n- Server running on port 5000 with PostgreSQL database\n- **Login Page** (`/login`): Professional role-based entry point\n- **Dashboard** (`/static-dashboard`): Overview with statistics, quick actions, and AI curriculum import\n- **Student View** (`/student-view`): Dedicated student portal with task completion\n- **Parent View** (`/parent-view`): Comprehensive reporting and progress tracking\n- **Planner** (`/static-planner`): Full-featured task and student management\n- **AI Curriculum Import**: Upload curriculum images to auto-generate lesson plans\n- All pages use Pebble Track color palette for cohesive professional design\n- Complete offline/online synchronization with localStorage fallback\n- Database persistence for both tasks and students across all interfaces\n- Anthropic API integration for intelligent curriculum analysis","size_bytes":4208},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"hsl(var(--background))\",\n        foreground: \"hsl(var(--foreground))\",\n        card: {\n          DEFAULT: \"hsl(var(--card))\",\n          foreground: \"hsl(var(--card-foreground))\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover))\",\n          foreground: \"hsl(var(--popover-foreground))\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary))\",\n          foreground: \"hsl(var(--primary-foreground))\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary))\",\n          foreground: \"hsl(var(--secondary-foreground))\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted))\",\n          foreground: \"hsl(var(--muted-foreground))\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent))\",\n          foreground: \"hsl(var(--accent-foreground))\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive))\",\n          foreground: \"hsl(var(--destructive-foreground))\",\n        },\n        border: \"hsl(var(--border))\",\n        input: \"hsl(var(--input))\",\n        ring: \"hsl(var(--ring))\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1))\",\n          \"2\": \"hsl(var(--chart-2))\",\n          \"3\": \"hsl(var(--chart-3))\",\n          \"4\": \"hsl(var(--chart-4))\",\n          \"5\": \"hsl(var(--chart-5))\",\n        },\n        sidebar: {\n          DEFAULT: \"hsl(var(--sidebar-background))\",\n          foreground: \"hsl(var(--sidebar-foreground))\",\n          primary: \"hsl(var(--sidebar-primary))\",\n          \"primary-foreground\": \"hsl(var(--sidebar-primary-foreground))\",\n          accent: \"hsl(var(--sidebar-accent))\",\n          \"accent-foreground\": \"hsl(var(--sidebar-accent-foreground))\",\n          border: \"hsl(var(--sidebar-border))\",\n          ring: \"hsl(var(--sidebar-ring))\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2787},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n});\n","size_bytes":894},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });","size_bytes":482},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on port 5000\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = 5000;\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":1921},"server/openai.ts":{"content":"import OpenAI from \"openai\";\n\n// the newest OpenAI model is \"gpt-4o\" which was released May 13, 2024. do not change this unless explicitly requested by the user\nconst openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });\n\nexport async function extractLessonsFromImage(base64Image: string, curriculumName: string): Promise<any[]> {\n  try {\n    const response = await openai.chat.completions.create({\n      model: \"gpt-4o\",\n      messages: [\n        {\n          role: \"system\",\n          content: `You are an expert at analyzing curriculum lesson indexes. Extract lesson information from the provided image and return a JSON array of lessons. Each lesson should have:\n          - lessonNumber: integer\n          - title: string (lesson title)\n          - type: \"lesson\" | \"quiz\" | \"test\" | \"review\" | \"exam\"\n          - description: string (brief description if available)\n          - estimatedMinutes: integer (default 30 for lessons, 25 for quizzes, 45 for tests)\n          \n          Look for patterns like:\n          - Lesson numbers (1, 2, 3, etc.)\n          - Chapter titles or lesson names\n          - Quiz/Test indicators\n          - Any section breaks or groupings\n          \n          Return only valid JSON array format. Be thorough and capture all visible lessons.`\n        },\n        {\n          role: \"user\",\n          content: [\n            {\n              type: \"text\",\n              text: `Extract all lessons from this ${curriculumName} lesson index. Return as JSON array with the structure specified.`\n            },\n            {\n              type: \"image_url\",\n              image_url: {\n                url: `data:image/jpeg;base64,${base64Image}`\n              }\n            }\n          ],\n        },\n      ],\n      response_format: { type: \"json_object\" },\n      max_tokens: 2000,\n    });\n\n    const result = JSON.parse(response.choices[0].message.content || \"{}\");\n    return result.lessons || [];\n  } catch (error) {\n    console.error(\"Error extracting lessons from image:\", error);\n    throw new Error(\"Failed to extract lessons from image\");\n  }\n}\n\nexport async function extractLessonsFromText(textContent: string, curriculumName: string): Promise<any[]> {\n  try {\n    const response = await openai.chat.completions.create({\n      model: \"gpt-4o\",\n      messages: [\n        {\n          role: \"system\",\n          content: `You are an expert at analyzing curriculum lesson indexes. Extract lesson information from the provided text and return a JSON object with a \"lessons\" array. Each lesson should have:\n          - lessonNumber: integer\n          - title: string (lesson title)\n          - type: \"lesson\" | \"quiz\" | \"test\" | \"review\" | \"exam\"\n          - description: string (brief description if available)\n          - estimatedMinutes: integer (default 30 for lessons, 25 for quizzes, 45 for tests)\n          \n          Look for patterns like:\n          - Lesson numbers (1, 2, 3, etc.)\n          - Chapter titles or lesson names\n          - Quiz/Test indicators\n          - Any section breaks or groupings\n          \n          Return only valid JSON with a \"lessons\" array. Be thorough and capture all lessons mentioned.`\n        },\n        {\n          role: \"user\",\n          content: `Extract all lessons from this ${curriculumName} lesson index text:\n\n${textContent}\n\nReturn as JSON object with \"lessons\" array containing the lesson structure specified.`\n        },\n      ],\n      response_format: { type: \"json_object\" },\n      max_tokens: 2000,\n    });\n\n    const result = JSON.parse(response.choices[0].message.content || \"{}\");\n    return result.lessons || [];\n  } catch (error) {\n    console.error(\"Error extracting lessons from text:\", error);\n    throw new Error(\"Failed to extract lessons from text\");\n  }\n}\n\nexport async function enhanceCurriculumDescription(curriculumName: string, publisher: string, gradeLevel: string): Promise<string> {\n  try {\n    const response = await openai.chat.completions.create({\n      model: \"gpt-4o\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are an educational curriculum expert. Provide a brief, informative description of the given curriculum.\"\n        },\n        {\n          role: \"user\",\n          content: `Write a brief description (2-3 sentences) for the curriculum \"${curriculumName}\" by ${publisher} for ${gradeLevel}. Focus on key learning objectives and teaching approach.`\n        },\n      ],\n      max_tokens: 150,\n    });\n\n    return response.choices[0].message.content || \"\";\n  } catch (error) {\n    console.error(\"Error enhancing curriculum description:\", error);\n    return \"\";\n  }\n}","size_bytes":4618},"server/replitAuth.ts":{"content":"import * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage-replit\";\n\nif (!process.env.REPLIT_DOMAINS) {\n  throw new Error(\"Environment variable REPLIT_DOMAINS not provided\");\n}\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === \"production\",\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(\n  claims: any,\n) {\n  await storage.upsertUser({\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  for (const domain of process.env\n    .REPLIT_DOMAINS!.split(\",\")) {\n    const strategy = new Strategy(\n      {\n        name: `replitauth:${domain}`,\n        config,\n        scope: \"openid email profile offline_access\",\n        callbackURL: `https://${domain}/api/callback`,\n      },\n      verify,\n    );\n    passport.use(strategy);\n  }\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    // Use the first domain from REPLIT_DOMAINS if hostname doesn't match any configured domains\n    const domains = process.env.REPLIT_DOMAINS!.split(\",\");\n    let targetDomain = domains.find(domain => domain.includes(req.hostname));\n    \n    // Fallback to first domain if no match found (for localhost/development)\n    if (!targetDomain) {\n      targetDomain = domains[0];\n    }\n    \n    const strategyName = `replitauth:${targetDomain}`;\n    \n    console.log(`Attempting login with strategy: ${strategyName} for hostname: ${req.hostname}`);\n    \n    passport.authenticate(strategyName, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    // Use the first domain from REPLIT_DOMAINS if hostname doesn't match any configured domains\n    const domains = process.env.REPLIT_DOMAINS!.split(\",\");\n    let targetDomain = domains.find(domain => domain.includes(req.hostname));\n    \n    // Fallback to first domain if no match found (for localhost/development)\n    if (!targetDomain) {\n      targetDomain = domains[0];\n    }\n    \n    const strategyName = `replitauth:${targetDomain}`;\n    \n    console.log(`Attempting callback with strategy: ${strategyName} for hostname: ${req.hostname}`);\n    \n    passport.authenticate(strategyName, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n        }).href\n      );\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};","size_bytes":5331},"server/routes-old.ts":{"content":"import type { Express, Request, Response } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage-replit\";\nimport { setupAuth, isAuthenticated } from \"./replitAuth\";\nimport { z } from \"zod\";\nimport { \n  insertClassSchema, \n  insertStudentSchema,\n  insertAssignmentSchema,\n  insertTaskSchema,\n  insertCurriculumSchema,\n  insertCurriculumLessonSchema,\n  insertStudentCurriculumSchema,\n  insertLessonProgressSchema\n} from \"@shared/schema\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Auth middleware\n  await setupAuth(app);\n\n  // Development setup route to create test accounts\n  app.post(\"/api/setup\", async (req, res) => {\n    try {\n      // Check if setup already done\n      const existingUser = await authStorage.getUserByEmail(\"parent@test.com\");\n      if (existingUser) {\n        return res.json({ message: \"Setup already completed\", user: existingUser });\n      }\n\n      // Create test parent account\n      const parentUser = await authStorage.createUser({\n        email: \"parent@test.com\",\n        password: \"password123\",\n        fullName: \"Test Parent\",\n        role: \"parent\",\n        familyName: \"Test Family\"\n      });\n\n      res.json({ \n        message: \"Test account created\", \n        user: parentUser,\n        credentials: { email: \"parent@test.com\", password: \"password123\" }\n      });\n    } catch (error: any) {\n      console.error(\"Setup error:\", error);\n      res.status(500).json({ message: error.message || \"Setup failed\" });\n    }\n  });\n\n  // Auth routes\n  app.post(\"/api/auth/register\", async (req, res) => {\n    try {\n      const userData = insertUserSchema.parse(req.body);\n      \n      // Check if user already exists\n      const existingUser = await authStorage.getUserByEmail(userData.email);\n      if (existingUser) {\n        return res.status(400).json({ message: \"An account with this email already exists\" });\n      }\n\n      const user = await authStorage.createUser(userData);\n      res.status(201).json({ message: \"Account created successfully\", userId: user.id });\n    } catch (error: any) {\n      console.error(\"Registration error:\", error);\n      res.status(400).json({ message: error.message || \"Registration failed\" });\n    }\n  });\n\n  app.post(\"/api/auth/login\", passport.authenticate(\"local\"), (req, res) => {\n    res.json(req.user);\n  });\n\n  // Student PIN-based login\n  app.post(\"/api/auth/student-login\", async (req, res) => {\n    try {\n      const { studentId, pin } = req.body;\n      \n      if (!studentId || !pin) {\n        return res.status(400).json({ message: \"Student ID and PIN are required\" });\n      }\n\n      const student = await authStorage.getStudent(studentId);\n      if (!student || student.pin !== pin) {\n        return res.status(401).json({ message: \"Invalid PIN\" });\n      }\n\n      // Create a student session\n      const studentUser = {\n        id: student.id,\n        email: `student_${student.id}@pebbletrack.local`,\n        role: \"student\",\n        fullName: student.fullName,\n        studentId: student.id\n      };\n\n      req.login(studentUser, (err) => {\n        if (err) {\n          return res.status(500).json({ message: \"Login failed\" });\n        }\n        res.json(studentUser);\n      });\n    } catch (error: any) {\n      console.error(\"Student login error:\", error);\n      res.status(500).json({ message: \"Login failed\" });\n    }\n  });\n\n  app.post(\"/api/auth/logout\", (req, res) => {\n    req.logout(() => {\n      res.json({ message: \"Logged out\" });\n    });\n  });\n\n  app.get(\"/api/auth/user\", (req, res) => {\n    if (req.isAuthenticated()) {\n      res.json(req.user);\n    } else {\n      res.status(401).json({ message: \"Not authenticated\" });\n    }\n  });\n\n  // Public route to get students for PIN login\n  app.get(\"/api/students\", async (req, res) => {\n    try {\n      const students = await authStorage.getStudents();\n      // Only return essential info for login, not sensitive data\n      const publicStudentData = students.map(student => ({\n        id: student.id,\n        fullName: student.fullName,\n        gradeLevel: student.gradeLevel,\n        avatar: student.avatar\n      }));\n      res.json(publicStudentData);\n    } catch (error: any) {\n      console.error(\"Error fetching students:\", error);\n      res.status(500).json({ message: \"Failed to fetch students\" });\n    }\n  });\n\n  // Family Student Management Routes\n  app.get(\"/api/auth/students\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      if (user.role !== \"parent\") {\n        return res.status(403).json({ message: \"Only parents can access student data\" });\n      }\n      \n      const students = await authStorage.getStudentsByParent(user.id);\n      res.json(students);\n    } catch (error) {\n      console.error(\"Error fetching students:\", error);\n      res.status(500).json({ message: \"Failed to fetch students\" });\n    }\n  });\n\n  app.post(\"/api/auth/students\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      if (user.role !== \"parent\") {\n        return res.status(403).json({ message: \"Only parents can manage students\" });\n      }\n\n      const studentData = {\n        ...req.body,\n        parentId: user.id,\n        level: 1,\n        xp: 0,\n        totalXp: 0,\n      };\n\n      const student = await authStorage.createStudent(studentData);\n      res.status(201).json(student);\n    } catch (error: any) {\n      console.error(\"Error creating student:\", error);\n      res.status(400).json({ message: error.message || \"Failed to create student\" });\n    }\n  });\n\n  app.put(\"/api/auth/students/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      if (user.role !== \"parent\") {\n        return res.status(403).json({ message: \"Only parents can manage students\" });\n      }\n\n      const studentId = parseInt(req.params.id);\n      const student = await authStorage.updateStudent(studentId, req.body);\n      \n      if (!student) {\n        return res.status(404).json({ message: \"Student not found\" });\n      }\n\n      res.json(student);\n    } catch (error: any) {\n      console.error(\"Error updating student:\", error);\n      res.status(400).json({ message: error.message || \"Failed to update student\" });\n    }\n  });\n\n  app.delete(\"/api/auth/students/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      if (user.role !== \"parent\") {\n        return res.status(403).json({ message: \"Only parents can manage students\" });\n      }\n\n      const studentId = parseInt(req.params.id);\n      const success = await authStorage.deleteStudent(studentId);\n      \n      if (!success) {\n        return res.status(404).json({ message: \"Student not found\" });\n      }\n\n      res.json({ message: \"Student removed successfully\" });\n    } catch (error: any) {\n      console.error(\"Error deleting student:\", error);\n      res.status(500).json({ message: error.message || \"Failed to remove student\" });\n    }\n  });\n\n  // User routes\n  app.get(\"/api/users\", isAuthenticated, async (req, res) => {\n    const users = await storage.getUsers();\n    res.json(users);\n  });\n\n  app.post(\"/api/users\", async (req, res) => {\n    try {\n      const userData = insertUserSchema.parse(req.body);\n      const user = await storage.createUser(userData);\n      res.status(201).json(user);\n    } catch (error) {\n      res.status(400).json({ message: (error as Error).message });\n    }\n  });\n\n  // Simple in-memory storage for family settings (per session)\n  const familySettings = new Map();\n\n  // Family settings routes\n  app.get(\"/api/family/settings\", isAuthenticated, async (req, res) => {\n    const user = req.user as any;\n    const userSettings = familySettings.get(user.id) || {\n      familyName: \"Matthews Family\",\n      preferences: {}\n    };\n    res.json(userSettings);\n  });\n\n  app.post(\"/api/family/settings\", isAuthenticated, async (req, res) => {\n    const user = req.user as any;\n    // Save family settings to in-memory storage\n    familySettings.set(user.id, req.body);\n    res.json({ success: true, settings: req.body });\n  });\n\n  // Push notification subscription storage\n  const notificationSubscriptions = new Map();\n\n  // PWA notification routes\n  app.post(\"/api/notifications/subscribe\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      const subscription = req.body;\n      \n      // Store subscription for this user\n      notificationSubscriptions.set(user.id, subscription);\n      \n      res.json({ success: true, message: \"Subscription saved\" });\n    } catch (error) {\n      console.error(\"Error saving notification subscription:\", error);\n      res.status(500).json({ error: \"Failed to save subscription\" });\n    }\n  });\n\n  app.delete(\"/api/notifications/subscribe\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      notificationSubscriptions.delete(user.id);\n      res.json({ success: true, message: \"Subscription removed\" });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to remove subscription\" });\n    }\n  });\n\n  // Send notification to specific user\n  app.post(\"/api/notifications/send\", isAuthenticated, async (req, res) => {\n    try {\n      const { userId, title, body, data } = req.body;\n      const subscription = notificationSubscriptions.get(userId);\n      \n      if (!subscription) {\n        return res.status(404).json({ error: \"No subscription found for user\" });\n      }\n\n      // In production, you would use a service like web-push here\n      console.log(`Would send notification to user ${userId}:`, { title, body, data });\n      \n      res.json({ success: true, message: \"Notification sent\" });\n    } catch (error) {\n      console.error(\"Error sending notification:\", error);\n      res.status(500).json({ error: \"Failed to send notification\" });\n    }\n  });\n\n  // Get PWA installation status\n  app.get(\"/api/pwa/status\", isAuthenticated, async (req, res) => {\n    const user = req.user as any;\n    const hasNotifications = notificationSubscriptions.has(user.id);\n    \n    res.json({\n      notificationsEnabled: hasNotifications,\n      cacheStatus: \"active\" // In production, check actual cache status\n    });\n  });\n\n  // Curriculum management routes\n  app.get(\"/api/curriculums\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      if (user.role !== \"parent\") {\n        return res.status(403).json({ message: \"Only parents can access curriculums\" });\n      }\n      \n      const curriculums = await authStorage.getCurriculumsByParent(user.id);\n      res.json(curriculums);\n    } catch (error) {\n      console.error(\"Error fetching curriculums:\", error);\n      res.status(500).json({ message: \"Failed to fetch curriculums\" });\n    }\n  });\n\n  app.post(\"/api/curriculums\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      if (user.role !== \"parent\") {\n        return res.status(403).json({ message: \"Only parents can create curriculums\" });\n      }\n\n      const curriculumData = {\n        ...req.body,\n        parentId: user.id,\n      };\n\n      const curriculum = await authStorage.createCurriculum(curriculumData);\n      res.status(201).json(curriculum);\n    } catch (error: any) {\n      console.error(\"Error creating curriculum:\", error);\n      res.status(400).json({ message: error.message || \"Failed to create curriculum\" });\n    }\n  });\n\n  app.post(\"/api/curriculums/:id/lessons\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      if (user.role !== \"parent\") {\n        return res.status(403).json({ message: \"Only parents can add lessons\" });\n      }\n\n      const curriculumId = parseInt(req.params.id);\n      const lessons = req.body.lessons; // Array of lesson objects\n\n      const createdLessons = await authStorage.bulkCreateLessons(curriculumId, lessons);\n      await authStorage.updateCurriculumTotalLessons(curriculumId, lessons.length);\n      \n      res.status(201).json(createdLessons);\n    } catch (error: any) {\n      console.error(\"Error creating lessons:\", error);\n      res.status(400).json({ message: error.message || \"Failed to create lessons\" });\n    }\n  });\n\n  app.get(\"/api/curriculums/:id/lessons\", isAuthenticated, async (req, res) => {\n    try {\n      const curriculumId = parseInt(req.params.id);\n      const lessons = await authStorage.getLessonsByCurriculum(curriculumId);\n      res.json(lessons);\n    } catch (error) {\n      console.error(\"Error fetching lessons:\", error);\n      res.status(500).json({ message: \"Failed to fetch lessons\" });\n    }\n  });\n\n  app.post(\"/api/students/:studentId/curriculums\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      if (user.role !== \"parent\") {\n        return res.status(403).json({ message: \"Only parents can assign curriculums\" });\n      }\n\n      const studentId = parseInt(req.params.studentId);\n      const { curriculumId, lessonsPerDay } = req.body;\n\n      const assignment = await authStorage.assignCurriculumToStudent({\n        studentId,\n        curriculumId,\n        lessonsPerDay: lessonsPerDay || 1,\n        startDate: new Date(),\n        isActive: true,\n        currentLesson: 1,\n      });\n\n      res.status(201).json(assignment);\n    } catch (error: any) {\n      console.error(\"Error assigning curriculum:\", error);\n      res.status(400).json({ message: error.message || \"Failed to assign curriculum\" });\n    }\n  });\n\n  app.get(\"/api/students/:studentId/daily-lessons\", isAuthenticated, async (req, res) => {\n    try {\n      const studentId = parseInt(req.params.studentId);\n      const dailyLessons = await authStorage.getStudentDailyLessons(studentId);\n      res.json(dailyLessons);\n    } catch (error) {\n      console.error(\"Error fetching daily lessons:\", error);\n      res.status(500).json({ message: \"Failed to fetch daily lessons\" });\n    }\n  });\n\n  app.put(\"/api/lesson-progress/:lessonId\", isAuthenticated, async (req, res) => {\n    try {\n      const lessonId = parseInt(req.params.lessonId);\n      const { status, timeSpent, notes, score } = req.body;\n\n      const progress = await authStorage.updateLessonProgress(lessonId, {\n        status,\n        timeSpent,\n        notes,\n        score,\n        completedAt: status === \"completed\" ? new Date() : null,\n      });\n\n      res.json(progress);\n    } catch (error: any) {\n      console.error(\"Error updating lesson progress:\", error);\n      res.status(400).json({ message: error.message || \"Failed to update progress\" });\n    }\n  });\n\n  // AI-powered lesson extraction\n  app.post(\"/api/curriculums/extract-lessons\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      if (user.role !== \"parent\") {\n        return res.status(403).json({ message: \"Only parents can extract lessons\" });\n      }\n\n      const { imageData, textContent, curriculumName, extractionType } = req.body;\n      \n      let lessons: any[] = [];\n      \n      if (extractionType === \"image\" && imageData) {\n        const { extractLessonsFromImage } = await import(\"./openai\");\n        // Remove data URL prefix if present\n        const base64Data = imageData.replace(/^data:image\\/[a-z]+;base64,/, '');\n        lessons = await extractLessonsFromImage(base64Data, curriculumName);\n      } else if (extractionType === \"text\" && textContent) {\n        const { extractLessonsFromText } = await import(\"./openai\");\n        lessons = await extractLessonsFromText(textContent, curriculumName);\n      } else {\n        return res.status(400).json({ message: \"Invalid extraction type or missing data\" });\n      }\n\n      res.json({ lessons, count: lessons.length });\n    } catch (error: any) {\n      console.error(\"Error extracting lessons:\", error);\n      res.status(500).json({ message: error.message || \"Failed to extract lessons\" });\n    }\n  });\n\n  app.post(\"/api/curriculums/enhance-description\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      if (user.role !== \"parent\") {\n        return res.status(403).json({ message: \"Only parents can enhance descriptions\" });\n      }\n\n      const { curriculumName, publisher, gradeLevel } = req.body;\n      const { enhanceCurriculumDescription } = await import(\"./openai\");\n      \n      const description = await enhanceCurriculumDescription(curriculumName, publisher, gradeLevel);\n      res.json({ description });\n    } catch (error: any) {\n      console.error(\"Error enhancing description:\", error);\n      res.status(500).json({ message: error.message || \"Failed to enhance description\" });\n    }\n  });\n\n  // Class routes\n  app.get(\"/api/classes\", isAuthenticated, async (req, res) => {\n    const user = req.user as any;\n    if (user.role === \"teacher\") {\n      const classes = await storage.getClassesByTeacher(user.id);\n      res.json(classes);\n    } else {\n      const student = (await storage.getStudents()).find(\n        s => s.userId === user.id\n      );\n      if (!student) {\n        return res.json([]);\n      }\n      \n      const allClasses = await storage.getClasses();\n      const studentClasses = allClasses.filter(c => \n        student.classIds.includes(c.id.toString())\n      );\n      res.json(studentClasses);\n    }\n  });\n\n  app.post(\"/api/classes\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      if (user.role !== \"teacher\") {\n        return res.status(403).json({ message: \"Only teachers can create classes\" });\n      }\n      \n      const classData = insertClassSchema.parse({\n        ...req.body,\n        teacherId: user.id\n      });\n      \n      const newClass = await storage.createClass(classData);\n      res.status(201).json(newClass);\n    } catch (error) {\n      res.status(400).json({ message: (error as Error).message });\n    }\n  });\n\n  app.put(\"/api/classes/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const classId = parseInt(req.params.id);\n      const user = req.user as any;\n      \n      const existingClass = await storage.getClass(classId);\n      if (!existingClass) {\n        return res.status(404).json({ message: \"Class not found\" });\n      }\n      \n      if (existingClass.teacherId !== user.id) {\n        return res.status(403).json({ message: \"You can only modify your own classes\" });\n      }\n      \n      const updatedClass = await storage.updateClass(classId, req.body);\n      res.json(updatedClass);\n    } catch (error) {\n      res.status(400).json({ message: (error as Error).message });\n    }\n  });\n\n  app.delete(\"/api/classes/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const classId = parseInt(req.params.id);\n      const user = req.user as any;\n      \n      const existingClass = await storage.getClass(classId);\n      if (!existingClass) {\n        return res.status(404).json({ message: \"Class not found\" });\n      }\n      \n      if (existingClass.teacherId !== user.id) {\n        return res.status(403).json({ message: \"You can only delete your own classes\" });\n      }\n      \n      await storage.deleteClass(classId);\n      res.json({ message: \"Class deleted\" });\n    } catch (error) {\n      res.status(400).json({ message: (error as Error).message });\n    }\n  });\n\n  // Student routes\n  app.get(\"/api/students\", isAuthenticated, async (req, res) => {\n    const user = req.user as any;\n    \n    if (user.role !== \"teacher\") {\n      return res.status(403).json({ message: \"Access denied\" });\n    }\n    \n    const students = await storage.getStudentsWithUserData();\n    res.json(students);\n  });\n\n  app.get(\"/api/classes/:id/students\", isAuthenticated, async (req, res) => {\n    try {\n      const classId = parseInt(req.params.id);\n      const user = req.user as any;\n      \n      const existingClass = await storage.getClass(classId);\n      if (!existingClass) {\n        return res.status(404).json({ message: \"Class not found\" });\n      }\n      \n      if (user.role === \"teacher\" && existingClass.teacherId !== user.id) {\n        return res.status(403).json({ message: \"You can only access your own classes\" });\n      }\n      \n      const students = await storage.getStudentsByClass(classId);\n      res.json(students);\n    } catch (error) {\n      res.status(400).json({ message: (error as Error).message });\n    }\n  });\n\n  app.post(\"/api/students\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      if (user.role !== \"teacher\") {\n        return res.status(403).json({ message: \"Only teachers can create students\" });\n      }\n      \n      // First create a user\n      const newUser = await storage.createUser({\n        username: req.body.username,\n        password: req.body.password || \"password123\", // Default password\n        role: \"student\",\n        fullName: req.body.fullName\n      });\n      \n      // Then create a student linked to that user\n      const studentData = insertStudentSchema.parse({\n        userId: newUser.id,\n        classIds: req.body.classIds || []\n      });\n      \n      const student = await storage.createStudent(studentData);\n      \n      // Return combined data\n      res.status(201).json({\n        ...student,\n        user: newUser\n      });\n    } catch (error) {\n      res.status(400).json({ message: (error as Error).message });\n    }\n  });\n\n  app.put(\"/api/students/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const studentId = parseInt(req.params.id);\n      const user = req.user as any;\n      \n      if (user.role !== \"teacher\") {\n        return res.status(403).json({ message: \"Only teachers can update students\" });\n      }\n      \n      const student = await storage.getStudent(studentId);\n      if (!student) {\n        return res.status(404).json({ message: \"Student not found\" });\n      }\n      \n      // Update student class IDs\n      if (req.body.classIds !== undefined) {\n        await storage.updateStudent(studentId, {\n          ...student,\n          classIds: req.body.classIds\n        });\n      }\n      \n      // If user data is provided, update the user\n      if (req.body.fullName) {\n        const studentUser = await storage.getUser(student.userId);\n        if (studentUser) {\n          // We can't use storage.updateUser since we didn't define it\n          // This is just a workaround for the demo\n          studentUser.fullName = req.body.fullName;\n        }\n      }\n      \n      const updatedStudent = await storage.getStudent(studentId);\n      const studentUser = await storage.getUser(student.userId);\n      \n      res.json({\n        ...updatedStudent,\n        user: studentUser\n      });\n    } catch (error) {\n      res.status(400).json({ message: (error as Error).message });\n    }\n  });\n\n  // Assignment routes\n  app.get(\"/api/assignments\", isAuthenticated, async (req, res) => {\n    const user = req.user as any;\n    \n    if (user.role === \"teacher\") {\n      const assignments = await storage.getAssignments();\n      res.json(assignments);\n    } else {\n      // For students, get assignments via tasks\n      const student = (await storage.getStudents()).find(\n        s => s.userId === user.id\n      );\n      \n      if (!student) {\n        return res.json([]);\n      }\n      \n      const tasks = await storage.getTasksByStudent(student.id);\n      const assignments = tasks.map(task => task.assignment);\n      \n      // Remove duplicates\n      const uniqueAssignments = assignments.filter(\n        (assignment, index, self) =>\n          index === self.findIndex(a => a.id === assignment.id)\n      );\n      \n      res.json(uniqueAssignments);\n    }\n  });\n\n  app.post(\"/api/assignments\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      if (user.role !== \"teacher\") {\n        return res.status(403).json({ message: \"Only teachers can create assignments\" });\n      }\n      \n      const assignmentData = insertAssignmentSchema.parse({\n        ...req.body,\n        createdBy: user.id\n      });\n      \n      const assignment = await storage.createAssignment(assignmentData);\n      res.status(201).json(assignment);\n    } catch (error) {\n      res.status(400).json({ message: (error as Error).message });\n    }\n  });\n\n  // Task routes\n  app.get(\"/api/tasks\", isAuthenticated, async (req, res) => {\n    const user = req.user as any;\n    \n    if (user.role === \"teacher\") {\n      const tasks = await storage.getTasks();\n      res.json(tasks);\n    } else {\n      const student = (await storage.getStudents()).find(\n        s => s.userId === user.id\n      );\n      \n      if (!student) {\n        return res.json([]);\n      }\n      \n      const tasks = await storage.getTasksByStudent(student.id);\n      res.json(tasks);\n    }\n  });\n\n  app.get(\"/api/student/tasks\", isAuthenticated, async (req, res) => {\n    const user = req.user as any;\n    \n    if (user.role !== \"student\") {\n      return res.status(403).json({ message: \"Only for students\" });\n    }\n    \n    const student = (await storage.getStudents()).find(\n      s => s.userId === user.id\n    );\n    \n    if (!student) {\n      return res.json([]);\n    }\n    \n    const tasks = await storage.getTasksByStudent(student.id);\n    res.json(tasks);\n  });\n\n  app.put(\"/api/tasks/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const taskId = parseInt(req.params.id);\n      const user = req.user as any;\n      \n      const task = await storage.getTask(taskId);\n      if (!task) {\n        return res.status(404).json({ message: \"Task not found\" });\n      }\n      \n      // Students can only update their own tasks' completion status\n      if (user.role === \"student\") {\n        const student = (await storage.getStudents()).find(\n          s => s.userId === user.id\n        );\n        \n        if (!student || student.id !== task.studentId) {\n          return res.status(403).json({ message: \"You can only update your own tasks\" });\n        }\n        \n        // Students can only toggle completion status\n        if (req.body.completed !== undefined) {\n          const completedAt = req.body.completed ? new Date() : null;\n          \n          const updatedTask = await storage.updateTask(taskId, {\n            ...task,\n            completed: req.body.completed,\n            completedAt\n          });\n          \n          res.json(updatedTask);\n        } else {\n          res.status(400).json({ message: \"Only completion status can be updated\" });\n        }\n      } else {\n        // Teachers can update any task\n        const updatedTask = await storage.updateTask(taskId, req.body);\n        res.json(updatedTask);\n      }\n    } catch (error) {\n      res.status(400).json({ message: (error as Error).message });\n    }\n  });\n\n  // Dashboard routes\n  app.get(\"/api/dashboard/teacher\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      \n      if (user.role !== \"teacher\") {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const classesWithCount = await storage.getClassesWithStudentCount(user.id);\n      const studentProgress = await storage.getStudentProgress(user.id);\n      const completionRate = await storage.getTaskCompletionRate(user.id);\n      \n      res.json({\n        classes: classesWithCount,\n        studentProgress,\n        completionRate\n      });\n    } catch (error) {\n      res.status(500).json({ message: (error as Error).message });\n    }\n  });\n\n  app.get(\"/api/dashboard/student\", isAuthenticated, async (req, res) => {\n    try {\n      const user = req.user as any;\n      \n      if (user.role !== \"student\") {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const student = (await storage.getStudents()).find(\n        s => s.userId === user.id\n      );\n      \n      if (!student) {\n        return res.status(404).json({ message: \"Student record not found\" });\n      }\n      \n      const tasks = await storage.getTasksByStudent(student.id);\n      const completedTasks = tasks.filter(task => task.completed);\n      const pendingTasks = tasks.filter(task => !task.completed);\n      \n      // Group tasks by class for progress calculation\n      const classTasks = tasks.reduce((acc, task) => {\n        const classId = task.class.id;\n        if (!acc[classId]) {\n          acc[classId] = {\n            className: task.class.name,\n            total: 0,\n            completed: 0\n          };\n        }\n        acc[classId].total++;\n        if (task.completed) acc[classId].completed++;\n        return acc;\n      }, {} as Record<number, { className: string; total: number; completed: number }>);\n      \n      const progress = Object.values(classTasks).map(ct => ({\n        className: ct.className,\n        percentage: ct.total > 0 ? (ct.completed / ct.total) * 100 : 0\n      }));\n      \n      res.json({\n        completedTasks: completedTasks.length,\n        pendingTasks: pendingTasks.length,\n        dueTodayTasks: pendingTasks.filter(task => {\n          const dueDate = new Date(task.assignment.dueDate);\n          const today = new Date();\n          return dueDate.toDateString() === today.toDateString();\n        }).length,\n        totalClasses: student.classIds.length,\n        progress\n      });\n    } catch (error) {\n      res.status(500).json({ message: (error as Error).message });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":29215},"server/routes.ts":{"content":"import type { Express, Request, Response } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\nimport fs from 'fs/promises';\nimport { analyzeCurriculumImage } from './anthropic.js';\nimport { storage } from \"./storage-replit\";\nimport { setupAuth, isAuthenticated } from \"./replitAuth\";\nimport { z } from \"zod\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\nimport { \n  insertClassSchema, \n  insertStudentSchema,\n  insertAssignmentSchema,\n  insertTaskSchema,\n  insertCurriculumSchema,\n  insertCurriculumLessonSchema,\n  insertStudentCurriculumSchema,\n  insertLessonProgressSchema\n} from \"@shared/schema\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Auth middleware\n  await setupAuth(app);\n\n  // Auth routes\n  app.get('/api/auth/user', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      // Add computed fullName for compatibility\n      const userWithFullName = {\n        ...user,\n        fullName: user.firstName && user.lastName \n          ? `${user.firstName} ${user.lastName}` \n          : user.firstName || user.lastName || 'User'\n      };\n      \n      res.json(userWithFullName);\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  // Student management routes\n  app.get(\"/api/students\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const students = await storage.getStudentsByParent(userId);\n      res.json(students);\n    } catch (error) {\n      console.error(\"Error fetching students:\", error);\n      res.status(500).json({ message: \"Failed to fetch students\" });\n    }\n  });\n\n  app.post(\"/api/students\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const studentData = insertStudentSchema.parse({\n        ...req.body,\n        parentId: userId\n      });\n      const student = await storage.createStudent(studentData);\n      res.status(201).json(student);\n    } catch (error: any) {\n      console.error(\"Error creating student:\", error);\n      res.status(400).json({ message: error.message || \"Failed to create student\" });\n    }\n  });\n\n  app.patch(\"/api/students/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const studentId = parseInt(req.params.id);\n      const updateData = insertStudentSchema.partial().parse(req.body);\n      const updatedStudent = await storage.updateStudent(studentId, updateData);\n      \n      if (!updatedStudent) {\n        return res.status(404).json({ message: \"Student not found\" });\n      }\n      \n      res.json(updatedStudent);\n    } catch (error: any) {\n      console.error(\"Error updating student:\", error);\n      res.status(400).json({ message: error.message || \"Failed to update student\" });\n    }\n  });\n\n  app.delete(\"/api/students/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const studentId = parseInt(req.params.id);\n      const deleted = await storage.deleteStudent(studentId);\n      \n      if (!deleted) {\n        return res.status(404).json({ message: \"Student not found\" });\n      }\n      \n      res.json({ message: \"Student deleted successfully\" });\n    } catch (error: any) {\n      console.error(\"Error deleting student:\", error);\n      res.status(500).json({ message: \"Failed to delete student\" });\n    }\n  });\n\n  // Class management routes\n  app.get(\"/api/classes\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const classes = await storage.getClassesByTeacher(userId);\n      res.json(classes);\n    } catch (error) {\n      console.error(\"Error fetching classes:\", error);\n      res.status(500).json({ message: \"Failed to fetch classes\" });\n    }\n  });\n\n  app.post(\"/api/classes\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const classData = insertClassSchema.parse({\n        ...req.body,\n        teacherId: userId\n      });\n      const newClass = await storage.createClass(classData);\n      res.status(201).json(newClass);\n    } catch (error: any) {\n      console.error(\"Error creating class:\", error);\n      res.status(400).json({ message: error.message || \"Failed to create class\" });\n    }\n  });\n\n  // Assignment management routes\n  app.get(\"/api/assignments\", isAuthenticated, async (req: any, res) => {\n    try {\n      const assignments = await storage.getAssignments();\n      res.json(assignments);\n    } catch (error) {\n      console.error(\"Error fetching assignments:\", error);\n      res.status(500).json({ message: \"Failed to fetch assignments\" });\n    }\n  });\n\n  app.post(\"/api/assignments\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const assignmentData = insertAssignmentSchema.parse({\n        ...req.body,\n        createdBy: userId\n      });\n      const assignment = await storage.createAssignment(assignmentData);\n      res.status(201).json(assignment);\n    } catch (error: any) {\n      console.error(\"Error creating assignment:\", error);\n      res.status(400).json({ message: error.message || \"Failed to create assignment\" });\n    }\n  });\n\n  // Task management routes\n  app.get(\"/api/tasks/student/:studentId\", isAuthenticated, async (req: any, res) => {\n    try {\n      const studentId = parseInt(req.params.studentId);\n      const tasks = await storage.getTasksByStudent(studentId);\n      res.json(tasks);\n    } catch (error) {\n      console.error(\"Error fetching tasks:\", error);\n      res.status(500).json({ message: \"Failed to fetch tasks\" });\n    }\n  });\n\n  app.post(\"/api/tasks\", isAuthenticated, async (req: any, res) => {\n    try {\n      const taskData = insertTaskSchema.parse(req.body);\n      const task = await storage.createTask(taskData);\n      res.status(201).json(task);\n    } catch (error: any) {\n      console.error(\"Error creating task:\", error);\n      res.status(400).json({ message: error.message || \"Failed to create task\" });\n    }\n  });\n\n  app.patch(\"/api/tasks/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const taskId = parseInt(req.params.id);\n      const updateData = insertTaskSchema.partial().parse(req.body);\n      const updatedTask = await storage.updateTask(taskId, updateData);\n      \n      if (!updatedTask) {\n        return res.status(404).json({ message: \"Task not found\" });\n      }\n      \n      res.json(updatedTask);\n    } catch (error: any) {\n      console.error(\"Error updating task:\", error);\n      res.status(400).json({ message: error.message || \"Failed to update task\" });\n    }\n  });\n\n  // Curriculum management routes\n  app.get(\"/api/curriculums\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const curriculums = await storage.getCurriculumsByParent(userId);\n      res.json(curriculums);\n    } catch (error) {\n      console.error(\"Error fetching curriculums:\", error);\n      res.status(500).json({ message: \"Failed to fetch curriculums\" });\n    }\n  });\n\n  app.post(\"/api/curriculums\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const curriculumData = insertCurriculumSchema.parse({\n        ...req.body,\n        parentId: userId\n      });\n      const curriculum = await storage.createCurriculum(curriculumData);\n      res.status(201).json(curriculum);\n    } catch (error: any) {\n      console.error(\"Error creating curriculum:\", error);\n      res.status(400).json({ message: error.message || \"Failed to create curriculum\" });\n    }\n  });\n\n  // Curriculum lessons\n  app.get(\"/api/curriculums/:id/lessons\", isAuthenticated, async (req: any, res) => {\n    try {\n      const curriculumId = parseInt(req.params.id);\n      const lessons = await storage.getCurriculumLessons(curriculumId);\n      res.json(lessons);\n    } catch (error) {\n      console.error(\"Error fetching lessons:\", error);\n      res.status(500).json({ message: \"Failed to fetch lessons\" });\n    }\n  });\n\n  app.post(\"/api/curriculums/:id/lessons\", isAuthenticated, async (req: any, res) => {\n    try {\n      const curriculumId = parseInt(req.params.id);\n      const lessonData = insertCurriculumLessonSchema.parse({\n        ...req.body,\n        curriculumId\n      });\n      const lesson = await storage.createCurriculumLesson(lessonData);\n      res.status(201).json(lesson);\n    } catch (error: any) {\n      console.error(\"Error creating lesson:\", error);\n      res.status(400).json({ message: error.message || \"Failed to create lesson\" });\n    }\n  });\n\n  // AI curriculum extraction endpoints\n  app.post(\"/api/curriculums/extract-lessons\", isAuthenticated, async (req: any, res) => {\n    try {\n      // Mock AI extraction for now - in production this would call an AI service\n      const { imageData, textContent, curriculumName, extractionType } = req.body;\n      \n      // Simulate lesson extraction\n      const mockLessons = [\n        {\n          lessonNumber: 1,\n          title: \"Introduction to Fractions\",\n          type: \"lesson\",\n          description: \"Learn the basics of fractions\",\n          estimatedMinutes: 30\n        },\n        {\n          lessonNumber: 2,\n          title: \"Adding Fractions\",\n          type: \"lesson\", \n          description: \"Practice adding fractions with like denominators\",\n          estimatedMinutes: 45\n        },\n        {\n          lessonNumber: 3,\n          title: \"Fraction Quiz 1\",\n          type: \"quiz\",\n          description: \"Test your understanding of basic fractions\",\n          estimatedMinutes: 20\n        }\n      ];\n\n      res.json({\n        lessons: mockLessons,\n        count: mockLessons.length,\n        extractionType\n      });\n    } catch (error: any) {\n      console.error(\"Error extracting lessons:\", error);\n      res.status(500).json({ message: \"Failed to extract lessons\" });\n    }\n  });\n\n  app.post(\"/api/curriculums/enhance-description\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { curriculumName, publisher, gradeLevel } = req.body;\n      \n      // Mock AI description enhancement\n      const enhancedDescription = `${curriculumName} by ${publisher} is a comprehensive ${gradeLevel} curriculum designed to build strong foundational skills through engaging lessons and practical exercises. This curriculum emphasizes hands-on learning and provides clear progression paths for student success.`;\n\n      res.json({\n        description: enhancedDescription\n      });\n    } catch (error: any) {\n      console.error(\"Error enhancing description:\", error);\n      res.status(500).json({ message: \"Failed to enhance description\" });\n    }\n  });\n\n  // Forgot password page route\n  app.get(\"/forgot-password\", (req, res) => {\n    res.send(`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Reset Password - Homeschool Planner</title>\n        <meta charset=\"utf-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <style>\n          body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; margin: 0; padding: 40px; background: #f5f5f5; }\n          .container { max-width: 400px; margin: 0 auto; background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          h1 { color: #333; margin-bottom: 30px; text-align: center; }\n          .info { background: #e3f2fd; padding: 20px; border-radius: 6px; margin-bottom: 30px; }\n          .btn { display: inline-block; background: #2563eb; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; text-align: center; }\n          .btn:hover { background: #1d4ed8; }\n        </style>\n      </head>\n      <body>\n        <div class=\"container\">\n          <h1>Reset Your Password</h1>\n          <div class=\"info\">\n            <p><strong>Using Replit Authentication</strong></p>\n            <p>This application uses Replit's secure authentication system. To reset your password:</p>\n            <ol>\n              <li>Go to <a href=\"https://replit.com\" target=\"_blank\">Replit.com</a></li>\n              <li>Click \"Forgot Password\" on their login page</li>\n              <li>Follow the instructions to reset your Replit account password</li>\n              <li>Return here and log in with your new password</li>\n            </ol>\n          </div>\n          <a href=\"/api/login\" class=\"btn\">Back to Login</a>\n        </div>\n      </body>\n      </html>\n    `);\n  });\n\n  // Add planner API routes for the HTML planner  \n  const { default: plannerRoutes } = await import(\"./plannerRoutes.js\");\n  app.use(\"/api/planner\", plannerRoutes);\n\n  // AI Curriculum Analysis endpoint\n  app.post('/api/curriculum/analyze', async (req, res) => {\n    try {\n      const { image } = req.body;\n      \n      if (!image) {\n        return res.status(400).json({ error: 'Image data is required' });\n      }\n\n      // Remove data URL prefix if present\n      const base64Image = image.replace(/^data:image\\/[a-z]+;base64,/, '');\n      \n      const lessons = await analyzeCurriculumImage(base64Image);\n      \n      res.json({ lessons });\n    } catch (error) {\n      console.error('Error analyzing curriculum:', error);\n      res.status(500).json({ error: error.message || 'Failed to analyze curriculum image' });\n    }\n  });\n\n  // Serve static login page\n  app.get('/login', async (req, res) => {\n    try {\n      const filePath = path.join(__dirname, '..', 'static-login.html');\n      const htmlContent = await fs.readFile(filePath, 'utf8');\n      res.send(htmlContent);\n    } catch (error) {\n      console.error('Error serving login page:', error);\n      res.status(500).send('Error loading login page');\n    }\n  });\n\n  // Serve static dashboard\n  app.get('/static-dashboard', async (req, res) => {\n    try {\n      const filePath = path.join(__dirname, '..', 'static-dashboard.html');\n      const htmlContent = await fs.readFile(filePath, 'utf8');\n      res.send(htmlContent);\n    } catch (error) {\n      console.error('Error serving dashboard:', error);\n      res.status(500).send('Error loading dashboard');\n    }\n  });\n\n  // Serve static student view\n  app.get('/student-view', async (req, res) => {\n    try {\n      const filePath = path.join(__dirname, '..', 'static-student.html');\n      const htmlContent = await fs.readFile(filePath, 'utf8');\n      res.send(htmlContent);\n    } catch (error) {\n      console.error('Error serving student view:', error);\n      res.status(500).send('Error loading student view');\n    }\n  });\n\n  // Serve static parent view\n  app.get('/parent-view', async (req, res) => {\n    try {\n      const filePath = path.join(__dirname, '..', 'static-parent.html');\n      const htmlContent = await fs.readFile(filePath, 'utf8');\n      res.send(htmlContent);\n    } catch (error) {\n      console.error('Error serving parent view:', error);\n      res.status(500).send('Error loading parent view');\n    }\n  });\n\n  // Serve static planner that bypasses Vite completely (requires teacher login)\n  app.get('/static-planner', async (req, res) => {\n    try {\n      const filePath = path.join(__dirname, '..', 'static-planner.html');\n      const htmlContent = await fs.readFile(filePath, 'utf8');\n      res.send(htmlContent);\n    } catch (error) {\n      console.error('Error serving planner:', error);\n      res.status(500).send('Error loading planner');\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":15659},"server/storage-auth.ts":{"content":"import { db } from \"./db\";\nimport { users, students, classes, assignments, tasks, curriculums, curriculumLessons, studentCurriculums, lessonProgress } from \"@shared/schema\";\nimport { eq, and, sql } from \"drizzle-orm\";\nimport bcrypt from \"bcryptjs\";\nimport type { \n  User, InsertUser, Student, InsertStudent, \n  Class, InsertClass, Assignment, InsertAssignment,\n  Task, InsertTask, StudentWithUser, TaskWithAssignment,\n  ClassWithStudentCount, StudentProgress, Curriculum, InsertCurriculum,\n  CurriculumLesson, InsertCurriculumLesson, StudentCurriculum, InsertStudentCurriculum,\n  LessonProgress, InsertLessonProgress, StudentDailyLessons\n} from \"@shared/schema\";\n\nexport interface IAuthStorage {\n  // Authentication operations\n  getUser(id: number): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  createUser(userData: InsertUser): Promise<User>;\n  updateUserLastLogin(id: number): Promise<void>;\n  validatePassword(plainPassword: string, hashedPassword: string): Promise<boolean>;\n  hashPassword(password: string): Promise<string>;\n  \n  // Student operations for families\n  getStudent(id: number): Promise<Student | undefined>;\n  getStudents(): Promise<Student[]>;\n  getStudentsByParent(parentId: number): Promise<Student[]>;\n  createStudent(studentData: InsertStudent): Promise<Student>;\n  updateStudent(id: number, studentData: Partial<InsertStudent>): Promise<Student | undefined>;\n  deleteStudent(id: number): Promise<boolean>;\n  \n  // Task operations for students\n  getTasksByStudent(studentId: number): Promise<TaskWithAssignment[]>;\n  updateTask(id: number, taskData: Partial<InsertTask>): Promise<Task | undefined>;\n  \n  // Class and assignment operations for parents\n  getClassesByParent(parentId: number): Promise<Class[]>;\n  createClass(classData: InsertClass): Promise<Class>;\n  getAssignmentsByParent(parentId: number): Promise<Assignment[]>;\n  createAssignment(assignmentData: InsertAssignment): Promise<Assignment>;\n  \n  // Dashboard data\n  getParentDashboardData(parentId: number): Promise<{\n    students: Student[];\n    classes: ClassWithStudentCount[];\n    totalTasks: number;\n    completedTasks: number;\n  }>;\n\n  // Curriculum management operations\n  getCurriculumsByParent(parentId: number): Promise<Curriculum[]>;\n  createCurriculum(curriculumData: InsertCurriculum): Promise<Curriculum>;\n  bulkCreateLessons(curriculumId: number, lessons: InsertCurriculumLesson[]): Promise<CurriculumLesson[]>;\n  updateCurriculumTotalLessons(curriculumId: number, totalLessons: number): Promise<void>;\n  getLessonsByCurriculum(curriculumId: number): Promise<CurriculumLesson[]>;\n  assignCurriculumToStudent(assignment: InsertStudentCurriculum): Promise<StudentCurriculum>;\n  getStudentDailyLessons(studentId: number): Promise<StudentDailyLessons>;\n  updateLessonProgress(lessonId: number, progressData: Partial<InsertLessonProgress>): Promise<LessonProgress>;\n}\n\nexport class AuthStorage implements IAuthStorage {\n  \n  async getUser(id: number): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.email, email));\n    return user;\n  }\n\n  async createUser(userData: InsertUser): Promise<User> {\n    const hashedPassword = await this.hashPassword(userData.password);\n    const [user] = await db\n      .insert(users)\n      .values({\n        ...userData,\n        password: hashedPassword,\n        role: \"parent\",\n      })\n      .returning();\n    return user;\n  }\n\n  async updateUserLastLogin(id: number): Promise<void> {\n    await db\n      .update(users)\n      .set({ lastLogin: new Date() })\n      .where(eq(users.id, id));\n  }\n\n  async hashPassword(password: string): Promise<string> {\n    return bcrypt.hash(password, 10);\n  }\n\n  async validatePassword(plainPassword: string, hashedPassword: string): Promise<boolean> {\n    return bcrypt.compare(plainPassword, hashedPassword);\n  }\n\n  async getStudent(id: number): Promise<Student | undefined> {\n    const [student] = await db.select().from(students).where(eq(students.id, id));\n    return student;\n  }\n\n  async getStudents(): Promise<Student[]> {\n    return await db.select().from(students);\n  }\n\n  async getStudentsByParent(parentId: number): Promise<Student[]> {\n    return await db.select().from(students).where(eq(students.parentId, parentId));\n  }\n\n  async createStudent(studentData: InsertStudent): Promise<Student> {\n    const [student] = await db\n      .insert(students)\n      .values(studentData)\n      .returning();\n    return student;\n  }\n\n  async updateStudent(id: number, studentData: Partial<InsertStudent>): Promise<Student | undefined> {\n    const [student] = await db\n      .update(students)\n      .set(studentData)\n      .where(eq(students.id, id))\n      .returning();\n    return student;\n  }\n\n  async deleteStudent(id: number): Promise<boolean> {\n    const result = await db.delete(students).where(eq(students.id, id));\n    return (result.rowCount || 0) > 0;\n  }\n\n  async getTasksByStudent(studentId: number): Promise<TaskWithAssignment[]> {\n    const tasksData = await db\n      .select({\n        task: tasks,\n        assignment: assignments,\n        class: classes,\n      })\n      .from(tasks)\n      .leftJoin(assignments, eq(tasks.assignmentId, assignments.id))\n      .leftJoin(classes, eq(assignments.classId, classes.id))\n      .where(eq(tasks.studentId, studentId));\n\n    return tasksData.map(row => ({\n      ...row.task,\n      assignment: row.assignment!,\n      class: row.class!,\n    }));\n  }\n\n  async updateTask(id: number, taskData: Partial<InsertTask>): Promise<Task | undefined> {\n    const [task] = await db\n      .update(tasks)\n      .set(taskData)\n      .where(eq(tasks.id, id))\n      .returning();\n    return task;\n  }\n\n  async getClassesByParent(parentId: number): Promise<Class[]> {\n    return await db.select().from(classes).where(eq(classes.teacherId, parentId));\n  }\n\n  async createClass(classData: InsertClass): Promise<Class> {\n    const [newClass] = await db\n      .insert(classes)\n      .values(classData)\n      .returning();\n    return newClass;\n  }\n\n  async getAssignmentsByParent(parentId: number): Promise<Assignment[]> {\n    return await db.select().from(assignments).where(eq(assignments.createdBy, parentId));\n  }\n\n  async createAssignment(assignmentData: InsertAssignment): Promise<Assignment> {\n    const [assignment] = await db\n      .insert(assignments)\n      .values(assignmentData)\n      .returning();\n    return assignment;\n  }\n\n  async getParentDashboardData(parentId: number): Promise<{\n    students: Student[];\n    classes: ClassWithStudentCount[];\n    totalTasks: number;\n    completedTasks: number;\n  }> {\n    const [studentsData, classesData, tasksData] = await Promise.all([\n      this.getStudentsByParent(parentId),\n      this.getClassesByParent(parentId),\n      db.select().from(tasks)\n        .leftJoin(students, eq(tasks.studentId, students.id))\n        .where(eq(students.parentId, parentId))\n    ]);\n\n    const classesWithCount = classesData.map(cls => ({\n      ...cls,\n      studentCount: studentsData.filter(s => \n        // For now, count all students for each class\n        true\n      ).length\n    }));\n\n    const totalTasks = tasksData.length;\n    const completedTasks = tasksData.filter(t => t.tasks?.completed).length;\n\n    return {\n      students: studentsData,\n      classes: classesWithCount,\n      totalTasks,\n      completedTasks,\n    };\n  }\n\n  // Curriculum management methods\n  async getCurriculumsByParent(parentId: number): Promise<Curriculum[]> {\n    return await db.select().from(curriculums).where(eq(curriculums.parentId, parentId));\n  }\n\n  async createCurriculum(curriculumData: InsertCurriculum): Promise<Curriculum> {\n    const [curriculum] = await db.insert(curriculums).values(curriculumData).returning();\n    return curriculum;\n  }\n\n  async bulkCreateLessons(curriculumId: number, lessons: InsertCurriculumLesson[]): Promise<CurriculumLesson[]> {\n    const lessonsWithCurriculumId = lessons.map(lesson => ({\n      ...lesson,\n      curriculumId\n    }));\n    return await db.insert(curriculumLessons).values(lessonsWithCurriculumId).returning();\n  }\n\n  async updateCurriculumTotalLessons(curriculumId: number, totalLessons: number): Promise<void> {\n    await db.update(curriculums)\n      .set({ totalLessons })\n      .where(eq(curriculums.id, curriculumId));\n  }\n\n  async getLessonsByCurriculum(curriculumId: number): Promise<CurriculumLesson[]> {\n    return await db.select().from(curriculumLessons)\n      .where(eq(curriculumLessons.curriculumId, curriculumId))\n      .orderBy(curriculumLessons.lessonNumber);\n  }\n\n  async assignCurriculumToStudent(assignment: InsertStudentCurriculum): Promise<StudentCurriculum> {\n    const [studentCurriculum] = await db.insert(studentCurriculums).values(assignment).returning();\n    return studentCurriculum;\n  }\n\n  async getStudentDailyLessons(studentId: number): Promise<StudentDailyLessons> {\n    // Get student's active curriculums\n    const studentCurriculumData = await db.select({\n      curriculum: curriculums,\n      studentCurriculum: studentCurriculums\n    })\n    .from(studentCurriculums)\n    .innerJoin(curriculums, eq(studentCurriculums.curriculumId, curriculums.id))\n    .where(and(\n      eq(studentCurriculums.studentId, studentId),\n      eq(studentCurriculums.isActive, true)\n    ));\n\n    const student = await this.getStudent(studentId);\n    if (!student) throw new Error(\"Student not found\");\n\n    const curriculumsWithLessons = await Promise.all(\n      studentCurriculumData.map(async ({ curriculum, studentCurriculum }) => {\n        // Get today's lessons based on current lesson and lessons per day\n        const allLessons = await this.getLessonsByCurriculum(curriculum.id);\n        const currentLessonIndex = studentCurriculum.currentLesson - 1;\n        const todaysLessons = allLessons.slice(\n          currentLessonIndex,\n          currentLessonIndex + studentCurriculum.lessonsPerDay\n        );\n\n        return {\n          id: curriculum.id,\n          name: curriculum.name,\n          subject: curriculum.subject,\n          todaysLessons,\n          lessonsPerDay: studentCurriculum.lessonsPerDay,\n          progress: Math.round((studentCurriculum.currentLesson / curriculum.totalLessons) * 100)\n        };\n      })\n    );\n\n    return {\n      studentId: student.id,\n      studentName: student.fullName,\n      curriculums: curriculumsWithLessons\n    };\n  }\n\n  async updateLessonProgress(lessonId: number, progressData: Partial<InsertLessonProgress>): Promise<LessonProgress> {\n    // First, try to find existing progress record\n    const existingProgress = await db.select().from(lessonProgress)\n      .where(eq(lessonProgress.lessonId, lessonId))\n      .limit(1);\n\n    if (existingProgress.length > 0) {\n      // Update existing record\n      const [updated] = await db.update(lessonProgress)\n        .set(progressData)\n        .where(eq(lessonProgress.id, existingProgress[0].id))\n        .returning();\n      return updated;\n    } else {\n      // Create new progress record\n      const [created] = await db.insert(lessonProgress)\n        .values(progressData as InsertLessonProgress)\n        .returning();\n      return created;\n    }\n  }\n}\n\nexport const authStorage = new AuthStorage();","size_bytes":11345},"server/storage-database.ts":{"content":"import { \n  users, classes, students, assignments, tasks,\n  type User, type InsertUser, type Class, type InsertClass, \n  type Student, type InsertStudent, type Assignment, type InsertAssignment,\n  type Task, type InsertTask, type StudentWithUser, type TaskWithAssignment,\n  type ClassWithStudentCount, type StudentProgress\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, and } from \"drizzle-orm\";\nimport type { IStorage } from \"./storage\";\n\nexport class DatabaseStorage implements IStorage {\n  \n  // User operations\n  async getUsers(): Promise<User[]> {\n    return await db.select().from(users);\n  }\n\n  async getUser(id: number): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || undefined;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.username, username));\n    return user || undefined;\n  }\n\n  async createUser(userData: InsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .returning();\n    return user;\n  }\n\n  // Class operations\n  async getClasses(): Promise<Class[]> {\n    return await db.select().from(classes);\n  }\n\n  async getClass(id: number): Promise<Class | undefined> {\n    const [classItem] = await db.select().from(classes).where(eq(classes.id, id));\n    return classItem || undefined;\n  }\n\n  async getClassesByTeacher(teacherId: number): Promise<Class[]> {\n    return await db.select().from(classes).where(eq(classes.teacherId, teacherId));\n  }\n\n  async createClass(classData: InsertClass): Promise<Class> {\n    const [classItem] = await db\n      .insert(classes)\n      .values(classData)\n      .returning();\n    return classItem;\n  }\n\n  async updateClass(id: number, classData: Partial<InsertClass>): Promise<Class | undefined> {\n    const [updated] = await db\n      .update(classes)\n      .set(classData)\n      .where(eq(classes.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  async deleteClass(id: number): Promise<boolean> {\n    const result = await db.delete(classes).where(eq(classes.id, id));\n    return result.rowCount > 0;\n  }\n\n  // Student operations\n  async getStudents(): Promise<Student[]> {\n    return await db.select().from(students);\n  }\n\n  async getStudent(id: number): Promise<Student | undefined> {\n    const [student] = await db.select().from(students).where(eq(students.id, id));\n    return student || undefined;\n  }\n\n  async getStudentsByClass(classId: number): Promise<StudentWithUser[]> {\n    const result = await db\n      .select()\n      .from(students)\n      .innerJoin(users, eq(students.userId, users.id))\n      .where(eq(students.classIds, [classId.toString()]));\n    \n    return result.map(row => ({\n      ...row.students,\n      user: row.users\n    }));\n  }\n\n  async createStudent(studentData: InsertStudent): Promise<Student> {\n    const [student] = await db\n      .insert(students)\n      .values(studentData)\n      .returning();\n    return student;\n  }\n\n  async updateStudent(id: number, studentData: Partial<InsertStudent>): Promise<Student | undefined> {\n    const [updated] = await db\n      .update(students)\n      .set(studentData)\n      .where(eq(students.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  async deleteStudent(id: number): Promise<boolean> {\n    const result = await db.delete(students).where(eq(students.id, id));\n    return result.rowCount > 0;\n  }\n\n  async getStudentsWithUserData(): Promise<StudentWithUser[]> {\n    const result = await db\n      .select()\n      .from(students)\n      .innerJoin(users, eq(students.userId, users.id));\n    \n    return result.map(row => ({\n      ...row.students,\n      user: row.users\n    }));\n  }\n\n  // Assignment operations\n  async getAssignments(): Promise<Assignment[]> {\n    return await db.select().from(assignments);\n  }\n\n  async getAssignment(id: number): Promise<Assignment | undefined> {\n    const [assignment] = await db.select().from(assignments).where(eq(assignments.id, id));\n    return assignment || undefined;\n  }\n\n  async getAssignmentsByClass(classId: number): Promise<Assignment[]> {\n    return await db.select().from(assignments).where(eq(assignments.classId, classId));\n  }\n\n  async createAssignment(assignmentData: InsertAssignment): Promise<Assignment> {\n    const [assignment] = await db\n      .insert(assignments)\n      .values(assignmentData)\n      .returning();\n    return assignment;\n  }\n\n  async updateAssignment(id: number, assignmentData: Partial<InsertAssignment>): Promise<Assignment | undefined> {\n    const [updated] = await db\n      .update(assignments)\n      .set(assignmentData)\n      .where(eq(assignments.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  async deleteAssignment(id: number): Promise<boolean> {\n    const result = await db.delete(assignments).where(eq(assignments.id, id));\n    return result.rowCount > 0;\n  }\n\n  // Task operations\n  async getTasks(): Promise<Task[]> {\n    return await db.select().from(tasks);\n  }\n\n  async getTask(id: number): Promise<Task | undefined> {\n    const [task] = await db.select().from(tasks).where(eq(tasks.id, id));\n    return task || undefined;\n  }\n\n  async getTasksByStudent(studentId: number): Promise<TaskWithAssignment[]> {\n    const result = await db\n      .select()\n      .from(tasks)\n      .innerJoin(assignments, eq(tasks.assignmentId, assignments.id))\n      .innerJoin(classes, eq(assignments.classId, classes.id))\n      .where(eq(tasks.studentId, studentId));\n    \n    return result.map(row => ({\n      ...row.tasks,\n      assignment: row.assignments,\n      class: row.classes\n    }));\n  }\n\n  async getTasksByAssignment(assignmentId: number): Promise<Task[]> {\n    return await db.select().from(tasks).where(eq(tasks.assignmentId, assignmentId));\n  }\n\n  async createTask(taskData: InsertTask): Promise<Task> {\n    const [task] = await db\n      .insert(tasks)\n      .values(taskData)\n      .returning();\n    return task;\n  }\n\n  async updateTask(id: number, taskData: Partial<InsertTask>): Promise<Task | undefined> {\n    const [updated] = await db\n      .update(tasks)\n      .set(taskData)\n      .where(eq(tasks.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  async deleteTask(id: number): Promise<boolean> {\n    const result = await db.delete(tasks).where(eq(tasks.id, id));\n    return result.rowCount > 0;\n  }\n\n  // Dashboard and reporting operations\n  async getClassesWithStudentCount(teacherId: number): Promise<ClassWithStudentCount[]> {\n    const teacherClasses = await this.getClassesByTeacher(teacherId);\n    \n    const classesWithCount = await Promise.all(\n      teacherClasses.map(async (classItem) => {\n        const studentsInClass = await this.getStudentsByClass(classItem.id);\n        return {\n          ...classItem,\n          studentCount: studentsInClass.length\n        };\n      })\n    );\n    \n    return classesWithCount;\n  }\n\n  async getStudentProgress(teacherId: number): Promise<StudentProgress[]> {\n    const teacherClasses = await this.getClassesByTeacher(teacherId);\n    const progress: StudentProgress[] = [];\n    \n    for (const classItem of teacherClasses) {\n      const studentsInClass = await this.getStudentsByClass(classItem.id);\n      \n      for (const student of studentsInClass) {\n        const studentTasks = await this.getTasksByStudent(student.id);\n        const completedTasks = studentTasks.filter(task => task.completed).length;\n        const pendingTasks = studentTasks.filter(task => !task.completed).length;\n        const totalTasks = studentTasks.length;\n        \n        progress.push({\n          studentId: student.id,\n          fullName: student.user.fullName,\n          className: classItem.name,\n          completedTasks,\n          pendingTasks,\n          progressPercentage: totalTasks > 0 ? (completedTasks / totalTasks) * 100 : 0\n        });\n      }\n    }\n    \n    return progress;\n  }\n\n  async getTaskCompletionRate(teacherId: number): Promise<number> {\n    const progress = await this.getStudentProgress(teacherId);\n    \n    if (progress.length === 0) return 0;\n    \n    const totalTasks = progress.reduce((sum, p) => sum + p.completedTasks + p.pendingTasks, 0);\n    const completedTasks = progress.reduce((sum, p) => sum + p.completedTasks, 0);\n    \n    return totalTasks > 0 ? (completedTasks / totalTasks) * 100 : 0;\n  }\n}","size_bytes":8399},"server/storage-replit.ts":{"content":"import {\n  users,\n  sessions,\n  students,\n  classes,\n  assignments,\n  tasks,\n  plannerTasks,\n  curriculums,\n  curriculumLessons,\n  studentCurriculums,\n  lessonProgress,\n  type User,\n  type UpsertUser,\n  type Student,\n  type InsertStudent,\n  type Class,\n  type InsertClass,\n  type Assignment,\n  type InsertAssignment,\n  type Task,\n  type InsertTask,\n  type PlannerTask,\n  type InsertPlannerTask,\n  type StudentWithUser,\n  type TaskWithAssignment,\n  type ClassWithStudentCount,\n  type StudentProgress,\n  type Curriculum,\n  type InsertCurriculum,\n  type CurriculumLesson,\n  type InsertCurriculumLesson,\n  type StudentCurriculum,\n  type InsertStudentCurriculum,\n  type LessonProgress,\n  type InsertLessonProgress,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, and } from \"drizzle-orm\";\n\n// Interface for storage operations (Replit Auth)\nexport interface IStorage {\n  // User operations (for Replit Auth)\n  getUser(id: string): Promise<User | undefined>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  \n  // Class operations\n  getClasses(): Promise<Class[]>;\n  getClass(id: number): Promise<Class | undefined>;\n  getClassesByTeacher(teacherId: string): Promise<Class[]>;\n  createClass(classData: InsertClass): Promise<Class>;\n  updateClass(id: number, classData: Partial<InsertClass>): Promise<Class | undefined>;\n  deleteClass(id: number): Promise<boolean>;\n  \n  // Student operations\n  getStudents(): Promise<Student[]>;\n  getStudent(id: number): Promise<Student | undefined>;\n  getStudentsByParent(parentId: string): Promise<Student[]>;\n  createStudent(student: InsertStudent): Promise<Student>;\n  updateStudent(id: number, studentData: Partial<InsertStudent>): Promise<Student | undefined>;\n  deleteStudent(id: number): Promise<boolean>;\n  \n  // Assignment operations\n  getAssignments(): Promise<Assignment[]>;\n  getAssignment(id: number): Promise<Assignment | undefined>;\n  getAssignmentsByClass(classId: number): Promise<Assignment[]>;\n  createAssignment(assignment: InsertAssignment): Promise<Assignment>;\n  updateAssignment(id: number, assignmentData: Partial<InsertAssignment>): Promise<Assignment | undefined>;\n  deleteAssignment(id: number): Promise<boolean>;\n  \n  // Task operations\n  getTasks(): Promise<Task[]>;\n  getTask(id: number): Promise<Task | undefined>;\n  getTasksByStudent(studentId: number): Promise<TaskWithAssignment[]>;\n  getTasksByAssignment(assignmentId: number): Promise<Task[]>;\n  createTask(task: InsertTask): Promise<Task>;\n  updateTask(id: number, taskData: Partial<InsertTask>): Promise<Task | undefined>;\n  deleteTask(id: number): Promise<boolean>;\n\n  // Planner task operations (simplified)\n  getAllTasks(): Promise<PlannerTask[]>;\n  getPlannerTask(id: string): Promise<PlannerTask | undefined>;\n  createPlannerTask(task: InsertPlannerTask): Promise<PlannerTask>;\n  updatePlannerTask(id: string, taskData: Partial<InsertPlannerTask>): Promise<PlannerTask | undefined>;\n  deletePlannerTask(id: string): Promise<boolean>;\n  \n  // Curriculum operations\n  getCurriculums(): Promise<Curriculum[]>;\n  getCurriculum(id: number): Promise<Curriculum | undefined>;\n  getCurriculumsByParent(parentId: string): Promise<Curriculum[]>;\n  createCurriculum(curriculum: InsertCurriculum): Promise<Curriculum>;\n  updateCurriculum(id: number, curriculumData: Partial<InsertCurriculum>): Promise<Curriculum | undefined>;\n  deleteCurriculum(id: number): Promise<boolean>;\n  \n  // Curriculum lessons\n  getCurriculumLessons(curriculumId: number): Promise<CurriculumLesson[]>;\n  createCurriculumLesson(lesson: InsertCurriculumLesson): Promise<CurriculumLesson>;\n  updateCurriculumLesson(id: number, lessonData: Partial<InsertCurriculumLesson>): Promise<CurriculumLesson | undefined>;\n  \n  // Student curriculum assignments\n  getStudentCurriculums(studentId: number): Promise<StudentCurriculum[]>;\n  createStudentCurriculum(studentCurriculum: InsertStudentCurriculum): Promise<StudentCurriculum>;\n  updateStudentCurriculum(id: number, data: Partial<InsertStudentCurriculum>): Promise<StudentCurriculum | undefined>;\n  \n  // Lesson progress tracking\n  getLessonProgress(studentId: number, curriculumId: number): Promise<LessonProgress[]>;\n  createLessonProgress(progress: InsertLessonProgress): Promise<LessonProgress>;\n  updateLessonProgress(id: number, data: Partial<InsertLessonProgress>): Promise<LessonProgress | undefined>;\n  \n  // Dashboard and reporting operations\n  getClassesWithStudentCount(teacherId: string): Promise<ClassWithStudentCount[]>;\n  getStudentProgress(teacherId: string): Promise<StudentProgress[]>;\n  getTaskCompletionRate(teacherId: string): Promise<number>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  \n  // User operations (for Replit Auth)\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .onConflictDoUpdate({\n        target: users.id,\n        set: {\n          ...userData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return user;\n  }\n\n  // Class operations\n  async getClasses(): Promise<Class[]> {\n    return await db.select().from(classes);\n  }\n  \n  async getClass(id: number): Promise<Class | undefined> {\n    const [cls] = await db.select().from(classes).where(eq(classes.id, id));\n    return cls;\n  }\n  \n  async getClassesByTeacher(teacherId: string): Promise<Class[]> {\n    return await db.select().from(classes).where(eq(classes.teacherId, teacherId));\n  }\n  \n  async createClass(classData: InsertClass): Promise<Class> {\n    const [newClass] = await db.insert(classes).values(classData).returning();\n    return newClass;\n  }\n  \n  async updateClass(id: number, classData: Partial<InsertClass>): Promise<Class | undefined> {\n    const [updatedClass] = await db\n      .update(classes)\n      .set(classData)\n      .where(eq(classes.id, id))\n      .returning();\n    return updatedClass;\n  }\n  \n  async deleteClass(id: number): Promise<boolean> {\n    const result = await db.delete(classes).where(eq(classes.id, id));\n    return result.rowCount > 0;\n  }\n\n  // Student operations\n  async getStudents(): Promise<Student[]> {\n    return await db.select().from(students);\n  }\n  \n  async getStudent(id: number): Promise<Student | undefined> {\n    const [student] = await db.select().from(students).where(eq(students.id, id));\n    return student;\n  }\n  \n  async getStudentsByParent(parentId: string): Promise<Student[]> {\n    return await db.select().from(students).where(eq(students.parentId, parentId));\n  }\n  \n  async createStudent(studentData: InsertStudent): Promise<Student> {\n    const [student] = await db.insert(students).values(studentData).returning();\n    return student;\n  }\n  \n  async updateStudent(id: number, studentData: Partial<InsertStudent>): Promise<Student | undefined> {\n    const [updatedStudent] = await db\n      .update(students)\n      .set(studentData)\n      .where(eq(students.id, id))\n      .returning();\n    return updatedStudent;\n  }\n  \n  async deleteStudent(id: number): Promise<boolean> {\n    const result = await db.delete(students).where(eq(students.id, id));\n    return result.rowCount > 0;\n  }\n\n  // Assignment operations\n  async getAssignments(): Promise<Assignment[]> {\n    return await db.select().from(assignments);\n  }\n  \n  async getAssignment(id: number): Promise<Assignment | undefined> {\n    const [assignment] = await db.select().from(assignments).where(eq(assignments.id, id));\n    return assignment;\n  }\n  \n  async getAssignmentsByClass(classId: number): Promise<Assignment[]> {\n    return await db.select().from(assignments).where(eq(assignments.classId, classId));\n  }\n  \n  async createAssignment(assignmentData: InsertAssignment): Promise<Assignment> {\n    const [assignment] = await db.insert(assignments).values(assignmentData).returning();\n    return assignment;\n  }\n  \n  async updateAssignment(id: number, assignmentData: Partial<InsertAssignment>): Promise<Assignment | undefined> {\n    const [updatedAssignment] = await db\n      .update(assignments)\n      .set(assignmentData)\n      .where(eq(assignments.id, id))\n      .returning();\n    return updatedAssignment;\n  }\n  \n  async deleteAssignment(id: number): Promise<boolean> {\n    const result = await db.delete(assignments).where(eq(assignments.id, id));\n    return result.rowCount > 0;\n  }\n\n  // Task operations\n  async getTasks(): Promise<Task[]> {\n    return await db.select().from(tasks);\n  }\n  \n  async getTask(id: number): Promise<Task | undefined> {\n    const [task] = await db.select().from(tasks).where(eq(tasks.id, id));\n    return task;\n  }\n  \n  async getTasksByStudent(studentId: number): Promise<TaskWithAssignment[]> {\n    const result = await db\n      .select({\n        id: tasks.id,\n        assignmentId: tasks.assignmentId,\n        studentId: tasks.studentId,\n        completed: tasks.completed,\n        completedAt: tasks.completedAt,\n        assignment: assignments,\n        class: classes,\n      })\n      .from(tasks)\n      .innerJoin(assignments, eq(tasks.assignmentId, assignments.id))\n      .innerJoin(classes, eq(assignments.classId, classes.id))\n      .where(eq(tasks.studentId, studentId));\n    \n    return result as TaskWithAssignment[];\n  }\n  \n  async getTasksByAssignment(assignmentId: number): Promise<Task[]> {\n    return await db.select().from(tasks).where(eq(tasks.assignmentId, assignmentId));\n  }\n  \n  async createTask(taskData: InsertTask): Promise<Task> {\n    const [task] = await db.insert(tasks).values(taskData).returning();\n    return task;\n  }\n  \n  async updateTask(id: number, taskData: Partial<InsertTask>): Promise<Task | undefined> {\n    const [updatedTask] = await db\n      .update(tasks)\n      .set(taskData)\n      .where(eq(tasks.id, id))\n      .returning();\n    return updatedTask;\n  }\n  \n  async deleteTask(id: number): Promise<boolean> {\n    const result = await db.delete(tasks).where(eq(tasks.id, id));\n    return result.rowCount > 0;\n  }\n\n  // Curriculum operations\n  async getCurriculums(): Promise<Curriculum[]> {\n    return await db.select().from(curriculums);\n  }\n  \n  async getCurriculum(id: number): Promise<Curriculum | undefined> {\n    const [curriculum] = await db.select().from(curriculums).where(eq(curriculums.id, id));\n    return curriculum;\n  }\n  \n  async getCurriculumsByParent(parentId: string): Promise<Curriculum[]> {\n    return await db.select().from(curriculums).where(eq(curriculums.parentId, parentId));\n  }\n  \n  async createCurriculum(curriculumData: InsertCurriculum): Promise<Curriculum> {\n    const [curriculum] = await db.insert(curriculums).values(curriculumData).returning();\n    return curriculum;\n  }\n  \n  async updateCurriculum(id: number, curriculumData: Partial<InsertCurriculum>): Promise<Curriculum | undefined> {\n    const [updatedCurriculum] = await db\n      .update(curriculums)\n      .set(curriculumData)\n      .where(eq(curriculums.id, id))\n      .returning();\n    return updatedCurriculum;\n  }\n  \n  async deleteCurriculum(id: number): Promise<boolean> {\n    const result = await db.delete(curriculums).where(eq(curriculums.id, id));\n    return result.rowCount > 0;\n  }\n\n  // Curriculum lessons\n  async getCurriculumLessons(curriculumId: number): Promise<CurriculumLesson[]> {\n    return await db.select().from(curriculumLessons).where(eq(curriculumLessons.curriculumId, curriculumId));\n  }\n  \n  async createCurriculumLesson(lessonData: InsertCurriculumLesson): Promise<CurriculumLesson> {\n    const [lesson] = await db.insert(curriculumLessons).values(lessonData).returning();\n    return lesson;\n  }\n  \n  async updateCurriculumLesson(id: number, lessonData: Partial<InsertCurriculumLesson>): Promise<CurriculumLesson | undefined> {\n    const [updatedLesson] = await db\n      .update(curriculumLessons)\n      .set(lessonData)\n      .where(eq(curriculumLessons.id, id))\n      .returning();\n    return updatedLesson;\n  }\n\n  // Student curriculum assignments\n  async getStudentCurriculums(studentId: number): Promise<StudentCurriculum[]> {\n    return await db.select().from(studentCurriculums).where(eq(studentCurriculums.studentId, studentId));\n  }\n  \n  async createStudentCurriculum(data: InsertStudentCurriculum): Promise<StudentCurriculum> {\n    const [studentCurriculum] = await db.insert(studentCurriculums).values(data).returning();\n    return studentCurriculum;\n  }\n  \n  async updateStudentCurriculum(id: number, data: Partial<InsertStudentCurriculum>): Promise<StudentCurriculum | undefined> {\n    const [updated] = await db\n      .update(studentCurriculums)\n      .set(data)\n      .where(eq(studentCurriculums.id, id))\n      .returning();\n    return updated;\n  }\n\n  // Lesson progress tracking\n  async getLessonProgress(studentId: number, curriculumId: number): Promise<LessonProgress[]> {\n    return await db\n      .select()\n      .from(lessonProgress)\n      .where(and(\n        eq(lessonProgress.studentId, studentId),\n        eq(lessonProgress.curriculumId, curriculumId)\n      ));\n  }\n  \n  async createLessonProgress(progressData: InsertLessonProgress): Promise<LessonProgress> {\n    const [progress] = await db.insert(lessonProgress).values(progressData).returning();\n    return progress;\n  }\n  \n  async updateLessonProgress(id: number, data: Partial<InsertLessonProgress>): Promise<LessonProgress | undefined> {\n    const [updated] = await db\n      .update(lessonProgress)\n      .set(data)\n      .where(eq(lessonProgress.id, id))\n      .returning();\n    return updated;\n  }\n\n  // Dashboard and reporting operations\n  async getClassesWithStudentCount(teacherId: string): Promise<ClassWithStudentCount[]> {\n    // This would require more complex SQL with joins and counts\n    const teacherClasses = await this.getClassesByTeacher(teacherId);\n    return teacherClasses.map(cls => ({\n      ...cls,\n      studentCount: 0 // TODO: implement proper count\n    }));\n  }\n  \n  async getStudentProgress(teacherId: string): Promise<StudentProgress[]> {\n    // This would require complex SQL with joins across multiple tables\n    return [];\n  }\n  \n  async getTaskCompletionRate(teacherId: string): Promise<number> {\n    // This would require SQL aggregation\n    return 0;\n  }\n\n  // Planner task operations (simplified)\n  async getAllTasks(): Promise<PlannerTask[]> {\n    return await db.select().from(plannerTasks);\n  }\n\n  async getPlannerTask(id: string): Promise<PlannerTask | undefined> {\n    const [task] = await db.select().from(plannerTasks).where(eq(plannerTasks.id, id));\n    return task;\n  }\n\n  async createPlannerTask(taskData: InsertPlannerTask): Promise<PlannerTask> {\n    const taskWithId = {\n      ...taskData,\n      id: Date.now().toString(),\n    };\n    const [task] = await db.insert(plannerTasks).values(taskWithId).returning();\n    return task;\n  }\n\n  async updatePlannerTask(id: string, taskData: Partial<InsertPlannerTask>): Promise<PlannerTask | undefined> {\n    const [updatedTask] = await db\n      .update(plannerTasks)\n      .set(taskData)\n      .where(eq(plannerTasks.id, id))\n      .returning();\n    return updatedTask;\n  }\n\n  async deletePlannerTask(id: string): Promise<boolean> {\n    const [deletedTask] = await db\n      .delete(plannerTasks)\n      .where(eq(plannerTasks.id, id))\n      .returning();\n    return !!deletedTask;\n  }\n}\n\nexport const storage = new DatabaseStorage();","size_bytes":15352},"server/storage.ts":{"content":"import {\n  users, classes, students, assignments, tasks,\n  type User, type InsertUser,\n  type Class, type InsertClass,\n  type Student, type InsertStudent,\n  type Assignment, type InsertAssignment, \n  type Task, type InsertTask,\n  type StudentWithUser, type TaskWithAssignment,\n  type ClassWithStudentCount, type StudentProgress\n} from \"@shared/schema\";\n\nexport interface IStorage {\n  // User operations (for family accounts)\n  getUsers(): Promise<User[]>;\n  getUser(id: number): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  updateUserLastLogin(id: number): Promise<void>;\n  \n  // Class operations\n  getClasses(): Promise<Class[]>;\n  getClass(id: number): Promise<Class | undefined>;\n  getClassesByTeacher(teacherId: number): Promise<Class[]>;\n  createClass(classData: InsertClass): Promise<Class>;\n  updateClass(id: number, classData: Partial<InsertClass>): Promise<Class | undefined>;\n  deleteClass(id: number): Promise<boolean>;\n  \n  // Student operations\n  getStudents(): Promise<Student[]>;\n  getStudent(id: number): Promise<Student | undefined>;\n  getStudentsByClass(classId: number): Promise<StudentWithUser[]>;\n  createStudent(student: InsertStudent): Promise<Student>;\n  updateStudent(id: number, studentData: Partial<InsertStudent>): Promise<Student | undefined>;\n  deleteStudent(id: number): Promise<boolean>;\n  getStudentsWithUserData(): Promise<StudentWithUser[]>;\n  \n  // Assignment operations\n  getAssignments(): Promise<Assignment[]>;\n  getAssignment(id: number): Promise<Assignment | undefined>;\n  getAssignmentsByClass(classId: number): Promise<Assignment[]>;\n  createAssignment(assignment: InsertAssignment): Promise<Assignment>;\n  updateAssignment(id: number, assignmentData: Partial<InsertAssignment>): Promise<Assignment | undefined>;\n  deleteAssignment(id: number): Promise<boolean>;\n  \n  // Task operations\n  getTasks(): Promise<Task[]>;\n  getTask(id: number): Promise<Task | undefined>;\n  getTasksByStudent(studentId: number): Promise<TaskWithAssignment[]>;\n  getTasksByAssignment(assignmentId: number): Promise<Task[]>;\n  createTask(task: InsertTask): Promise<Task>;\n  updateTask(id: number, taskData: Partial<InsertTask>): Promise<Task | undefined>;\n  deleteTask(id: number): Promise<boolean>;\n  \n  // Dashboard and reporting operations\n  getClassesWithStudentCount(teacherId: number): Promise<ClassWithStudentCount[]>;\n  getStudentProgress(teacherId: number): Promise<StudentProgress[]>;\n  getTaskCompletionRate(teacherId: number): Promise<number>;\n}\n\nimport { db } from \"./db\";\nimport { eq, and } from \"drizzle-orm\";\n\nexport class DatabaseStorage implements IStorage {\n  \n  constructor() {\n    this.users = new Map();\n    this.classes = new Map();\n    this.students = new Map();\n    this.assignments = new Map();\n    this.tasks = new Map();\n    \n    this.userId = 1;\n    this.classId = 1;\n    this.studentId = 1;\n    this.assignmentId = 1;\n    this.taskId = 1;\n    \n    // Initialize with default teacher\n    this.createUser({\n      username: \"teacher\",\n      password: \"password\",\n      role: \"teacher\",\n      fullName: \"Ms. Johnson\"\n    });\n  }\n  \n  // User operations\n  async getUsers(): Promise<User[]> {\n    return [...this.users.values()];\n  }\n  \n  async getUser(id: number): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n  \n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return [...this.users.values()].find(user => user.username === username);\n  }\n  \n  async createUser(userData: InsertUser): Promise<User> {\n    const id = this.userId++;\n    const user = { ...userData, id };\n    this.users.set(id, user);\n    return user;\n  }\n  \n  // Class operations\n  async getClasses(): Promise<Class[]> {\n    return [...this.classes.values()];\n  }\n  \n  async getClass(id: number): Promise<Class | undefined> {\n    return this.classes.get(id);\n  }\n  \n  async getClassesByTeacher(teacherId: number): Promise<Class[]> {\n    return [...this.classes.values()].filter(cls => cls.teacherId === teacherId);\n  }\n  \n  async createClass(classData: InsertClass): Promise<Class> {\n    const id = this.classId++;\n    const newClass = { ...classData, id };\n    this.classes.set(id, newClass);\n    return newClass;\n  }\n  \n  async updateClass(id: number, classData: Partial<InsertClass>): Promise<Class | undefined> {\n    const existingClass = this.classes.get(id);\n    if (!existingClass) return undefined;\n    \n    const updatedClass = { ...existingClass, ...classData };\n    this.classes.set(id, updatedClass);\n    return updatedClass;\n  }\n  \n  async deleteClass(id: number): Promise<boolean> {\n    return this.classes.delete(id);\n  }\n  \n  // Student operations\n  async getStudents(): Promise<Student[]> {\n    return [...this.students.values()];\n  }\n  \n  async getStudent(id: number): Promise<Student | undefined> {\n    return this.students.get(id);\n  }\n  \n  async getStudentsByClass(classId: number): Promise<StudentWithUser[]> {\n    const studentsWithUser: StudentWithUser[] = [];\n    \n    for (const student of this.students.values()) {\n      if (student.classIds.includes(classId.toString())) {\n        const user = this.users.get(student.userId);\n        if (user) {\n          studentsWithUser.push({ ...student, user });\n        }\n      }\n    }\n    \n    return studentsWithUser;\n  }\n  \n  async createStudent(studentData: InsertStudent): Promise<Student> {\n    const id = this.studentId++;\n    const student = { ...studentData, id };\n    this.students.set(id, student);\n    return student;\n  }\n  \n  async updateStudent(id: number, studentData: Partial<InsertStudent>): Promise<Student | undefined> {\n    const existingStudent = this.students.get(id);\n    if (!existingStudent) return undefined;\n    \n    const updatedStudent = { ...existingStudent, ...studentData };\n    this.students.set(id, updatedStudent);\n    return updatedStudent;\n  }\n  \n  async deleteStudent(id: number): Promise<boolean> {\n    return this.students.delete(id);\n  }\n  \n  async getStudentsWithUserData(): Promise<StudentWithUser[]> {\n    const studentsWithUser: StudentWithUser[] = [];\n    \n    for (const student of this.students.values()) {\n      const user = this.users.get(student.userId);\n      if (user) {\n        studentsWithUser.push({ ...student, user });\n      }\n    }\n    \n    return studentsWithUser;\n  }\n  \n  // Assignment operations\n  async getAssignments(): Promise<Assignment[]> {\n    return [...this.assignments.values()];\n  }\n  \n  async getAssignment(id: number): Promise<Assignment | undefined> {\n    return this.assignments.get(id);\n  }\n  \n  async getAssignmentsByClass(classId: number): Promise<Assignment[]> {\n    return [...this.assignments.values()].filter(assignment => assignment.classId === classId);\n  }\n  \n  async createAssignment(assignmentData: InsertAssignment): Promise<Assignment> {\n    const id = this.assignmentId++;\n    const assignment = { ...assignmentData, id };\n    this.assignments.set(id, assignment);\n    \n    // Create tasks for all students in the class\n    const studentsInClass = await this.getStudentsByClass(assignmentData.classId);\n    for (const student of studentsInClass) {\n      await this.createTask({\n        assignmentId: id,\n        studentId: student.id,\n        completed: false,\n        completedAt: null\n      });\n    }\n    \n    return assignment;\n  }\n  \n  async updateAssignment(id: number, assignmentData: Partial<InsertAssignment>): Promise<Assignment | undefined> {\n    const existingAssignment = this.assignments.get(id);\n    if (!existingAssignment) return undefined;\n    \n    const updatedAssignment = { ...existingAssignment, ...assignmentData };\n    this.assignments.set(id, updatedAssignment);\n    return updatedAssignment;\n  }\n  \n  async deleteAssignment(id: number): Promise<boolean> {\n    // Delete associated tasks\n    for (const task of this.tasks.values()) {\n      if (task.assignmentId === id) {\n        this.tasks.delete(task.id);\n      }\n    }\n    \n    return this.assignments.delete(id);\n  }\n  \n  // Task operations\n  async getTasks(): Promise<Task[]> {\n    return [...this.tasks.values()];\n  }\n  \n  async getTask(id: number): Promise<Task | undefined> {\n    return this.tasks.get(id);\n  }\n  \n  async getTasksByStudent(studentId: number): Promise<TaskWithAssignment[]> {\n    const tasksWithAssignment: TaskWithAssignment[] = [];\n    \n    for (const task of this.tasks.values()) {\n      if (task.studentId === studentId) {\n        const assignment = this.assignments.get(task.assignmentId);\n        if (assignment) {\n          const cls = this.classes.get(assignment.classId);\n          if (cls) {\n            tasksWithAssignment.push({\n              ...task,\n              assignment,\n              class: cls\n            });\n          }\n        }\n      }\n    }\n    \n    return tasksWithAssignment;\n  }\n  \n  async getTasksByAssignment(assignmentId: number): Promise<Task[]> {\n    return [...this.tasks.values()].filter(task => task.assignmentId === assignmentId);\n  }\n  \n  async createTask(taskData: InsertTask): Promise<Task> {\n    const id = this.taskId++;\n    const task = { ...taskData, id };\n    this.tasks.set(id, task);\n    return task;\n  }\n  \n  async updateTask(id: number, taskData: Partial<InsertTask>): Promise<Task | undefined> {\n    const existingTask = this.tasks.get(id);\n    if (!existingTask) return undefined;\n    \n    const updatedTask = { ...existingTask, ...taskData };\n    this.tasks.set(id, updatedTask);\n    return updatedTask;\n  }\n  \n  async deleteTask(id: number): Promise<boolean> {\n    return this.tasks.delete(id);\n  }\n  \n  // Dashboard and reporting operations\n  async getClassesWithStudentCount(teacherId: number): Promise<ClassWithStudentCount[]> {\n    const classesWithCount: ClassWithStudentCount[] = [];\n    const teacherClasses = await this.getClassesByTeacher(teacherId);\n    \n    for (const cls of teacherClasses) {\n      const students = await this.getStudentsByClass(cls.id);\n      classesWithCount.push({\n        ...cls,\n        studentCount: students.length\n      });\n    }\n    \n    return classesWithCount;\n  }\n  \n  async getStudentProgress(teacherId: number): Promise<StudentProgress[]> {\n    const progress: StudentProgress[] = [];\n    const teacherClasses = await this.getClassesByTeacher(teacherId);\n    \n    for (const cls of teacherClasses) {\n      const students = await this.getStudentsByClass(cls.id);\n      \n      for (const student of students) {\n        const tasks = await this.getTasksByStudent(student.id);\n        const completedTasks = tasks.filter(task => task.completed).length;\n        const pendingTasks = tasks.length - completedTasks;\n        const progressPercentage = tasks.length > 0 ? (completedTasks / tasks.length) * 100 : 0;\n        \n        progress.push({\n          studentId: student.id,\n          fullName: student.user.fullName,\n          className: cls.name,\n          completedTasks,\n          pendingTasks,\n          progressPercentage\n        });\n      }\n    }\n    \n    return progress;\n  }\n  \n  async getTaskCompletionRate(teacherId: number): Promise<number> {\n    const teacherClasses = await this.getClassesByTeacher(teacherId);\n    let totalTasks = 0;\n    let completedTasks = 0;\n    \n    for (const cls of teacherClasses) {\n      const assignments = await this.getAssignmentsByClass(cls.id);\n      \n      for (const assignment of assignments) {\n        const tasks = await this.getTasksByAssignment(assignment.id);\n        totalTasks += tasks.length;\n        completedTasks += tasks.filter(task => task.completed).length;\n      }\n    }\n    \n    return totalTasks > 0 ? (completedTasks / totalTasks) * 100 : 0;\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":11659},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2254},"shared/schema.ts":{"content":"import {\n  pgTable,\n  text,\n  varchar,\n  timestamp,\n  jsonb,\n  index,\n  serial,\n  integer,\n  boolean,\n} from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Session storage table for Replit Auth\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// User storage table for Replit Auth\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().notNull(),\n  email: varchar(\"email\").unique(),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  role: text(\"role\").notNull().default(\"parent\"), // \"parent\" or \"student\"\n  familyName: text(\"family_name\"), // e.g., \"The Johnson Family\"\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const classes = pgTable(\"classes\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  teacherId: text(\"teacher_id\").notNull(), // references users.id\n  gradeLevel: text(\"grade_level\"),\n  description: text(\"description\"),\n});\n\nexport const students = pgTable(\"students\", {\n  id: serial(\"id\").primaryKey(),\n  parentId: text(\"parent_id\").notNull(), // references users.id (parent)\n  fullName: text(\"full_name\").notNull(),\n  gradeLevel: text(\"grade_level\").notNull(), // \"2nd Grade\", \"5th Grade\", etc.\n  level: integer(\"level\").default(1), // gamification level\n  xp: integer(\"xp\").default(0), // experience points\n  totalXp: integer(\"total_xp\").default(500), // XP needed for next level\n  pin: text(\"pin\"), // 4-digit PIN for student login\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const assignments = pgTable(\"assignments\", {\n  id: serial(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  description: text(\"description\"),\n  classId: integer(\"class_id\").notNull(),\n  dueDate: timestamp(\"due_date\").notNull(),\n  priority: text(\"priority\").notNull().default(\"medium\"), // \"low\", \"medium\", \"high\"\n  createdBy: text(\"created_by\").notNull(), // teacher's userId - references users.id\n});\n\n// Curriculum tables for lesson management\nexport const curriculums = pgTable(\"curriculums\", {\n  id: serial(\"id\").primaryKey(),\n  parentId: text(\"parent_id\").notNull(), // who uploaded this curriculum - references users.id\n  name: text(\"name\").notNull(), // \"Saxon Math 7/6\", \"Teaching Textbooks Algebra 1\"\n  subject: text(\"subject\").notNull(), // \"Math\", \"Science\", \"History\", etc.\n  publisher: text(\"publisher\"), // \"Saxon\", \"Teaching Textbooks\", etc.\n  gradeLevel: text(\"grade_level\"), // \"7th Grade\", \"High School\"\n  description: text(\"description\"),\n  totalLessons: integer(\"total_lessons\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const curriculumLessons = pgTable(\"curriculum_lessons\", {\n  id: serial(\"id\").primaryKey(),\n  curriculumId: integer(\"curriculum_id\").notNull(),\n  lessonNumber: integer(\"lesson_number\").notNull(), // 1, 2, 3, etc.\n  title: text(\"title\").notNull(), // \"Adding Fractions\", \"Quiz 5\", etc.\n  type: text(\"type\").notNull().default(\"lesson\"), // \"lesson\", \"quiz\", \"test\", \"review\"\n  description: text(\"description\"),\n  estimatedMinutes: integer(\"estimated_minutes\").default(30),\n  prerequisites: text(\"prerequisites\"), // JSON array of lesson IDs that must be completed first\n});\n\nexport const studentCurriculums = pgTable(\"student_curriculums\", {\n  id: serial(\"id\").primaryKey(),\n  studentId: integer(\"student_id\").notNull(),\n  curriculumId: integer(\"curriculum_id\").notNull(),\n  lessonsPerDay: integer(\"lessons_per_day\").notNull().default(1),\n  startDate: timestamp(\"start_date\").defaultNow(),\n  isActive: boolean(\"is_active\").default(true),\n  currentLesson: integer(\"current_lesson\").default(1),\n});\n\nexport const lessonProgress = pgTable(\"lesson_progress\", {\n  id: serial(\"id\").primaryKey(),\n  studentId: integer(\"student_id\").notNull(),\n  curriculumId: integer(\"curriculum_id\").notNull(),\n  lessonId: integer(\"lesson_id\").notNull(),\n  status: text(\"status\").notNull().default(\"not_started\"), // \"not_started\", \"in_progress\", \"completed\", \"skipped\"\n  completedAt: timestamp(\"completed_at\"),\n  timeSpent: integer(\"time_spent_minutes\").default(0),\n  notes: text(\"notes\"), // for parent/student notes\n  score: integer(\"score\"), // for quizzes/tests (0-100)\n});\n\nexport const tasks = pgTable(\"tasks\", {\n  id: serial(\"id\").primaryKey(),\n  assignmentId: integer(\"assignment_id\"),\n  studentId: integer(\"student_id\"),\n  title: text(\"title\").notNull(),\n  subject: text(\"subject\").notNull(),\n  dueDate: timestamp(\"due_date\").notNull(),\n  completed: boolean(\"completed\").notNull().default(false),\n  completedAt: timestamp(\"completed_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Planner tasks for the weekly planner interface\nexport const plannerTasks = pgTable(\"planner_tasks\", {\n  id: text(\"id\").primaryKey(), // uuid or timestamp-based ID\n  title: text(\"title\").notNull(),\n  subject: text(\"subject\").notNull(),\n  description: text(\"description\"),\n  day: text(\"day\").notNull(), // \"monday\", \"tuesday\", etc.\n  studentIndex: integer(\"student_index\").notNull(), // 0, 1, 2, etc.\n  weekKey: text(\"week_key\").notNull(), // \"2025-01-20\" (start of week)\n  completed: boolean(\"completed\").notNull().default(false),\n  studentId: integer(\"student_id\"), // references students.id\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Insert schemas\nexport const insertUserSchema = createInsertSchema(users).pick({\n  id: true,\n  email: true,\n  firstName: true,\n  lastName: true,\n  profileImageUrl: true,\n  role: true,\n  familyName: true,\n});\n\nexport const upsertUserSchema = createInsertSchema(users).pick({\n  id: true,\n  email: true,\n  firstName: true,\n  lastName: true,\n  profileImageUrl: true,\n});\n\nexport const insertStudentSchema = createInsertSchema(students).pick({\n  parentId: true,\n  fullName: true,\n  gradeLevel: true,\n  level: true,\n  xp: true,\n  totalXp: true,\n  pin: true,\n});\n\nexport const insertClassSchema = createInsertSchema(classes).pick({\n  name: true,\n  teacherId: true,\n  gradeLevel: true,\n  description: true,\n});\n\nexport const insertAssignmentSchema = createInsertSchema(assignments).pick({\n  title: true,\n  description: true,\n  classId: true,\n  dueDate: true,\n  priority: true,\n  createdBy: true,\n});\n\nexport const insertTaskSchema = createInsertSchema(tasks).pick({\n  assignmentId: true,\n  studentId: true,\n  title: true,\n  subject: true,\n  dueDate: true,\n  completed: true,\n  completedAt: true,\n});\n\n// Planner task schema for weekly planner interface\nexport const insertPlannerTaskSchema = createInsertSchema(plannerTasks).pick({\n  title: true,\n  subject: true,\n  description: true,\n  day: true,\n  studentIndex: true,\n  weekKey: true,\n  completed: true,\n  studentId: true,\n});\n\n// New curriculum schemas\nexport const insertCurriculumSchema = createInsertSchema(curriculums).pick({\n  parentId: true,\n  name: true,\n  subject: true,\n  publisher: true,\n  gradeLevel: true,\n  description: true,\n  totalLessons: true,\n});\n\nexport const insertCurriculumLessonSchema = createInsertSchema(curriculumLessons).pick({\n  curriculumId: true,\n  lessonNumber: true,\n  title: true,\n  type: true,\n  description: true,\n  estimatedMinutes: true,\n  prerequisites: true,\n});\n\nexport const insertStudentCurriculumSchema = createInsertSchema(studentCurriculums).pick({\n  studentId: true,\n  curriculumId: true,\n  lessonsPerDay: true,\n  startDate: true,\n  isActive: true,\n  currentLesson: true,\n});\n\nexport const insertLessonProgressSchema = createInsertSchema(lessonProgress).pick({\n  studentId: true,\n  curriculumId: true,\n  lessonId: true,\n  status: true,\n  completedAt: true,\n  timeSpent: true,\n  notes: true,\n  score: true,\n});\n\n// Types\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type UpsertUser = z.infer<typeof upsertUserSchema>;\n\nexport type Class = typeof classes.$inferSelect;\nexport type InsertClass = z.infer<typeof insertClassSchema>;\n\nexport type Student = typeof students.$inferSelect;\nexport type InsertStudent = z.infer<typeof insertStudentSchema>;\n\nexport type Assignment = typeof assignments.$inferSelect;\nexport type InsertAssignment = z.infer<typeof insertAssignmentSchema>;\n\nexport type Task = typeof tasks.$inferSelect;\nexport type InsertTask = z.infer<typeof insertTaskSchema>;\n\nexport type PlannerTask = typeof plannerTasks.$inferSelect;\nexport type InsertPlannerTask = z.infer<typeof insertPlannerTaskSchema>;\n\n// Curriculum types\nexport type Curriculum = typeof curriculums.$inferSelect;\nexport type InsertCurriculum = z.infer<typeof insertCurriculumSchema>;\n\nexport type CurriculumLesson = typeof curriculumLessons.$inferSelect;\nexport type InsertCurriculumLesson = z.infer<typeof insertCurriculumLessonSchema>;\n\nexport type StudentCurriculum = typeof studentCurriculums.$inferSelect;\nexport type InsertStudentCurriculum = z.infer<typeof insertStudentCurriculumSchema>;\n\nexport type LessonProgress = typeof lessonProgress.$inferSelect;\nexport type InsertLessonProgress = z.infer<typeof insertLessonProgressSchema>;\n\n// Extended types for frontend\nexport type StudentWithUser = Student & {\n  user: User;\n};\n\nexport type TaskWithAssignment = Task & {\n  assignment: Assignment;\n  class: Class;\n};\n\nexport type ClassWithStudentCount = Class & {\n  studentCount: number;\n};\n\nexport type StudentProgress = {\n  studentId: number;\n  fullName: string;\n  className: string;\n  completedTasks: number;\n  pendingTasks: number;\n  progressPercentage: number;\n};\n\nexport type CurriculumWithProgress = Curriculum & {\n  lessonsCompleted: number;\n  totalLessons: number;\n  currentLessonTitle: string;\n  nextLessons: CurriculumLesson[];\n};\n\nexport type StudentDailyLessons = {\n  studentId: number;\n  studentName: string;\n  curriculums: Array<{\n    id: number;\n    name: string;\n    subject: string;\n    todaysLessons: CurriculumLesson[];\n    lessonsPerDay: number;\n    progress: number;\n  }>;\n};\n","size_bytes":10098},"client/public/sw.js":{"content":"const CACHE_NAME = 'pebble-track-v1';\nconst urlsToCache = [\n  '/',\n  '/manifest.json',\n  '/planner',\n  '/students',\n  '/settings'\n];\n\nself.addEventListener('install', (event) => {\n  event.waitUntil(\n    caches.open(CACHE_NAME)\n      .then((cache) => cache.addAll(urlsToCache))\n  );\n});\n\nself.addEventListener('fetch', (event) => {\n  event.respondWith(\n    caches.match(event.request)\n      .then((response) => {\n        if (response) {\n          return response;\n        }\n        return fetch(event.request);\n      }\n    )\n  );\n});\n\nself.addEventListener('activate', (event) => {\n  event.waitUntil(\n    caches.keys().then((cacheNames) => {\n      return Promise.all(\n        cacheNames.map((cacheName) => {\n          if (cacheName !== CACHE_NAME) {\n            return caches.delete(cacheName);\n          }\n        })\n      );\n    })\n  );\n});","size_bytes":841},"client/src/App.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { Switch, Route, useLocation } from \"wouter\";\nimport { QueryClientProvider, useQuery } from \"@tanstack/react-query\";\nimport { queryClient, getQueryFn } from \"./lib/queryClient\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport MobileNav from \"@/components/MobileNav\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useErrorSuppression } from \"@/hooks/useErrorSuppression\";\n\n\n// Pages\nimport Layout from \"@/components/Layout\";\nimport NotFound from \"@/pages/not-found\";\nimport TeacherDashboard from \"@/pages/TeacherDashboardNew\";\nimport StudentDashboard from \"@/pages/StudentDashboardNew\";\nimport Students from \"@/pages/Students\";\nimport Classes from \"@/pages/Classes\";\nimport Assignments from \"@/pages/Assignments\";\nimport Reports from \"@/pages/Reports\";\nimport Planner from \"@/pages/Planner\";\nimport StudentTasks from \"@/pages/StudentTasks\";\nimport Settings from \"@/pages/Settings\";\nimport Home from \"@/pages/Home\";\nimport Landing from \"@/pages/Landing\";\nimport Curriculum from \"@/pages/Curriculum\";\n\n// Family-based user interface\ninterface User {\n  id: string;\n  email: string;\n  role: \"parent\" | \"student\";\n  fullName: string;\n  familyName?: string;\n}\n\nfunction Router() {\n  const { user, isLoading, isAuthenticated } = useAuth();\n  const [location, setLocation] = useLocation();\n  \n  // Suppress runtime error plugin conflicts\n  useErrorSuppression();\n\n  // Make user available globally for debugging\n  (window as any).currentUser = user;\n  \n  // Redirect to the appropriate dashboard based on user role\n  useEffect(() => {\n    if (!isLoading && isAuthenticated && user) {\n      // Set default role to parent if not set\n      const userRole = user.role || \"parent\";\n      \n      if (location === \"/\" && userRole === \"parent\") {\n        setLocation(\"/teacher/dashboard\");\n      } else if (location === \"/\" && userRole === \"student\") {\n        setLocation(\"/student\");\n      }\n    }\n  }, [user, isLoading, isAuthenticated, location, setLocation]);\n\n  // Show login page if not authenticated\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-[#9CA3AF] via-[#A7B8A8] to-[#7FB3C4] flex items-center justify-center\">\n        <div className=\"text-xl font-bold text-[#4B5563]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n          Loading Pebble Track...\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return <Landing />;\n  }\n\n  // Temporary: If there's an authentication issue, show a simple page without complex components\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\n        <div className=\"bg-white p-8 rounded-lg shadow-md\">\n          <h1 className=\"text-2xl font-bold mb-4\">Welcome to Homeschool Planner</h1>\n          <p className=\"text-gray-600 mb-4\">Please sign in to continue.</p>\n          <a \n            href=\"/api/login\" \n            className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\n          >\n            Sign In\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Switch>\n      {/* Authenticated routes */}\n      <Route path=\"/\">\n        <Layout>\n          {user.role === \"parent\" ? <TeacherDashboard /> : <StudentDashboard />}\n        </Layout>\n      </Route>\n      <Route path=\"/teacher/dashboard\">\n        <Layout>\n          <TeacherDashboard />\n        </Layout>\n      </Route>\n      <Route path=\"/students\">\n        <Layout>\n          <Students />\n        </Layout>\n      </Route>\n      <Route path=\"/classes\">\n        <Layout>\n          <Classes />\n        </Layout>\n      </Route>\n      <Route path=\"/assignments\">\n        <Layout>\n          <Assignments />\n        </Layout>\n      </Route>\n      <Route path=\"/planner\">\n        <Layout>\n          <Planner />\n        </Layout>\n      </Route>\n      <Route path=\"/reports\">\n        <Layout>\n          <Reports />\n        </Layout>\n      </Route>\n      <Route path=\"/curriculum\">\n        <Layout>\n          <Curriculum />\n        </Layout>\n      </Route>\n      <Route path=\"/student\">\n        <Layout>\n          <StudentDashboard />\n        </Layout>\n      </Route>\n      <Route path=\"/student/tasks\">\n        <Layout>\n          <StudentTasks />\n        </Layout>\n      </Route>\n      <Route path=\"/settings\">\n        <Layout>\n          <Settings />\n        </Layout>\n      </Route>\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <MobileNav />\n        <Router />\n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;","size_bytes":4749},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* Mobile and Touch Optimizations */\nhtml {\n  touch-action: manipulation;\n  -webkit-text-size-adjust: 100%;\n}\n\nbody {\n  overscroll-behavior: none;\n  -webkit-overflow-scrolling: touch;\n}\n\n/* Touch-friendly buttons */\nbutton, a[role=\"button\"] {\n  min-height: 44px;\n  touch-action: manipulation;\n}\n\n/* Mobile navigation spacing */\n@media (max-width: 768px) {\n  .mobile-header-spacing {\n    padding-top: 64px;\n  }\n  \n  .mobile-bottom-spacing {\n    padding-bottom: 80px;\n  }\n}\n\n/* Print Styles for Teacher Planner */\n@media print {\n  * {\n    -webkit-print-color-adjust: exact !important;\n    color-adjust: exact !important;\n  }\n  \n  body {\n    background: white !important;\n    font-size: 12px !important;\n    line-height: 1.4 !important;\n  }\n  \n  /* Hide elements that shouldn't print */\n  .print\\:hidden {\n    display: none !important;\n  }\n  \n  /* Ensure the planner takes full width */\n  .print-planner {\n    width: 100% !important;\n    max-width: none !important;\n    margin: 0 !important;\n    padding: 20px !important;\n  }\n  \n  /* Planner header styling */\n  .print-header {\n    text-align: center !important;\n    margin-bottom: 20px !important;\n    border-bottom: 2px solid #3E4A59 !important;\n    padding-bottom: 10px !important;\n  }\n  \n  .print-header h1 {\n    font-size: 24px !important;\n    font-weight: bold !important;\n    color: #3E4A59 !important;\n    margin: 0 !important;\n  }\n  \n  .print-header p {\n    font-size: 14px !important;\n    color: #7E8A97 !important;\n    margin: 5px 0 0 0 !important;\n  }\n  \n  /* Planner grid styling */\n  .print-grid {\n    width: 100% !important;\n    border-collapse: collapse !important;\n    margin-top: 20px !important;\n  }\n  \n  .print-grid th,\n  .print-grid td {\n    border: 1px solid #3E4A59 !important;\n    padding: 8px !important;\n    vertical-align: top !important;\n    font-size: 11px !important;\n  }\n  \n  .print-grid th {\n    background-color: #D9E5D1 !important;\n    font-weight: bold !important;\n    text-align: center !important;\n    color: #3E4A59 !important;\n  }\n  \n  .print-grid .student-header {\n    background-color: #F5F2EA !important;\n    font-weight: bold !important;\n    color: #3E4A59 !important;\n  }\n  \n  /* Task styling in print */\n  .print-task {\n    margin-bottom: 8px !important;\n    padding: 4px !important;\n    border-left: 3px solid #8BA88E !important;\n    background-color: #f9f9f9 !important;\n  }\n  \n  .print-task.completed {\n    border-left-color: #8BA88E !important;\n    background-color: #D9E5D1 !important;\n  }\n  \n  .print-task.in_progress {\n    border-left-color: #FCD34D !important;\n    background-color: #FEF3C7 !important;\n  }\n  \n  .print-task.pending {\n    border-left-color: #9CA3AF !important;\n    background-color: #F3F4F6 !important;\n  }\n  \n  .print-task-title {\n    font-weight: bold !important;\n    font-size: 11px !important;\n    margin-bottom: 2px !important;\n  }\n  \n  .print-task-subject {\n    font-size: 10px !important;\n    color: #7E8A97 !important;\n    margin-bottom: 2px !important;\n  }\n  \n  .print-task-time {\n    font-size: 9px !important;\n    color: #3E4A59 !important;\n  }\n  \n  /* Page break controls */\n  .print-page-break {\n    page-break-before: always !important;\n  }\n  \n  .print-no-break {\n    page-break-inside: avoid !important;\n  }\n  \n  /* Footer for print */\n  .print-footer {\n    margin-top: 30px !important;\n    text-align: center !important;\n    font-size: 10px !important;\n    color: #7E8A97 !important;\n    border-top: 1px solid #D9E5D1 !important;\n    padding-top: 10px !important;\n  }\n}\n\n:root {\n    /* Pebble Track Color Palette - Updated with exact hex codes */\n    --pebble-gray: #7E8A97;\n    --moss-green: #8BA88E;\n    --stream-blue: #A8C7DD;\n    --drift-sand: #F5F2EA;\n    --charcoal-slate: #3E4A59;\n    --fern-mist: #D9E5D1;\n    \n    /* Theme variables using the color palette */\n    --background: 40 25% 94%; /* Drift Sand */\n    --foreground: 213 20% 29%; /* Charcoal Slate */\n    --muted: 107 25% 85%; /* Fern Mist */\n    --muted-foreground: 210 11% 55%; /* Pebble Gray */\n    --popover: 0 0% 100%;\n    --popover-foreground: 213 20% 29%;\n    --card: 0 0% 100%;\n    --card-foreground: 213 20% 29%;\n    --border: 107 25% 85%; /* Fern Mist */\n    --input: 107 25% 85%;\n    --primary: 127 15% 61%; /* Moss Green */\n    --primary-foreground: 0 0% 100%;\n    --secondary: 107 25% 85%; /* Fern Mist */\n    --secondary-foreground: 213 20% 29%;\n    --accent: 202 53% 78%; /* Stream Blue */\n    --accent-foreground: 213 20% 29%;\n    --destructive: 0 84.2% 60.2%;\n    --destructive-foreground: 0 0% 100%;\n    --ring: 210 11% 55%; /* Pebble Gray */\n    --radius: 0.5rem;\n  }\n  .dark {\n    --background: 213 20% 29%; /* Charcoal Slate */\n    --foreground: 40 25% 94%; /* Drift Sand */\n    --muted: 210 11% 55%; /* Pebble Gray */\n    --muted-foreground: 107 25% 85%; /* Fern Mist */\n    --popover: 213 20% 29%;\n    --popover-foreground: 40 25% 94%;\n    --card: 213 20% 29%;\n    --card-foreground: 40 25% 94%;\n    --border: 210 11% 55%; /* Pebble Gray */\n    --input: 210 11% 55%;\n    --primary: 202 53% 78%; /* Stream Blue */\n    --primary-foreground: 213 20% 29%;\n    --secondary: 210 11% 55%; /* Pebble Gray */\n    --secondary-foreground: 40 25% 94%;\n    --accent: 127 15% 61%; /* Moss Green */\n    --accent-foreground: 40 25% 94%;\n    --destructive: 0 62.8% 30.6%;\n    --destructive-foreground: 40 25% 94%;\n    --ring: 202 53% 78%; /* Stream Blue */\n    --radius: 0.5rem;\n  }\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/* Print Styles for Planner */\n@media print {\n  @page {\n    size: landscape;\n    margin: 0.5in;\n  }\n  \n  /* Hide non-essential elements */\n  aside, nav, .print\\\\:hidden {\n    display: none !important;\n  }\n  \n  /* Adjust main layout for print */\n  body {\n    background: white !important;\n    color: black !important;\n    font-size: 11px !important;\n  }\n  \n  /* Planner specific styles */\n  .space-y-6 {\n    gap: 0.5rem !important;\n  }\n  \n  .p-6 {\n    padding: 0.5rem !important;\n  }\n  \n  /* Table styles for better print layout */\n  table {\n    width: 100% !important;\n    border-collapse: collapse !important;\n    font-size: 10px !important;\n  }\n  \n  th, td {\n    border: 1px solid #ccc !important;\n    padding: 0.25rem !important;\n    vertical-align: top !important;\n  }\n  \n  th {\n    background-color: #f5f5f5 !important;\n    font-weight: bold !important;\n    text-align: center !important;\n  }\n  \n  /* Task styling */\n  .bg-gradient-to-r {\n    background: #e5e5e5 !important;\n  }\n  \n  /* Card styles */\n  .border-card {\n    border: 1px solid #ccc !important;\n  }\n  \n  /* Header styles */\n  h2 {\n    font-size: 18px !important;\n    margin-bottom: 0.5rem !important;\n  }\n  \n  h3 {\n    font-size: 14px !important;\n    margin-bottom: 0.25rem !important;\n  }\n  \n  /* Compact spacing */\n  .mb-6, .mt-4, .space-y-4 > * + *, .space-x-4 > * + * {\n    margin: 0.25rem !important;\n  }\n  \n  /* Status badges */\n  .inline-flex {\n    display: inline !important;\n    padding: 1px 4px !important;\n    border: 1px solid #999 !important;\n    border-radius: 3px !important;\n    font-size: 8px !important;\n  }\n  \n  /* Ensure content fits on one page */\n  .overflow-x-auto {\n    overflow: visible !important;\n  }\n  \n  /* Task cells */\n  td {\n    height: 80px !important;\n    max-height: 80px !important;\n    overflow: hidden !important;\n  }\n  \n  /* Avatar circles */\n  .w-6.h-6, .w-8.h-8 {\n    width: 12px !important;\n    height: 12px !important;\n    font-size: 8px !important;\n  }\n}","size_bytes":7546},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport SimplePlanner from \"./SimplePlanner\";\n\n// Create a minimal, working planner without complex dependencies\nconst root = createRoot(document.getElementById(\"root\")!);\n\nroot.render(<SimplePlanner />);\n","size_bytes":251},"client/src/components/AILessonExtractor.tsx":{"content":"import { useState, useRef } from \"react\"\n\n// Temporary null check to prevent useRef errors\nif (typeof useRef !== 'function') {\n  console.error('useRef is not available, React may not be properly imported');\n}\nimport { useMutation } from \"@tanstack/react-query\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { Upload, Camera, FileText, Sparkles, Edit, Trash2, Plus } from \"lucide-react\"\nimport { apiRequest } from \"@/lib/queryClient\"\n\ninterface Lesson {\n  lessonNumber: number\n  title: string\n  type: \"lesson\" | \"quiz\" | \"test\" | \"review\" | \"exam\"\n  description: string\n  estimatedMinutes: number\n}\n\ninterface AILessonExtractorProps {\n  onLessonsExtracted: (lessons: Lesson[], curriculumData: any) => void\n}\n\nexport default function AILessonExtractor({ onLessonsExtracted }: AILessonExtractorProps) {\n  const { toast } = useToast()\n  \n  // Initialize useRef with proper error handling\n  const fileInputRef = useRef<HTMLInputElement>(null)\n  \n\n  const [extractedLessons, setExtractedLessons] = useState<Lesson[]>([])\n  const [curriculumData, setCurriculumData] = useState({\n    name: \"\",\n    subject: \"\",\n    publisher: \"\",\n    gradeLevel: \"\",\n    description: \"\"\n  })\n  const [isExtracting, setIsExtracting] = useState(false)\n  const [textInput, setTextInput] = useState(\"\")\n\n  // Define type colors for lesson badges\n  const typeColors: Record<string, string> = {\n    lesson: \"bg-blue-100 text-blue-800 border-blue-300\",\n    quiz: \"bg-yellow-100 text-yellow-800 border-yellow-300\", \n    test: \"bg-red-100 text-red-800 border-red-300\",\n    review: \"bg-green-100 text-green-800 border-green-300\",\n    exam: \"bg-purple-100 text-purple-800 border-purple-300\"\n  }\n\n  // Extract lessons mutation\n  const extractLessonsMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest('/api/curriculums/extract-lessons', 'POST', data)\n      return response\n    },\n    onSuccess: (response: any) => {\n      const lessons = response?.lessons || []\n      const count = response?.count || lessons.length\n      setExtractedLessons(lessons)\n      toast({\n        title: \"Success!\",\n        description: `Extracted ${count} lessons from your curriculum index`\n      })\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Extraction Failed\",\n        description: error.message || \"Failed to extract lessons. Please try again.\",\n        variant: \"destructive\"\n      })\n    }\n  })\n\n  // Enhance description mutation\n  const enhanceDescriptionMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest('/api/curriculums/enhance-description', 'POST', data)\n      return response\n    },\n    onSuccess: (response: any) => {\n      const description = response?.description || \"\"\n      setCurriculumData(prev => ({ ...prev, description }))\n      toast({\n        title: \"Description Enhanced\",\n        description: \"AI has generated a curriculum description for you\"\n      })\n    }\n  })\n\n  const handleImageUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0]\n    if (!file) return\n\n    if (!file.type.startsWith('image/')) {\n      toast({\n        title: \"Invalid File\",\n        description: \"Please upload an image file (JPG, PNG, etc.)\",\n        variant: \"destructive\"\n      })\n      return\n    }\n\n    setIsExtracting(true)\n    \n    try {\n      const reader = new FileReader()\n      reader.onload = async (e) => {\n        if (e.target && e.target.result) {\n          const imageData = e.target.result as string\n          \n          extractLessonsMutation.mutate({\n            imageData,\n            curriculumName: curriculumData.name || \"curriculum\",\n            extractionType: \"image\"\n          })\n        }\n      }\n      reader.onerror = () => {\n        toast({\n          title: \"Error\",\n          description: \"Failed to read image file\",\n          variant: \"destructive\"\n        })\n        setIsExtracting(false)\n      }\n      reader.readAsDataURL(file)\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to read image file\",\n        variant: \"destructive\"\n      })\n    } finally {\n      setIsExtracting(false)\n    }\n  }\n\n  const handleTextExtraction = () => {\n    if (!textInput.trim()) {\n      toast({\n        title: \"No Text\",\n        description: \"Please paste your curriculum index text\",\n        variant: \"destructive\"\n      })\n      return\n    }\n\n    extractLessonsMutation.mutate({\n      textContent: textInput,\n      curriculumName: curriculumData.name || \"curriculum\",\n      extractionType: \"text\"\n    })\n  }\n\n  const updateLesson = (index: number, field: keyof Lesson, value: any) => {\n    setExtractedLessons(prev => prev.map((lesson, i) => \n      i === index ? { ...lesson, [field]: value } : lesson\n    ))\n  }\n\n  const deleteLesson = (index: number) => {\n    setExtractedLessons(prev => prev.filter((_, i) => i !== index))\n  }\n\n  const addLesson = () => {\n    const newLesson: Lesson = {\n      lessonNumber: extractedLessons.length + 1,\n      title: \"New Lesson\",\n      type: \"lesson\",\n      description: \"\",\n      estimatedMinutes: 30\n    }\n    setExtractedLessons(prev => [...prev, newLesson])\n  }\n\n  const handleEnhanceDescription = () => {\n    if (!curriculumData.name || !curriculumData.publisher) {\n      toast({\n        title: \"Missing Information\",\n        description: \"Please enter curriculum name and publisher first\",\n        variant: \"destructive\"\n      })\n      return\n    }\n\n    enhanceDescriptionMutation.mutate({\n      curriculumName: curriculumData.name,\n      publisher: curriculumData.publisher,\n      gradeLevel: curriculumData.gradeLevel\n    })\n  }\n\n  const handleImportLessons = () => {\n    if (extractedLessons.length === 0) {\n      toast({\n        title: \"No Lessons\",\n        description: \"Please extract lessons first\",\n        variant: \"destructive\"\n      })\n      return\n    }\n\n    if (!curriculumData.name) {\n      toast({\n        title: \"Missing Name\",\n        description: \"Please enter a curriculum name\",\n        variant: \"destructive\"\n      })\n      return\n    }\n\n    onLessonsExtracted(extractedLessons, {\n      ...curriculumData,\n      totalLessons: extractedLessons.length\n    })\n  }\n\n\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Curriculum Details */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Curriculum Information</CardTitle>\n          <CardDescription>Enter your curriculum details before extracting lessons</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"curriculum-name\">Curriculum Name *</Label>\n              <Input\n                id=\"curriculum-name\"\n                placeholder=\"e.g., Teaching Textbooks Algebra 1\"\n                value={curriculumData.name}\n                onChange={(e) => setCurriculumData(prev => ({ ...prev, name: e.target.value }))}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"curriculum-subject\">Subject</Label>\n              <Input\n                id=\"curriculum-subject\"\n                placeholder=\"e.g., Math, Science, History\"\n                value={curriculumData.subject}\n                onChange={(e) => setCurriculumData(prev => ({ ...prev, subject: e.target.value }))}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"curriculum-publisher\">Publisher</Label>\n              <Input\n                id=\"curriculum-publisher\"\n                placeholder=\"e.g., Teaching Textbooks\"\n                value={curriculumData.publisher}\n                onChange={(e) => setCurriculumData(prev => ({ ...prev, publisher: e.target.value }))}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"curriculum-grade\">Grade Level</Label>\n              <Input\n                id=\"curriculum-grade\"\n                placeholder=\"e.g., High School, 7th Grade\"\n                value={curriculumData.gradeLevel}\n                onChange={(e) => setCurriculumData(prev => ({ ...prev, gradeLevel: e.target.value }))}\n              />\n            </div>\n          </div>\n          <div className=\"mt-4\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <Label htmlFor=\"curriculum-description\">Description</Label>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleEnhanceDescription}\n                disabled={enhanceDescriptionMutation.isPending}\n              >\n                <Sparkles className=\"mr-1 h-3 w-3\" />\n                {enhanceDescriptionMutation.isPending ? 'Enhancing...' : 'AI Enhance'}\n              </Button>\n            </div>\n            <Textarea\n              id=\"curriculum-description\"\n              placeholder=\"Brief description of the curriculum...\"\n              value={curriculumData.description}\n              onChange={(e) => setCurriculumData(prev => ({ ...prev, description: e.target.value }))}\n              rows={3}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Lesson Extraction */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <Sparkles className=\"mr-2 h-5 w-5 text-purple-600\" />\n            AI Lesson Extraction\n          </CardTitle>\n          <CardDescription>\n            Upload an image or paste text from your curriculum index\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Tabs defaultValue=\"image\" className=\"space-y-4\">\n            <TabsList className=\"grid w-full grid-cols-2\">\n              <TabsTrigger value=\"image\">Image Upload</TabsTrigger>\n              <TabsTrigger value=\"text\">Text Input</TabsTrigger>\n            </TabsList>\n            \n            <TabsContent value=\"image\" className=\"space-y-4\">\n              <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\">\n                <Camera className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                <h3 className=\"text-lg font-semibold mb-2\">Upload Lesson Index Image</h3>\n                <p className=\"text-gray-600 mb-4\">\n                  Take a photo of your Teaching Textbooks lesson index or upload any curriculum table of contents\n                </p>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handleImageUpload}\n                  className=\"hidden\"\n                />\n                <Button\n                  onClick={() => {\n                    if (fileInputRef.current) {\n                      fileInputRef.current.click()\n                    }\n                  }}\n                  disabled={isExtracting || extractLessonsMutation.isPending}\n                >\n                  <Upload className=\"mr-2 h-4 w-4\" />\n                  {isExtracting || extractLessonsMutation.isPending ? 'Extracting...' : 'Choose Image'}\n                </Button>\n              </div>\n            </TabsContent>\n            \n            <TabsContent value=\"text\" className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"text-input\">Paste Curriculum Index Text</Label>\n                <Textarea\n                  id=\"text-input\"\n                  placeholder=\"Paste your curriculum table of contents or lesson list here...\"\n                  value={textInput}\n                  onChange={(e) => setTextInput(e.target.value)}\n                  rows={8}\n                />\n              </div>\n              <Button\n                onClick={handleTextExtraction}\n                disabled={extractLessonsMutation.isPending}\n                className=\"w-full\"\n              >\n                <FileText className=\"mr-2 h-4 w-4\" />\n                {extractLessonsMutation.isPending ? 'Extracting...' : 'Extract from Text'}\n              </Button>\n            </TabsContent>\n          </Tabs>\n        </CardContent>\n      </Card>\n\n      {/* Extracted Lessons */}\n      {extractedLessons.length > 0 && (\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <CardTitle>Extracted Lessons ({extractedLessons.length})</CardTitle>\n                <CardDescription>Review and edit lessons before importing</CardDescription>\n              </div>\n              <div className=\"flex space-x-2\">\n                <Button variant=\"outline\" size=\"sm\" onClick={addLesson}>\n                  <Plus className=\"mr-1 h-3 w-3\" />\n                  Add Lesson\n                </Button>\n                <Button onClick={handleImportLessons} className=\"bg-green-600 hover:bg-green-700\">\n                  Import {extractedLessons.length} Lessons\n                </Button>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n              {extractedLessons.map((lesson, index) => (\n                <div key={index} className=\"border rounded-lg p-4 space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-2\">\n                      <span className=\"font-semibold text-sm\">#{lesson.lessonNumber}</span>\n                      <Badge className={typeColors[lesson.type] || typeColors.lesson}>\n                        {lesson.type}\n                      </Badge>\n                    </div>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => deleteLesson(index)}\n                    >\n                      <Trash2 className=\"h-3 w-3\" />\n                    </Button>\n                  </div>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                    <div>\n                      <Label className=\"text-xs\">Title</Label>\n                      <Input\n                        value={lesson.title}\n                        onChange={(e) => updateLesson(index, 'title', e.target.value)}\n                        className=\"text-sm\"\n                      />\n                    </div>\n                    <div>\n                      <Label className=\"text-xs\">Type</Label>\n                      <select\n                        value={lesson.type}\n                        onChange={(e) => updateLesson(index, 'type', e.target.value)}\n                        className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-md\"\n                      >\n                        <option value=\"lesson\">Lesson</option>\n                        <option value=\"quiz\">Quiz</option>\n                        <option value=\"test\">Test</option>\n                        <option value=\"review\">Review</option>\n                        <option value=\"exam\">Exam</option>\n                      </select>\n                    </div>\n                  </div>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                    <div>\n                      <Label className=\"text-xs\">Description</Label>\n                      <Input\n                        value={lesson.description}\n                        onChange={(e) => updateLesson(index, 'description', e.target.value)}\n                        placeholder=\"Brief description...\"\n                        className=\"text-sm\"\n                      />\n                    </div>\n                    <div>\n                      <Label className=\"text-xs\">Minutes</Label>\n                      <Input\n                        type=\"number\"\n                        value={lesson.estimatedMinutes}\n                        onChange={(e) => updateLesson(index, 'estimatedMinutes', parseInt(e.target.value) || 30)}\n                        min=\"5\"\n                        max=\"120\"\n                        className=\"text-sm\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  )\n}","size_bytes":16605},"client/src/components/Header.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { School, PersonStanding, LogOut, Eye, Users, X, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport StudentDashboard from \"@/pages/StudentDashboardNew\";\n\ninterface User {\n  id: number;\n  email: string;\n  role: \"parent\" | \"student\";\n  fullName: string;\n  familyName?: string;\n}\n\ninterface HeaderProps {\n  user?: User | null;\n}\n\ninterface StudentDashboardModalProps {\n  onClose: () => void;\n  user: User;\n}\n\nconst StudentDashboardModal = ({ onClose, user }: StudentDashboardModalProps) => {\n  const [currentStudentIndex, setCurrentStudentIndex] = useState(0);\n\n  // Fetch family students\n  const { data: students } = useQuery({\n    queryKey: [\"/api/auth/students\"],\n    enabled: !!user && user.role === \"parent\",\n  });\n\n  const currentStudent = students?.[currentStudentIndex];\n\n  const handlePreviousStudent = () => {\n    setCurrentStudentIndex(prev => \n      prev === 0 ? (students?.length || 1) - 1 : prev - 1\n    );\n  };\n\n  const handleNextStudent = () => {\n    setCurrentStudentIndex(prev => \n      prev === (students?.length || 1) - 1 ? 0 : prev + 1\n    );\n  };\n\n  if (!students || students.length === 0) {\n    return (\n      <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n        <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full p-6 text-center\">\n          <h2 className=\"text-xl font-bold mb-4\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n            No Students Found\n          </h2>\n          <p className=\"text-gray-600 mb-4\">Add students to your family to view their dashboards.</p>\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 bg-gradient-to-r from-[#7E8A97] to-[#8BA88E] text-white rounded-lg\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden\">\n        <div className=\"flex items-center justify-between p-4 border-b bg-gradient-to-r from-[#7E8A97] to-[#8BA88E] text-white\">\n          <div className=\"flex items-center space-x-4\">\n            <h2 className=\"text-xl font-bold\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n              {currentStudent?.fullName}'s Dashboard\n            </h2>\n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={handlePreviousStudent}\n                disabled={students.length <= 1}\n                className=\"w-8 h-8 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors disabled:opacity-50\"\n              >\n                <ChevronLeft className=\"h-5 w-5 text-white\" />\n              </button>\n              <span className=\"text-sm px-2\">\n                {currentStudentIndex + 1} of {students.length}\n              </span>\n              <button\n                onClick={handleNextStudent}\n                disabled={students.length <= 1}\n                className=\"w-8 h-8 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors disabled:opacity-50\"\n              >\n                <ChevronRight className=\"h-5 w-5 text-white\" />\n              </button>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"w-8 h-8 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors\"\n          >\n            <X className=\"h-5 w-5 text-white\" />\n          </button>\n        </div>\n        <div className=\"overflow-auto max-h-[calc(90vh-80px)]\">\n          <StudentDashboard studentId={currentStudent?.id} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst Header = ({ user }: HeaderProps) => {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [showStudentDashboard, setShowStudentDashboard] = useState(false);\n\n  // Fetch family settings to get the family name\n  const { data: familySettings } = useQuery({\n    queryKey: [\"/api/family/settings\"],\n    enabled: !!user && user.role === \"parent\",\n  });\n\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch(\"/api/auth/logout\", {\n        method: \"POST\",\n        credentials: \"include\",\n      });\n      \n      if (!response.ok) {\n        throw new Error(\"Logout failed\");\n      }\n      \n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      toast({\n        title: \"Signed out\",\n        description: \"You've been successfully signed out.\",\n      });\n      setLocation(\"/\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to sign out.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleLogout = () => {\n    setShowDropdown(false);\n    logoutMutation.mutate();\n  };\n\n  const handleViewStudentDashboard = () => {\n    setShowDropdown(false);\n    setShowStudentDashboard(true);\n  };\n\n  if (!user) {\n    return null; // Don't show header when not authenticated\n  }\n\n  return (\n    <>\n      <header className=\"bg-gradient-to-r from-[#7E8A97] to-[#8BA88E] text-white shadow-md\">\n        <div className=\"container mx-auto px-4 py-3 flex justify-between items-center\">\n          <div className=\"flex items-center\">\n            <School className=\"mr-3 h-6 w-6\" />\n            <h1 className=\"text-2xl font-bold\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n              Pebble Track\n            </h1>\n            {familySettings?.familyName && (\n              <span className=\"ml-3 text-sm opacity-90\">\n                {familySettings.familyName}\n              </span>\n            )}\n          </div>\n          \n          <div className=\"flex items-center space-x-4\">\n            <span className=\"hidden md:inline-block font-medium\">\n              {user.fullName}\n            </span>\n            \n            {user.role === \"parent\" && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={handleViewStudentDashboard}\n                className=\"text-white hover:bg-white/20\"\n              >\n                <Eye className=\"mr-2 h-4 w-4\" />\n                View as Student\n              </Button>\n            )}\n            \n            <div className=\"relative\">\n              <button \n                className=\"w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors\"\n                onClick={() => setShowDropdown(!showDropdown)}\n              >\n                <PersonStanding className=\"h-5 w-5 text-white\" />\n              </button>\n              \n              {showDropdown && (\n                <div className=\"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg z-50 border\">\n                  <div className=\"py-2\">\n                    <div className=\"px-4 py-2 border-b\">\n                      <p className=\"text-sm font-medium text-[#4B5563]\">{user.fullName}</p>\n                      <p className=\"text-xs text-[#6B7280]\">{user.email}</p>\n                      <p className=\"text-xs text-[#6B7280] capitalize\">{user.role}</p>\n                    </div>\n                    \n                    {user.role === \"parent\" && (\n                      <button\n                        onClick={handleViewStudentDashboard}\n                        className=\"flex items-center w-full px-4 py-2 text-sm text-[#4B5563] hover:bg-[#F3F4F6]\"\n                      >\n                        <Eye className=\"mr-3 h-4 w-4\" />\n                        <span>View Student Dashboard</span>\n                      </button>\n                    )}\n                    \n                    <button\n                      onClick={() => setLocation(\"/students\")}\n                      className=\"flex items-center w-full px-4 py-2 text-sm text-[#4B5563] hover:bg-[#F3F4F6]\"\n                    >\n                      <Users className=\"mr-3 h-4 w-4\" />\n                      <span>Manage Students</span>\n                    </button>\n                    \n                    <div className=\"border-t mt-2 pt-2\">\n                      <button\n                        onClick={handleLogout}\n                        disabled={logoutMutation.isPending}\n                        className=\"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 disabled:opacity-50\"\n                      >\n                        <LogOut className=\"mr-3 h-4 w-4\" />\n                        <span>{logoutMutation.isPending ? \"Signing out...\" : \"Sign out\"}</span>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Student Dashboard Modal */}\n      {showStudentDashboard && (\n        <StudentDashboardModal\n          onClose={() => setShowStudentDashboard(false)}\n          user={user}\n        />\n      )}\n    </>\n  );\n};\n\nexport default Header;\n","size_bytes":9432},"client/src/components/Layout.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport Header from \"./Header\";\nimport TeacherSidebar from \"./TeacherSidebar\";\nimport StudentSidebar from \"./StudentSidebar\";\n\ninterface User {\n  id: number;\n  email: string;\n  role: \"parent\" | \"student\";\n  fullName: string;\n  familyName?: string;\n}\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\nconst Layout = ({ children }: LayoutProps) => {\n  const [isMobile, setIsMobile] = useState(false);\n  \n  // Get current authenticated user\n  const { data: user } = useQuery<User>({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  const isParent = user?.role === \"parent\";\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n\n    // Initial check\n    checkScreenSize();\n\n    // Add event listener\n    window.addEventListener(\"resize\", checkScreenSize);\n\n    // Clean up\n    return () => window.removeEventListener(\"resize\", checkScreenSize);\n  }, []);\n\n  if (!user) {\n    return (\n      <div className=\"flex flex-col min-h-screen bg-neutral-light\">\n        <main className=\"flex-1 p-4 md:p-6\">\n          {children}\n        </main>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col min-h-screen bg-neutral-light\">\n      <Header user={user} />\n      \n      <div className=\"flex flex-1\">\n        {isParent ? <TeacherSidebar /> : <StudentSidebar />}\n        \n        <main className={`flex-1 p-4 md:p-6 ${isMobile ? 'ml-16' : 'ml-16 md:ml-64'}`}>\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default Layout;\n","size_bytes":1623},"client/src/components/MobileNav.tsx":{"content":"import { useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { getQueryFn } from \"@/lib/queryClient\";\nimport { Home, Calendar, Users, Settings, BookOpen, Menu, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\ninterface User {\n  id: number;\n  email: string;\n  role: \"parent\" | \"student\";\n  fullName: string;\n  familyName?: string;\n}\n\nconst MobileNav = () => {\n  const [location] = useLocation();\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  \n  // Get current authenticated user\n  const { data: user } = useQuery<User>({\n    queryKey: [\"/api/auth/user\"],\n    queryFn: getQueryFn({ on401: \"returnNull\" }),\n    retry: false,\n  });\n\n  const navigationItems = user?.role === \"parent\" ? [\n    { icon: Home, label: \"Dashboard\", path: \"/\" },\n    { icon: Calendar, label: \"Planner\", path: \"/planner\" },\n    { icon: Users, label: \"Students\", path: \"/students\" },\n    { icon: BookOpen, label: \"Classes\", path: \"/classes\" },\n    { icon: BookOpen, label: \"Curriculum\", path: \"/curriculum\" },\n    { icon: Settings, label: \"Settings\", path: \"/settings\" }\n  ] : [\n    { icon: Home, label: \"My Tasks\", path: \"/student\" },\n    { icon: BookOpen, label: \"Assignments\", path: \"/student/tasks\" },\n    { icon: Settings, label: \"Settings\", path: \"/settings\" }\n  ];\n\n  if (!user) return null;\n\n  return (\n    <>\n      {/* Mobile Header */}\n      <div className=\"md:hidden bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-4 py-3 flex items-center justify-between sticky top-0 z-50\">\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"w-8 h-8 bg-[#8BA88E] rounded-lg flex items-center justify-center\">\n            <span className=\"text-white text-sm font-bold\">🍃</span>\n          </div>\n          <h1 className=\"font-bold text-lg text-[#8BA88E]\">Pebble Track</h1>\n        </div>\n        \n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => setIsMenuOpen(!isMenuOpen)}\n          className=\"p-2\"\n        >\n          {isMenuOpen ? <X className=\"w-5 h-5\" /> : <Menu className=\"w-5 h-5\" />}\n        </Button>\n      </div>\n\n      {/* Mobile Menu Overlay */}\n      {isMenuOpen && (\n        <div className=\"md:hidden fixed inset-0 z-40 bg-black bg-opacity-50\" onClick={() => setIsMenuOpen(false)} />\n      )}\n\n      {/* Mobile Side Menu */}\n      <div className={cn(\n        \"md:hidden fixed top-0 right-0 h-full w-64 bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 z-50 transform transition-transform duration-300 ease-in-out\",\n        isMenuOpen ? \"translate-x-0\" : \"translate-x-full\"\n      )}>\n        <div className=\"p-4 border-b border-gray-200 dark:border-gray-700\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"font-semibold text-lg\">Menu</h2>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setIsMenuOpen(false)}\n              className=\"p-2\"\n            >\n              <X className=\"w-4 h-4\" />\n            </Button>\n          </div>\n          <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n            {user.fullName} ({user.role})\n          </p>\n        </div>\n        \n        <nav className=\"p-4\">\n          <ul className=\"space-y-2\">\n            {navigationItems.map((item) => {\n              const Icon = item.icon;\n              const isActive = location === item.path;\n              \n              return (\n                <li key={item.path}>\n                  <Link href={item.path}>\n                    <Button\n                      variant={isActive ? \"secondary\" : \"ghost\"}\n                      className={cn(\n                        \"w-full justify-start text-left p-3 h-auto\",\n                        isActive && \"bg-[#8BA88E] text-white hover:bg-[#7A9A7D]\"\n                      )}\n                      onClick={() => setIsMenuOpen(false)}\n                    >\n                      <Icon className=\"w-5 h-5 mr-3\" />\n                      <span className=\"font-medium\">{item.label}</span>\n                    </Button>\n                  </Link>\n                </li>\n              );\n            })}\n          </ul>\n        </nav>\n      </div>\n\n      {/* Bottom Navigation for Mobile */}\n      <div className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 px-2 py-1 z-30\">\n        <div className=\"flex justify-around\">\n          {navigationItems.slice(0, 4).map((item) => {\n            const Icon = item.icon;\n            const isActive = location === item.path;\n            \n            return (\n              <Link key={item.path} href={item.path}>\n                <Button\n                  variant=\"ghost\"\n                  className={cn(\n                    \"flex flex-col items-center p-2 h-auto min-w-0 space-y-1\",\n                    isActive && \"text-[#8BA88E]\"\n                  )}\n                >\n                  <Icon className={cn(\"w-5 h-5\", isActive && \"text-[#8BA88E]\")} />\n                  <span className=\"text-xs truncate max-w-12\">{item.label}</span>\n                </Button>\n              </Link>\n            );\n          })}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default MobileNav;","size_bytes":5357},"client/src/components/StudentSidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { PanelsTopLeft, CheckSquare, BookOpen, Calendar, TrendingUp } from \"lucide-react\";\n\nconst StudentSidebar = () => {\n  const [location] = useLocation();\n\n  const isActive = (path: string) => {\n    return location.startsWith(path);\n  };\n\n  return (\n    <aside className=\"w-16 md:w-64 bg-white shadow-md fixed h-full z-10\">\n      <nav className=\"py-4\">\n        <ul>\n          <li className=\"mb-1\">\n            <Link href=\"/student/dashboard\">\n              <a className={`flex items-center px-4 py-3 text-neutral-darkest hover:bg-neutral-light group transition-colors ${\n                isActive(\"/student/dashboard\") ? \"bg-neutral-light\" : \"\"\n              }`}>\n                <PanelsTopLeft className={`${isActive(\"/student/dashboard\") ? \"text-secondary\" : \"text-neutral-dark\"} mr-3 h-5 w-5 group-hover:text-secondary`} />\n                <span className=\"hidden md:inline\">PanelsTopLeft</span>\n              </a>\n            </Link>\n          </li>\n          <li className=\"mb-1\">\n            <Link href=\"/student/tasks\">\n              <a className={`flex items-center px-4 py-3 text-neutral-darkest hover:bg-neutral-light group transition-colors ${\n                isActive(\"/student/tasks\") ? \"bg-neutral-light\" : \"\"\n              }`}>\n                <CheckSquare className={`${isActive(\"/student/tasks\") ? \"text-secondary\" : \"text-neutral-dark\"} mr-3 h-5 w-5 group-hover:text-secondary`} />\n                <span className=\"hidden md:inline\">My Tasks</span>\n              </a>\n            </Link>\n          </li>\n          <li className=\"mb-1\">\n            <Link href=\"/student/classes\">\n              <a className={`flex items-center px-4 py-3 text-neutral-darkest hover:bg-neutral-light group transition-colors ${\n                isActive(\"/student/classes\") ? \"bg-neutral-light\" : \"\"\n              }`}>\n                <BookOpen className={`${isActive(\"/student/classes\") ? \"text-secondary\" : \"text-neutral-dark\"} mr-3 h-5 w-5 group-hover:text-secondary`} />\n                <span className=\"hidden md:inline\">My Classes</span>\n              </a>\n            </Link>\n          </li>\n          <li className=\"mb-1\">\n            <Link href=\"/student/calendar\">\n              <a className={`flex items-center px-4 py-3 text-neutral-darkest hover:bg-neutral-light group transition-colors ${\n                isActive(\"/student/calendar\") ? \"bg-neutral-light\" : \"\"\n              }`}>\n                <Calendar className={`${isActive(\"/student/calendar\") ? \"text-secondary\" : \"text-neutral-dark\"} mr-3 h-5 w-5 group-hover:text-secondary`} />\n                <span className=\"hidden md:inline\">Calendar</span>\n              </a>\n            </Link>\n          </li>\n          <li className=\"mb-1\">\n            <Link href=\"/student/progress\">\n              <a className={`flex items-center px-4 py-3 text-neutral-darkest hover:bg-neutral-light group transition-colors ${\n                isActive(\"/student/progress\") ? \"bg-neutral-light\" : \"\"\n              }`}>\n                <TrendingUp className={`${isActive(\"/student/progress\") ? \"text-secondary\" : \"text-neutral-dark\"} mr-3 h-5 w-5 group-hover:text-secondary`} />\n                <span className=\"hidden md:inline\">My Progress</span>\n              </a>\n            </Link>\n          </li>\n        </ul>\n      </nav>\n    </aside>\n  );\n};\n\nexport default StudentSidebar;\n","size_bytes":3375},"client/src/components/TeacherSidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { PanelsTopLeft, Users, Calendar, BarChart, Settings } from \"lucide-react\";\n\nconst TeacherSidebar = () => {\n  const [location] = useLocation();\n\n  const isActive = (path: string) => {\n    return location.startsWith(path);\n  };\n\n  return (\n    <aside className=\"w-16 md:w-64 bg-white shadow-md fixed h-full z-10\">\n      <nav className=\"py-4\">\n        <ul>\n          <li className=\"mb-1\">\n            <Link href=\"/\">\n              <a className={`flex items-center px-4 py-3 text-neutral-darkest hover:bg-neutral-light group transition-colors ${\n                location === \"/\" ? \"bg-neutral-light\" : \"\"\n              }`}>\n                <PanelsTopLeft className={`${location === \"/\" ? \"text-primary\" : \"text-neutral-dark\"} mr-3 h-5 w-5 group-hover:text-primary`} />\n                <span className=\"hidden md:inline\">Dashboard</span>\n              </a>\n            </Link>\n          </li>\n          <li className=\"mb-1\">\n            <Link href=\"/students\">\n              <a className={`flex items-center px-4 py-3 text-neutral-darkest hover:bg-neutral-light group transition-colors ${\n                isActive(\"/students\") ? \"bg-neutral-light\" : \"\"\n              }`}>\n                <Users className={`${isActive(\"/students\") ? \"text-primary\" : \"text-neutral-dark\"} mr-3 h-5 w-5 group-hover:text-primary`} />\n                <span className=\"hidden md:inline\">Students</span>\n              </a>\n            </Link>\n          </li>\n          <li className=\"mb-1\">\n            <Link href=\"/planner\">\n              <a className={`flex items-center px-4 py-3 text-neutral-darkest hover:bg-neutral-light group transition-colors ${\n                isActive(\"/planner\") ? \"bg-neutral-light\" : \"\"\n              }`}>\n                <Calendar className={`${isActive(\"/planner\") ? \"text-primary\" : \"text-neutral-dark\"} mr-3 h-5 w-5 group-hover:text-primary`} />\n                <span className=\"hidden md:inline\">Planner</span>\n              </a>\n            </Link>\n          </li>\n          <li className=\"mb-1\">\n            <Link href=\"/reports\">\n              <a className={`flex items-center px-4 py-3 text-neutral-darkest hover:bg-neutral-light group transition-colors ${\n                isActive(\"/reports\") ? \"bg-neutral-light\" : \"\"\n              }`}>\n                <BarChart className={`${isActive(\"/reports\") ? \"text-primary\" : \"text-neutral-dark\"} mr-3 h-5 w-5 group-hover:text-primary`} />\n                <span className=\"hidden md:inline\">Reports</span>\n              </a>\n            </Link>\n          </li>\n          <li className=\"mb-1\">\n            <Link href=\"/settings\">\n              <a className={`flex items-center px-4 py-3 text-neutral-darkest hover:bg-neutral-light group transition-colors ${\n                isActive(\"/settings\") ? \"bg-neutral-light\" : \"\"\n              }`}>\n                <Settings className={`${isActive(\"/settings\") ? \"text-primary\" : \"text-neutral-dark\"} mr-3 h-5 w-5 group-hover:text-primary`} />\n                <span className=\"hidden md:inline\">Settings</span>\n              </a>\n            </Link>\n          </li>\n        </ul>\n      </nav>\n    </aside>\n  );\n};\n\nexport default TeacherSidebar;\n","size_bytes":3193},"client/src/context/UserContext.tsx":{"content":"import { createContext, useContext, useState, useCallback, ReactNode } from \"react\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface User {\n  id: number;\n  email: string;\n  role: \"parent\" | \"student\";\n  fullName: string;\n  familyName?: string;\n}\n\ninterface UserContextProps {\n  user: User | null;\n  setUser: (user: User | null) => void;\n  isLoading: boolean;\n  checkAuthentication: () => Promise<void>;\n  login: (email: string, password: string) => Promise<User>;\n}\n\nconst UserContext = createContext<UserContextProps | undefined>(undefined);\n\nexport function UserProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const checkAuthentication = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      const response = await fetch(\"/api/auth/user\", {\n        credentials: \"include\",\n      });\n\n      if (response.ok) {\n        const userData = await response.json();\n        setUser(userData);\n      } else {\n        // Not authenticated or session expired\n        setUser(null);\n      }\n    } catch (error) {\n      console.error(\"Auth check failed:\", error);\n      setUser(null);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  const login = async (email: string, password: string): Promise<User> => {\n    try {\n      const response = await fetch(\"/api/auth/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n        body: JSON.stringify({ email, password }),\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Login failed\");\n      }\n\n      const userData = await response.json();\n      setUser(userData);\n      return userData;\n    } catch (error) {\n      console.error(\"Login failed:\", error);\n      throw error;\n    }\n  };\n\n  const value = {\n    user,\n    setUser,\n    isLoading,\n    checkAuthentication,\n    login,\n  };\n\n  return <UserContext.Provider value={value}>{children}</UserContext.Provider>;\n}\n\nexport function useUserContext() {\n  const context = useContext(UserContext);\n  if (context === undefined) {\n    throw new Error(\"useUserContext must be used within a UserProvider\");\n  }\n  return context;\n}\n","size_bytes":2325},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/hooks/useAuth.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\n\nexport function useAuth() {\n  const { data: user, isLoading } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  return {\n    user,\n    isLoading,\n    isAuthenticated: !!user,\n  };\n}","size_bytes":256},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}","size_bytes":115},"client/src/lib/avatars.ts":{"content":"// Nature-themed avatar system for Pebble Track\nexport interface NatureAvatar {\n  id: string;\n  name: string;\n  emoji: string;\n  backgroundColor: string;\n  category: 'forest' | 'ocean' | 'mountain' | 'garden' | 'wildlife';\n}\n\nexport const natureAvatars: NatureAvatar[] = [\n  // Forest creatures\n  { id: 'fox', name: 'Forest Fox', emoji: '🦊', backgroundColor: '#8BA88E', category: 'forest' },\n  { id: 'deer', name: 'Woodland Deer', emoji: '🦌', backgroundColor: '#7E8A97', category: 'forest' },\n  { id: 'owl', name: 'Wise Owl', emoji: '🦉', backgroundColor: '#A8C7DD', category: 'forest' },\n  { id: 'squirrel', name: 'Busy Squirrel', emoji: '🐿️', backgroundColor: '#F5F2EA', category: 'forest' },\n  { id: 'rabbit', name: 'Garden Rabbit', emoji: '🐰', backgroundColor: '#D9E5D1', category: 'forest' },\n  \n  // Ocean life\n  { id: 'dolphin', name: 'Playful Dolphin', emoji: '🐬', backgroundColor: '#A8C7DD', category: 'ocean' },\n  { id: 'turtle', name: 'Sea Turtle', emoji: '🐢', backgroundColor: '#8BA88E', category: 'ocean' },\n  { id: 'octopus', name: 'Smart Octopus', emoji: '🐙', backgroundColor: '#7E8A97', category: 'ocean' },\n  { id: 'whale', name: 'Gentle Whale', emoji: '🐋', backgroundColor: '#3E4A59', category: 'ocean' },\n  { id: 'fish', name: 'Tropical Fish', emoji: '🐠', backgroundColor: '#A8C7DD', category: 'ocean' },\n  \n  // Mountain wildlife\n  { id: 'eagle', name: 'Mountain Eagle', emoji: '🦅', backgroundColor: '#3E4A59', category: 'mountain' },\n  { id: 'bear', name: 'Mountain Bear', emoji: '🐻', backgroundColor: '#7E8A97', category: 'mountain' },\n  { id: 'wolf', name: 'Mountain Wolf', emoji: '🐺', backgroundColor: '#8BA88E', category: 'mountain' },\n  \n  // Garden friends\n  { id: 'butterfly', name: 'Garden Butterfly', emoji: '🦋', backgroundColor: '#D9E5D1', category: 'garden' },\n  { id: 'bee', name: 'Busy Bee', emoji: '🐝', backgroundColor: '#F5F2EA', category: 'garden' },\n  { id: 'ladybug', name: 'Lucky Ladybug', emoji: '🐞', backgroundColor: '#8BA88E', category: 'garden' },\n  { id: 'frog', name: 'Pond Frog', emoji: '🐸', backgroundColor: '#D9E5D1', category: 'garden' },\n  \n  // Wildlife\n  { id: 'elephant', name: 'Wise Elephant', emoji: '🐘', backgroundColor: '#7E8A97', category: 'wildlife' },\n  { id: 'lion', name: 'Brave Lion', emoji: '🦁', backgroundColor: '#F5F2EA', category: 'wildlife' },\n  { id: 'giraffe', name: 'Tall Giraffe', emoji: '🦒', backgroundColor: '#D9E5D1', category: 'wildlife' },\n  { id: 'panda', name: 'Peaceful Panda', emoji: '🐼', backgroundColor: '#3E4A59', category: 'wildlife' },\n];\n\nexport function getRandomNatureAvatar(): NatureAvatar {\n  return natureAvatars[Math.floor(Math.random() * natureAvatars.length)];\n}\n\nexport function getAvatarById(id: string): NatureAvatar | undefined {\n  return natureAvatars.find(avatar => avatar.id === id);\n}\n\nexport function getAvatarsByCategory(category: NatureAvatar['category']): NatureAvatar[] {\n  return natureAvatars.filter(avatar => avatar.category === category);\n}\n\nexport function getAvatarForStudent(studentName: string): NatureAvatar {\n  // Create a consistent avatar based on student name\n  const hash = studentName.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);\n  return natureAvatars[hash % natureAvatars.length];\n}","size_bytes":3289},"client/src/lib/pwa.ts":{"content":"// Simple PWA utilities for Pebble Track\n\nexport const registerServiceWorker = async (): Promise<void> => {\n  if ('serviceWorker' in navigator) {\n    try {\n      const registration = await navigator.serviceWorker.register('/sw.js');\n      console.log('Service Worker registered:', registration);\n    } catch (error) {\n      console.error('Service Worker registration failed:', error);\n    }\n  }\n};\n\nexport const isAppInstalled = (): boolean => {\n  return window.matchMedia('(display-mode: standalone)').matches;\n};\n\nexport const getNetworkStatus = (): boolean => {\n  return navigator.onLine;\n};","size_bytes":594},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey[0] as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1376},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/Assignments.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { format } from \"date-fns\";\nimport { PlusIcon, Search, Edit, Trash, MoreHorizontal, Calendar, Clock, AlertCircle } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card } from \"@/components/ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport AddAssignmentModal from \"@/components/modals/AddAssignmentModal\";\n\ninterface Assignment {\n  id: number;\n  title: string;\n  description?: string;\n  classId: number;\n  dueDate: string;\n  priority: string;\n  createdBy: number;\n  studentId?: number;\n  studentName?: string;\n  gradeLevel?: string;\n}\n\ninterface Class {\n  id: number;\n  name: string;\n}\n\nconst Assignments = () => {\n  const { toast } = useToast();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n  const [editingAssignment, setEditingAssignment] = useState<Assignment | null>(null);\n  \n  // For our homeschool demo, we'll use mock data\n  const isAssignmentsLoading = false;\n  const isClassesLoading = false;\n  \n  // Mock homeschool assignments - with student-specific assignments\n  const assignments: Assignment[] = [\n    {\n      id: 1,\n      title: \"Addition and Subtraction Practice\",\n      description: \"Complete worksheet pages 10-12\",\n      classId: 1, // Math\n      dueDate: new Date(Date.now() + 86400000).toISOString(), // Tomorrow\n      priority: \"high\",\n      createdBy: 1,\n      studentId: 1,\n      studentName: \"Emma\",\n      gradeLevel: \"2nd Grade\"\n    },\n    {\n      id: 2,\n      title: \"Phonics Reading Exercise\",\n      description: \"Read chapter 3 of 'Learn to Read' book\",\n      classId: 3, // Reading\n      dueDate: new Date(Date.now() + 172800000).toISOString(), // Day after tomorrow\n      priority: \"medium\",\n      createdBy: 1,\n      studentId: 1,\n      studentName: \"Emma\",\n      gradeLevel: \"2nd Grade\"\n    },\n    {\n      id: 3,\n      title: \"Fractions and Decimals\",\n      description: \"Complete practice problems 1-15\",\n      classId: 1, // Math\n      dueDate: new Date(Date.now() + 86400000).toISOString(), // Tomorrow\n      priority: \"high\",\n      createdBy: 1,\n      studentId: 2,\n      studentName: \"Michael\",\n      gradeLevel: \"5th Grade\"\n    },\n    {\n      id: 4,\n      title: \"Weather Systems Research\",\n      description: \"Create a diagram of weather systems\",\n      classId: 2, // Science\n      dueDate: new Date(Date.now() + 259200000).toISOString(), // 3 days from now\n      priority: \"medium\",\n      createdBy: 1,\n      studentId: 2,\n      studentName: \"Michael\",\n      gradeLevel: \"5th Grade\"\n    },\n    {\n      id: 5,\n      title: \"Algebra Equations\",\n      description: \"Solve the equations on pages 45-47\",\n      classId: 1, // Math\n      dueDate: new Date(Date.now() + 86400000).toISOString(), // Tomorrow\n      priority: \"high\",\n      createdBy: 1,\n      studentId: 3,\n      studentName: \"Sophia\",\n      gradeLevel: \"7th Grade\"\n    },\n    {\n      id: 6,\n      title: \"Ancient Civilizations Essay\",\n      description: \"Write a 2-page essay on ancient Egypt\",\n      classId: 4, // History\n      dueDate: new Date(Date.now() + 345600000).toISOString(), // 4 days from now\n      priority: \"low\",\n      createdBy: 1,\n      studentId: 3,\n      studentName: \"Sophia\",\n      gradeLevel: \"7th Grade\"\n    }\n  ];\n  \n  // Mock classes\n  const classes: Class[] = [\n    { id: 1, name: \"Math\" },\n    { id: 2, name: \"Science\" },\n    { id: 3, name: \"Reading\" },\n    { id: 4, name: \"History\" }\n  ];\n  \n  const deleteAssignmentMutation = useMutation({\n    mutationFn: async (assignmentId: number) => {\n      return apiRequest(\"DELETE\", `/api/assignments/${assignmentId}`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/assignments\"] });\n      toast({\n        title: \"Assignment deleted\",\n        description: \"The assignment has been successfully deleted\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Could not delete the assignment\",\n        variant: \"destructive\",\n      });\n    },\n  });\n  \n  const handleDeleteAssignment = (assignmentId: number) => {\n    if (confirm(\"Are you sure you want to delete this assignment?\")) {\n      deleteAssignmentMutation.mutate(assignmentId);\n    }\n  };\n  \n  const handleEditAssignment = (assignment: Assignment) => {\n    setEditingAssignment(assignment);\n    setIsAddModalOpen(true);\n  };\n  \n  const filteredAssignments = assignments\n    ? assignments.filter(assignment => \n        assignment.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        (assignment.description && assignment.description.toLowerCase().includes(searchQuery.toLowerCase()))\n      )\n    : [];\n  \n  const getClassName = (classId: number) => {\n    const foundClass = classes?.find(c => c.id === classId);\n    return foundClass ? foundClass.name : \"Unknown\";\n  };\n  \n  const getPriorityBadge = (priority: string) => {\n    switch (priority.toLowerCase()) {\n      case \"high\":\n        return <Badge className=\"bg-red-500 hover:bg-red-600\">High</Badge>;\n      case \"medium\":\n        return <Badge className=\"bg-amber-500 hover:bg-amber-600\">Medium</Badge>;\n      case \"low\":\n        return <Badge className=\"bg-green-500 hover:bg-green-600\">Low</Badge>;\n      default:\n        return <Badge className=\"bg-neutral-500\">Unknown</Badge>;\n    }\n  };\n  \n  const isLoading = isAssignmentsLoading || isClassesLoading;\n  \n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6\">\n        <h2 className=\"text-2xl font-medium text-neutral-darkest mb-2 sm:mb-0\">Assignments</h2>\n        <Button onClick={() => {\n          setEditingAssignment(null);\n          setIsAddModalOpen(true);\n        }} className=\"bg-primary hover:bg-primary-dark text-white flex items-center\">\n          <PlusIcon className=\"h-4 w-4 mr-1\" />\n          <span>Add Assignment</span>\n        </Button>\n      </div>\n      \n      <Card className=\"p-4\">\n        <div className=\"relative mb-4\">\n          <Search className=\"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n          <Input \n            placeholder=\"Search assignments...\" \n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-8 bg-neutral-light\"\n          />\n        </div>\n        \n        {isLoading ? (\n          <div className=\"text-center py-8 text-neutral-dark\">\n            <p>Loading assignments...</p>\n          </div>\n        ) : filteredAssignments.length === 0 ? (\n          <div className=\"text-center py-8 text-neutral-dark\">\n            <p>No assignments found</p>\n          </div>\n        ) : (\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Title</TableHead>\n                <TableHead>Student</TableHead>\n                <TableHead>Class</TableHead>\n                <TableHead>Due Date</TableHead>\n                <TableHead>Priority</TableHead>\n                <TableHead className=\"text-right\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredAssignments.map(assignment => {\n                const dueDate = new Date(assignment.dueDate);\n                const isPastDue = dueDate < new Date();\n                \n                return (\n                  <TableRow key={assignment.id}>\n                    <TableCell className=\"font-medium\">{assignment.title}</TableCell>\n                    <TableCell>\n                      {assignment.studentName ? (\n                        <div>\n                          <div className=\"font-medium\">{assignment.studentName}</div>\n                          {assignment.gradeLevel && (\n                            <Badge variant=\"outline\" className=\"bg-secondary bg-opacity-10 text-secondary-dark mt-1\">\n                              {assignment.gradeLevel}\n                            </Badge>\n                          )}\n                        </div>\n                      ) : (\n                        <span className=\"text-neutral-dark\">All students</span>\n                      )}\n                    </TableCell>\n                    <TableCell>{getClassName(assignment.classId)}</TableCell>\n                    <TableCell>\n                      <div className=\"flex items-center\">\n                        {isPastDue ? (\n                          <div className=\"flex items-center text-red-500\">\n                            <AlertCircle className=\"h-4 w-4 mr-1\" />\n                            <span>{format(dueDate, \"MMM d, yyyy h:mm a\")}</span>\n                          </div>\n                        ) : (\n                          <div className=\"flex items-center\">\n                            <Calendar className=\"h-4 w-4 mr-1 text-neutral-dark\" />\n                            <span>{format(dueDate, \"MMM d, yyyy\")}</span>\n                            <Clock className=\"h-4 w-4 ml-2 mr-1 text-neutral-dark\" />\n                            <span>{format(dueDate, \"h:mm a\")}</span>\n                          </div>\n                        )}\n                      </div>\n                    </TableCell>\n                    <TableCell>{getPriorityBadge(assignment.priority)}</TableCell>\n                    <TableCell className=\"text-right\">\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                          <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\n                            <span className=\"sr-only\">Open menu</span>\n                            <MoreHorizontal className=\"h-4 w-4\" />\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align=\"end\">\n                          <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                          <DropdownMenuSeparator />\n                          <DropdownMenuItem onClick={() => handleEditAssignment(assignment)}>\n                            <Edit className=\"mr-2 h-4 w-4\" />\n                            <span>Edit</span>\n                          </DropdownMenuItem>\n                          <DropdownMenuItem onClick={() => handleDeleteAssignment(assignment.id)}>\n                            <Trash className=\"mr-2 h-4 w-4\" />\n                            <span>Delete</span>\n                          </DropdownMenuItem>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </TableCell>\n                  </TableRow>\n                );\n              })}\n            </TableBody>\n          </Table>\n        )}\n      </Card>\n      \n      <AddAssignmentModal \n        isOpen={isAddModalOpen} \n        onClose={() => setIsAddModalOpen(false)} \n        assignment={editingAssignment}\n        classes={classes || []}\n      />\n    </div>\n  );\n};\n\nexport default Assignments;\n","size_bytes":11439},"client/src/pages/Classes.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { PlusIcon, Search, Users, Edit, Trash, MoreHorizontal, BookOpen, Calendar, CheckCircle, Clock } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\n\ninterface ClassData {\n  id: number;\n  name: string;\n  gradeLevel?: string;\n  description?: string;\n  studentCount: number;\n  assignments?: Assignment[];\n}\n\ninterface Assignment {\n  id: number;\n  title: string;\n  description?: string;\n  dueDate?: string;\n  status: 'active' | 'completed' | 'overdue';\n  completedBy: number;\n  totalStudents: number;\n}\n\nconst Classes = () => {\n  const { toast } = useToast();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedClass, setSelectedClass] = useState<ClassData | null>(null);\n  const [isClassModalOpen, setIsClassModalOpen] = useState(false);\n  const [isAssignmentModalOpen, setIsAssignmentModalOpen] = useState(false);\n\n  // Get current authenticated user\n  const { data: currentUser } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  // Fetch family students to get count\n  const { data: students } = useQuery({\n    queryKey: [\"/api/auth/students\"],\n    enabled: !!currentUser && currentUser.role === \"parent\",\n  });\n\n  // Sample classes data with assignments (would come from API)\n  const classes: ClassData[] = [\n    {\n      id: 1,\n      name: \"Math\",\n      gradeLevel: \"Multiple Grades\",\n      description: \"Mathematics curriculum covering fundamentals to advanced concepts\",\n      studentCount: students?.length || 0,\n      assignments: [\n        {\n          id: 1,\n          title: \"Addition Practice\",\n          description: \"Practice basic addition problems\",\n          dueDate: \"2025-01-05\",\n          status: 'active',\n          completedBy: 3,\n          totalStudents: students?.length || 6\n        },\n        {\n          id: 2,\n          title: \"Multiplication Tables\",\n          description: \"Learn and practice multiplication tables 1-12\",\n          dueDate: \"2025-01-10\",\n          status: 'active',\n          completedBy: 1,\n          totalStudents: students?.length || 6\n        }\n      ]\n    },\n    {\n      id: 2,\n      name: \"Science\",\n      gradeLevel: \"Multiple Grades\",\n      description: \"Hands-on science experiments and discovery\",\n      studentCount: students?.length || 0,\n      assignments: [\n        {\n          id: 3,\n          title: \"Solar System Project\",\n          description: \"Create a model of the solar system\",\n          dueDate: \"2025-01-15\",\n          status: 'active',\n          completedBy: 2,\n          totalStudents: students?.length || 6\n        }\n      ]\n    },\n    {\n      id: 3,\n      name: \"Reading\",\n      gradeLevel: \"Multiple Grades\", \n      description: \"Reading comprehension and literature exploration\",\n      studentCount: students?.length || 0,\n      assignments: [\n        {\n          id: 4,\n          title: \"Chapter Reading\",\n          description: \"Read chapters 1-3 and answer questions\",\n          dueDate: \"2025-01-08\",\n          status: 'active',\n          completedBy: 4,\n          totalStudents: students?.length || 6\n        }\n      ]\n    },\n    {\n      id: 4,\n      name: \"History\",\n      gradeLevel: \"Multiple Grades\",\n      description: \"World history and cultural studies\",\n      studentCount: students?.length || 0,\n      assignments: [\n        {\n          id: 5,\n          title: \"Ancient Civilizations\",\n          description: \"Research project on ancient civilizations\",\n          dueDate: \"2025-01-20\",\n          status: 'active',\n          completedBy: 0,\n          totalStudents: students?.length || 6\n        }\n      ]\n    }\n  ];\n\n  const filteredClasses = classes.filter(cls => \n    cls.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    (cls.gradeLevel && cls.gradeLevel.toLowerCase().includes(searchQuery.toLowerCase()))\n  );\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'completed': return 'bg-[#D9E5D1] text-[#8BA88E]';\n      case 'overdue': return 'bg-red-100 text-red-700';\n      default: return 'bg-[#A8C7DD] text-[#7E8A97]';\n    }\n  };\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      {/* Header */}\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6\">\n        <div>\n          <h2 className=\"text-3xl font-bold text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n            Classes & Assignments\n          </h2>\n          <p className=\"text-[#7E8A97] mt-1\">\n            Manage your homeschool curriculum and assignments\n          </p>\n        </div>\n        <Button \n          onClick={() => setIsClassModalOpen(true)}\n          className=\"bg-gradient-to-r from-[#7E8A97] to-[#8BA88E] hover:from-[#6E7A87] to-[#7B987E] text-white\"\n        >\n          <PlusIcon className=\"h-4 w-4 mr-2\" />\n          Add Class\n        </Button>\n      </div>\n\n      {/* Search */}\n      <div className=\"relative max-w-md\">\n        <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-[#7E8A97]\" />\n        <Input \n          placeholder=\"Search classes...\" \n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n          className=\"pl-10 border-[#D9E5D1] focus:border-[#8BA88E]\"\n        />\n      </div>\n\n      {/* Classes Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredClasses.map(classItem => (\n          <Card key={classItem.id} className=\"border-[#D9E5D1] hover:shadow-lg transition-shadow\">\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"p-2 bg-[#A8C7DD] rounded-lg\">\n                  <BookOpen className=\"h-6 w-6 text-[#7E8A97]\" />\n                </div>\n                <Badge variant=\"outline\" className=\"border-[#8BA88E] text-[#8BA88E]\">\n                  {classItem.gradeLevel}\n                </Badge>\n              </div>\n              <CardTitle className=\"text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                {classItem.name}\n              </CardTitle>\n              <p className=\"text-sm text-[#7E8A97]\">{classItem.description}</p>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {/* Student count */}\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center text-sm text-[#7E8A97]\">\n                    <Users className=\"h-4 w-4 mr-1\" />\n                    {classItem.studentCount} students\n                  </div>\n                  <div className=\"flex items-center text-sm text-[#7E8A97]\">\n                    <Calendar className=\"h-4 w-4 mr-1\" />\n                    {classItem.assignments?.length || 0} assignments\n                  </div>\n                </div>\n\n                {/* Assignment progress */}\n                {classItem.assignments && classItem.assignments.length > 0 && (\n                  <div>\n                    <div className=\"text-sm font-medium text-[#3E4A59] mb-2\">Recent Assignments</div>\n                    <div className=\"space-y-2\">\n                      {classItem.assignments.slice(0, 2).map(assignment => {\n                        const progress = (assignment.completedBy / assignment.totalStudents) * 100;\n                        return (\n                          <div key={assignment.id} className=\"space-y-1\">\n                            <div className=\"flex justify-between items-center\">\n                              <span className=\"text-sm text-[#3E4A59]\">{assignment.title}</span>\n                              <Badge \n                                variant=\"secondary\" \n                                className={getStatusColor(assignment.status)}\n                              >\n                                {assignment.status}\n                              </Badge>\n                            </div>\n                            <Progress value={progress} className=\"h-1\" />\n                            <div className=\"text-xs text-[#7E8A97]\">\n                              {assignment.completedBy}/{assignment.totalStudents} completed\n                            </div>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n                )}\n\n                {/* Actions */}\n                <div className=\"flex space-x-2 pt-2\">\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\" \n                    onClick={() => setSelectedClass(classItem)}\n                    className=\"flex-1 border-[#8BA88E] text-[#8BA88E] hover:bg-[#D9E5D1]\"\n                  >\n                    View Details\n                  </Button>\n                  <Button \n                    size=\"sm\"\n                    onClick={() => setIsAssignmentModalOpen(true)}\n                    className=\"bg-[#8BA88E] hover:bg-[#7B987E] text-white\"\n                  >\n                    <PlusIcon className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* Class Details Modal */}\n      <Dialog open={!!selectedClass} onOpenChange={() => setSelectedClass(null)}>\n        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n              {selectedClass?.name} - Class Details\n            </DialogTitle>\n          </DialogHeader>\n          \n          {selectedClass && (\n            <Tabs defaultValue=\"assignments\" className=\"mt-4\">\n              <TabsList className=\"grid w-full grid-cols-2\">\n                <TabsTrigger value=\"assignments\">Assignments</TabsTrigger>\n                <TabsTrigger value=\"students\">Students</TabsTrigger>\n              </TabsList>\n              \n              <TabsContent value=\"assignments\" className=\"space-y-4 mt-6\">\n                <div className=\"flex justify-between items-center\">\n                  <h3 className=\"text-lg font-semibold text-[#3E4A59]\">Assignments</h3>\n                  <Button \n                    onClick={() => setIsAssignmentModalOpen(true)}\n                    className=\"bg-[#8BA88E] hover:bg-[#7B987E] text-white\"\n                  >\n                    <PlusIcon className=\"h-4 w-4 mr-2\" />\n                    Add Assignment\n                  </Button>\n                </div>\n                \n                <div className=\"space-y-3\">\n                  {selectedClass.assignments?.map(assignment => (\n                    <Card key={assignment.id} className=\"border-[#D9E5D1]\">\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex justify-between items-start mb-2\">\n                          <h4 className=\"font-medium text-[#3E4A59]\">{assignment.title}</h4>\n                          <Badge className={getStatusColor(assignment.status)}>\n                            {assignment.status}\n                          </Badge>\n                        </div>\n                        <p className=\"text-sm text-[#7E8A97] mb-3\">{assignment.description}</p>\n                        \n                        <div className=\"flex items-center justify-between text-sm\">\n                          <div className=\"flex items-center text-[#7E8A97]\">\n                            <Calendar className=\"h-4 w-4 mr-1\" />\n                            Due: {assignment.dueDate}\n                          </div>\n                          <div className=\"flex items-center text-[#7E8A97]\">\n                            <CheckCircle className=\"h-4 w-4 mr-1\" />\n                            {assignment.completedBy}/{assignment.totalStudents} completed\n                          </div>\n                        </div>\n                        \n                        <div className=\"mt-3\">\n                          <Progress \n                            value={(assignment.completedBy / assignment.totalStudents) * 100} \n                            className=\"h-2\" \n                          />\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </TabsContent>\n              \n              <TabsContent value=\"students\" className=\"space-y-4 mt-6\">\n                <h3 className=\"text-lg font-semibold text-[#3E4A59]\">Enrolled Students</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  {students?.map((student: any) => (\n                    <Card key={student.id} className=\"border-[#D9E5D1]\">\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center space-x-3\">\n                          <div className=\"w-10 h-10 bg-[#A8C7DD] rounded-full flex items-center justify-center\">\n                            <span className=\"text-lg\">{student.fullName.charAt(0)}</span>\n                          </div>\n                          <div>\n                            <p className=\"font-medium text-[#3E4A59]\">{student.fullName}</p>\n                            <p className=\"text-sm text-[#7E8A97]\">{student.gradeLevel}</p>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </TabsContent>\n            </Tabs>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default Classes;\n","size_bytes":14204},"client/src/pages/Curriculum.tsx":{"content":"'use client'\n\nimport { useState } from \"react\"\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { BookOpen, Plus, Upload, Settings, Users, Calendar, Clock, Award } from \"lucide-react\"\nimport { apiRequest } from \"@/lib/queryClient\"\nimport type { Curriculum, CurriculumLesson, Student, StudentDailyLessons } from \"@shared/schema\"\n// import AILessonExtractor from \"@/components/AILessonExtractor\" // Temporarily disabled due to useRef error\n\nexport default function CurriculumPage() {\n  const { toast } = useToast()\n  const queryClient = useQueryClient()\n  const [selectedCurriculum, setSelectedCurriculum] = useState<Curriculum | null>(null)\n  const [importDialogOpen, setImportDialogOpen] = useState(false)\n  const [assignDialogOpen, setAssignDialogOpen] = useState(false)\n  const [extractedLessons, setExtractedLessons] = useState<any[]>([])\n  const [pendingCurriculumData, setPendingCurriculumData] = useState<any>(null)\n\n  // Fetch curriculums\n  const { data: curriculums = [], isLoading: curriculumsLoading } = useQuery({\n    queryKey: ['/api/curriculums']\n  })\n\n  // Fetch students\n  const { data: students = [], isLoading: studentsLoading } = useQuery({\n    queryKey: ['/api/auth/students']\n  })\n\n  // Create curriculum mutation\n  const createCurriculumMutation = useMutation({\n    mutationFn: async (data: any) => await apiRequest('/api/curriculums', 'POST', data),\n    onSuccess: async (curriculum) => {\n      // If we have extracted lessons, import them too\n      if (extractedLessons.length > 0) {\n        try {\n          await apiRequest(`/api/curriculums/${curriculum.id}/lessons`, 'POST', { lessons: extractedLessons })\n          setExtractedLessons([])\n          setPendingCurriculumData(null)\n        } catch (error) {\n          console.error(\"Failed to import lessons:\", error)\n        }\n      }\n      \n      queryClient.invalidateQueries({ queryKey: ['/api/curriculums'] })\n      setImportDialogOpen(false)\n      toast({\n        title: \"Success\",\n        description: extractedLessons.length > 0 \n          ? `Curriculum imported with ${extractedLessons.length} lessons!`\n          : \"Curriculum imported successfully!\"\n      })\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to import curriculum\",\n        variant: \"destructive\"\n      })\n    }\n  })\n\n  // Assign curriculum mutation\n  const assignCurriculumMutation = useMutation({\n    mutationFn: async ({ studentId, curriculumId, lessonsPerDay }: any) => \n      await apiRequest(`/api/students/${studentId}/curriculums`, 'POST', { curriculumId, lessonsPerDay }),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/auth/students'] })\n      setAssignDialogOpen(false)\n      toast({\n        title: \"Success\",\n        description: \"Curriculum assigned to student successfully!\"\n      })\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to assign curriculum\",\n        variant: \"destructive\"\n      })\n    }\n  })\n\n  const handleImportCurriculum = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    const formData = new FormData(event.currentTarget)\n    \n    // Use pending curriculum data if available from AI extraction\n    const curriculumData = pendingCurriculumData || {\n      name: formData.get('name') as string,\n      subject: formData.get('subject') as string,\n      publisher: formData.get('publisher') as string,\n      gradeLevel: formData.get('gradeLevel') as string,\n      description: formData.get('description') as string,\n      totalLessons: parseInt(formData.get('totalLessons') as string) || extractedLessons.length || 0\n    }\n\n    createCurriculumMutation.mutate(curriculumData)\n  }\n\n  const handleAssignCurriculum = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    const formData = new FormData(event.currentTarget)\n    \n    const assignmentData = {\n      studentId: parseInt(formData.get('studentId') as string),\n      curriculumId: selectedCurriculum?.id,\n      lessonsPerDay: parseInt(formData.get('lessonsPerDay') as string) || 1\n    }\n\n    assignCurriculumMutation.mutate(assignmentData)\n  }\n\n  const subjectColors: Record<string, string> = {\n    'Math': 'bg-blue-100 text-blue-800',\n    'Science': 'bg-green-100 text-green-800',\n    'History': 'bg-yellow-100 text-yellow-800',\n    'Language Arts': 'bg-purple-100 text-purple-800',\n    'Reading': 'bg-pink-100 text-pink-800',\n    'Art': 'bg-orange-100 text-orange-800'\n  }\n\n  if (curriculumsLoading || studentsLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"animate-pulse space-y-4\">\n            <div className=\"h-8 bg-gray-200 rounded w-1/3\"></div>\n            <div className=\"h-32 bg-gray-200 rounded\"></div>\n            <div className=\"h-32 bg-gray-200 rounded\"></div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4\">\n      <div className=\"max-w-6xl mx-auto\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Curriculum Management</h1>\n          <p className=\"text-gray-600\">Import your curriculum index and configure daily lesson schedules for each student</p>\n        </div>\n\n        <Tabs defaultValue=\"overview\" className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-3\">\n            <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n            <TabsTrigger value=\"import\">Import Curriculum</TabsTrigger>\n            <TabsTrigger value=\"assignments\">Student Assignments</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"overview\" className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {curriculums.length === 0 ? (\n                <Card className=\"col-span-full\">\n                  <CardContent className=\"flex flex-col items-center justify-center p-12\">\n                    <BookOpen className=\"h-16 w-16 text-gray-400 mb-4\" />\n                    <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No Curriculums Yet</h3>\n                    <p className=\"text-gray-600 text-center mb-6\">\n                      Start by importing your curriculum index to set up daily lessons for your students\n                    </p>\n                    <Dialog open={importDialogOpen} onOpenChange={setImportDialogOpen}>\n                      <DialogTrigger asChild>\n                        <Button className=\"bg-blue-600 hover:bg-blue-700\">\n                          <Plus className=\"mr-2 h-4 w-4\" />\n                          Import First Curriculum\n                        </Button>\n                      </DialogTrigger>\n                      <DialogContent className=\"sm:max-w-[500px]\">\n                        <DialogHeader>\n                          <DialogTitle>Import Curriculum</DialogTitle>\n                          <DialogDescription>\n                            Add your curriculum details to start tracking lessons and progress\n                          </DialogDescription>\n                        </DialogHeader>\n                        <form onSubmit={handleImportCurriculum} className=\"space-y-4\">\n                          <div className=\"grid grid-cols-2 gap-4\">\n                            <div>\n                              <Label htmlFor=\"name\">Curriculum Name</Label>\n                              <Input\n                                id=\"name\"\n                                name=\"name\"\n                                placeholder=\"Saxon Math 7/6\"\n                                required\n                              />\n                            </div>\n                            <div>\n                              <Label htmlFor=\"subject\">Subject</Label>\n                              <Select name=\"subject\" required>\n                                <SelectTrigger>\n                                  <SelectValue placeholder=\"Select subject\" />\n                                </SelectTrigger>\n                                <SelectContent>\n                                  <SelectItem value=\"Math\">Math</SelectItem>\n                                  <SelectItem value=\"Science\">Science</SelectItem>\n                                  <SelectItem value=\"History\">History</SelectItem>\n                                  <SelectItem value=\"Language Arts\">Language Arts</SelectItem>\n                                  <SelectItem value=\"Reading\">Reading</SelectItem>\n                                  <SelectItem value=\"Art\">Art</SelectItem>\n                                </SelectContent>\n                              </Select>\n                            </div>\n                          </div>\n                          <div className=\"grid grid-cols-2 gap-4\">\n                            <div>\n                              <Label htmlFor=\"publisher\">Publisher</Label>\n                              <Input\n                                id=\"publisher\"\n                                name=\"publisher\"\n                                placeholder=\"Saxon Publishers\"\n                              />\n                            </div>\n                            <div>\n                              <Label htmlFor=\"gradeLevel\">Grade Level</Label>\n                              <Input\n                                id=\"gradeLevel\"\n                                name=\"gradeLevel\"\n                                placeholder=\"7th Grade\"\n                              />\n                            </div>\n                          </div>\n                          <div>\n                            <Label htmlFor=\"totalLessons\">Total Lessons</Label>\n                            <Input\n                              id=\"totalLessons\"\n                              name=\"totalLessons\"\n                              type=\"number\"\n                              placeholder=\"120\"\n                              min=\"1\"\n                              required\n                            />\n                          </div>\n                          <div>\n                            <Label htmlFor=\"description\">Description</Label>\n                            <Textarea\n                              id=\"description\"\n                              name=\"description\"\n                              placeholder=\"Brief description of the curriculum content...\"\n                              rows={3}\n                            />\n                          </div>\n                          <div className=\"flex justify-end space-x-2\">\n                            <Button\n                              type=\"button\"\n                              variant=\"outline\"\n                              onClick={() => setImportDialogOpen(false)}\n                            >\n                              Cancel\n                            </Button>\n                            <Button\n                              type=\"submit\"\n                              disabled={createCurriculumMutation.isPending}\n                            >\n                              {createCurriculumMutation.isPending ? 'Importing...' : 'Import Curriculum'}\n                            </Button>\n                          </div>\n                        </form>\n                      </DialogContent>\n                    </Dialog>\n                  </CardContent>\n                </Card>\n              ) : (\n                curriculums.map((curriculum: Curriculum) => (\n                  <Card key={curriculum.id} className=\"hover:shadow-lg transition-shadow\">\n                    <CardHeader>\n                      <div className=\"flex items-start justify-between\">\n                        <div>\n                          <CardTitle className=\"text-lg\">{curriculum.name}</CardTitle>\n                          <CardDescription className=\"mt-1\">\n                            {curriculum.publisher} • {curriculum.gradeLevel}\n                          </CardDescription>\n                        </div>\n                        <Badge className={subjectColors[curriculum.subject] || 'bg-gray-100 text-gray-800'}>\n                          {curriculum.subject}\n                        </Badge>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-3\">\n                        <div className=\"flex items-center text-sm text-gray-600\">\n                          <BookOpen className=\"mr-2 h-4 w-4\" />\n                          {curriculum.totalLessons} total lessons\n                        </div>\n                        {curriculum.description && (\n                          <p className=\"text-sm text-gray-600 line-clamp-2\">\n                            {curriculum.description}\n                          </p>\n                        )}\n                        <div className=\"flex space-x-2\">\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => {\n                              setSelectedCurriculum(curriculum)\n                              setAssignDialogOpen(true)\n                            }}\n                          >\n                            <Users className=\"mr-1 h-3 w-3\" />\n                            Assign to Student\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))\n              )}\n            </div>\n\n            {curriculums.length > 0 && (\n              <div className=\"flex justify-center\">\n                <Dialog open={importDialogOpen} onOpenChange={setImportDialogOpen}>\n                  <DialogTrigger asChild>\n                    <Button className=\"bg-blue-600 hover:bg-blue-700\">\n                      <Plus className=\"mr-2 h-4 w-4\" />\n                      Import Another Curriculum\n                    </Button>\n                  </DialogTrigger>\n                  <DialogContent className=\"sm:max-w-[500px]\">\n                    <DialogHeader>\n                      <DialogTitle>Import Curriculum</DialogTitle>\n                      <DialogDescription>\n                        Add your curriculum details to start tracking lessons and progress\n                      </DialogDescription>\n                    </DialogHeader>\n                    <form onSubmit={handleImportCurriculum} className=\"space-y-4\">\n                      <div className=\"grid grid-cols-2 gap-4\">\n                        <div>\n                          <Label htmlFor=\"name\">Curriculum Name</Label>\n                          <Input\n                            id=\"name\"\n                            name=\"name\"\n                            placeholder=\"Teaching Textbooks Algebra 1\"\n                            required\n                          />\n                        </div>\n                        <div>\n                          <Label htmlFor=\"subject\">Subject</Label>\n                          <Select name=\"subject\" required>\n                            <SelectTrigger>\n                              <SelectValue placeholder=\"Select subject\" />\n                            </SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"Math\">Math</SelectItem>\n                              <SelectItem value=\"Science\">Science</SelectItem>\n                              <SelectItem value=\"History\">History</SelectItem>\n                              <SelectItem value=\"Language Arts\">Language Arts</SelectItem>\n                              <SelectItem value=\"Reading\">Reading</SelectItem>\n                              <SelectItem value=\"Art\">Art</SelectItem>\n                            </SelectContent>\n                          </Select>\n                        </div>\n                      </div>\n                      <div className=\"grid grid-cols-2 gap-4\">\n                        <div>\n                          <Label htmlFor=\"publisher\">Publisher</Label>\n                          <Input\n                            id=\"publisher\"\n                            name=\"publisher\"\n                            placeholder=\"Teaching Textbooks\"\n                          />\n                        </div>\n                        <div>\n                          <Label htmlFor=\"gradeLevel\">Grade Level</Label>\n                          <Input\n                            id=\"gradeLevel\"\n                            name=\"gradeLevel\"\n                            placeholder=\"High School\"\n                          />\n                        </div>\n                      </div>\n                      <div>\n                        <Label htmlFor=\"totalLessons\">Total Lessons</Label>\n                        <Input\n                          id=\"totalLessons\"\n                          name=\"totalLessons\"\n                          type=\"number\"\n                          placeholder=\"150\"\n                          min=\"1\"\n                          required\n                        />\n                      </div>\n                      <div>\n                        <Label htmlFor=\"description\">Description</Label>\n                        <Textarea\n                          id=\"description\"\n                          name=\"description\"\n                          placeholder=\"Brief description of the curriculum content...\"\n                          rows={3}\n                        />\n                      </div>\n                      <div className=\"flex justify-end space-x-2\">\n                        <Button\n                          type=\"button\"\n                          variant=\"outline\"\n                          onClick={() => setImportDialogOpen(false)}\n                        >\n                          Cancel\n                        </Button>\n                        <Button\n                          type=\"submit\"\n                          disabled={createCurriculumMutation.isPending}\n                        >\n                          {createCurriculumMutation.isPending ? 'Importing...' : 'Import Curriculum'}\n                        </Button>\n                      </div>\n                    </form>\n                  </DialogContent>\n                </Dialog>\n              </div>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"import\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center\">\n                  <Upload className=\"mr-2 h-5 w-5\" />\n                  AI-Powered Curriculum Import\n                </CardTitle>\n                <CardDescription>\n                  Upload an image or paste text of your curriculum index and let AI extract all lessons automatically\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-6\">\n                  <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4\">\n                    <h3 className=\"font-semibold text-blue-900 mb-2\">🤖 AI Lesson Extraction</h3>\n                    <ul className=\"text-sm text-blue-800 space-y-1\">\n                      <li>• Upload a photo of your Teaching Textbooks lesson index</li>\n                      <li>• Paste text from any curriculum table of contents</li>\n                      <li>• AI automatically extracts lesson numbers, titles, and types</li>\n                      <li>• Review and edit before importing into your curriculum</li>\n                    </ul>\n                  </div>\n\n                  <div className=\"text-center p-8 border-2 border-dashed border-gray-300 rounded-lg\">\n                    <Upload className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">AI Lesson Extraction</h3>\n                    <p className=\"text-gray-500 mb-4\">Upload a textbook index or table of contents and AI will extract lessons automatically.</p>\n                    <p className=\"text-sm text-orange-600\">Feature temporarily disabled for maintenance</p>\n                  </div>\n\n                  {/* Show extracted lessons preview */}\n                  {extractedLessons.length > 0 && (\n                    <Card className=\"border-green-200 bg-green-50\">\n                      <CardHeader>\n                        <CardTitle className=\"text-green-800\">Ready to Import</CardTitle>\n                        <CardDescription className=\"text-green-700\">\n                          {extractedLessons.length} lessons extracted from {pendingCurriculumData?.name}\n                        </CardDescription>\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"text-sm text-green-700\">\n                            Click \"Import with AI Lessons\" below to create the curriculum with all extracted lessons\n                          </div>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => {\n                              setExtractedLessons([])\n                              setPendingCurriculumData(null)\n                            }}\n                          >\n                            Clear\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  )}\n\n                  <form onSubmit={handleImportCurriculum} className=\"space-y-4\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <Label htmlFor=\"name\">Curriculum Name *</Label>\n                        <Input\n                          id=\"name\"\n                          name=\"name\"\n                          placeholder=\"e.g., Saxon Math 7/6, Teaching Textbooks Algebra 1\"\n                          required\n                        />\n                      </div>\n                      <div>\n                        <Label htmlFor=\"subject\">Subject *</Label>\n                        <Select name=\"subject\" required>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Select subject\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"Math\">Math</SelectItem>\n                            <SelectItem value=\"Science\">Science</SelectItem>\n                            <SelectItem value=\"History\">History</SelectItem>\n                            <SelectItem value=\"Language Arts\">Language Arts</SelectItem>\n                            <SelectItem value=\"Reading\">Reading</SelectItem>\n                            <SelectItem value=\"Art\">Art</SelectItem>\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <Label htmlFor=\"publisher\">Publisher</Label>\n                        <Input\n                          id=\"publisher\"\n                          name=\"publisher\"\n                          placeholder=\"e.g., Saxon Publishers, Teaching Textbooks\"\n                        />\n                      </div>\n                      <div>\n                        <Label htmlFor=\"gradeLevel\">Grade Level</Label>\n                        <Input\n                          id=\"gradeLevel\"\n                          name=\"gradeLevel\"\n                          placeholder=\"e.g., 7th Grade, High School\"\n                        />\n                      </div>\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"totalLessons\">Total Lessons *</Label>\n                      <Input\n                        id=\"totalLessons\"\n                        name=\"totalLessons\"\n                        type=\"number\"\n                        placeholder=\"Enter the total number of lessons in your curriculum\"\n                        min=\"1\"\n                        required\n                      />\n                      <p className=\"text-sm text-gray-600 mt-1\">\n                        Count all lessons, quizzes, and tests in your curriculum\n                      </p>\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"description\">Description</Label>\n                      <Textarea\n                        id=\"description\"\n                        name=\"description\"\n                        placeholder=\"Brief description of what this curriculum covers...\"\n                        rows={3}\n                      />\n                    </div>\n\n                    <Button\n                      type=\"submit\"\n                      disabled={createCurriculumMutation.isPending}\n                      className={`w-full ${extractedLessons.length > 0 ? 'bg-green-600 hover:bg-green-700' : ''}`}\n                    >\n                      {createCurriculumMutation.isPending \n                        ? 'Importing...' \n                        : extractedLessons.length > 0 \n                          ? `Import with ${extractedLessons.length} AI Lessons`\n                          : 'Import Curriculum'\n                      }\n                    </Button>\n                  </form>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"assignments\" className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center\">\n                    <Settings className=\"mr-2 h-5 w-5\" />\n                    Configure Student Schedules\n                  </CardTitle>\n                  <CardDescription>\n                    Assign curriculums to students and set daily lesson amounts\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    {students.map((student: Student) => (\n                      <div key={student.id} className=\"border rounded-lg p-4\">\n                        <div className=\"flex items-center justify-between mb-3\">\n                          <div className=\"flex items-center\">\n                            <span className=\"text-2xl mr-3\">{student.avatar}</span>\n                            <div>\n                              <h3 className=\"font-semibold\">{student.fullName}</h3>\n                              <p className=\"text-sm text-gray-600\">{student.gradeLevel}</p>\n                            </div>\n                          </div>\n                          <Button\n                            size=\"sm\"\n                            onClick={() => {\n                              setSelectedCurriculum(curriculums[0] || null)\n                              setAssignDialogOpen(true)\n                            }}\n                          >\n                            <Plus className=\"mr-1 h-3 w-3\" />\n                            Assign\n                          </Button>\n                        </div>\n                        <div className=\"text-sm text-gray-600\">\n                          No curriculums assigned yet\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center\">\n                    <Calendar className=\"mr-2 h-5 w-5\" />\n                    Daily Schedule Preview\n                  </CardTitle>\n                  <CardDescription>\n                    See how lessons will be distributed across days\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"bg-gray-50 rounded-lg p-4 text-center\">\n                      <Clock className=\"h-8 w-8 mx-auto text-gray-400 mb-2\" />\n                      <p className=\"text-gray-600\">\n                        Assign curriculums to students to see their daily schedules\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n        </Tabs>\n\n        {/* Assignment Dialog */}\n        <Dialog open={assignDialogOpen} onOpenChange={setAssignDialogOpen}>\n          <DialogContent className=\"sm:max-w-[400px]\">\n            <DialogHeader>\n              <DialogTitle>Assign Curriculum</DialogTitle>\n              <DialogDescription>\n                Choose a student and set their daily lesson amount\n              </DialogDescription>\n            </DialogHeader>\n            <form onSubmit={handleAssignCurriculum} className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"studentId\">Student</Label>\n                <Select name=\"studentId\" required>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select a student\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {students.map((student: Student) => (\n                      <SelectItem key={student.id} value={student.id.toString()}>\n                        {student.avatar} {student.fullName} ({student.gradeLevel})\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              \n              <div>\n                <Label htmlFor=\"lessonsPerDay\">Lessons Per Day</Label>\n                <Select name=\"lessonsPerDay\" defaultValue=\"1\">\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"1\">1 lesson per day</SelectItem>\n                    <SelectItem value=\"2\">2 lessons per day</SelectItem>\n                    <SelectItem value=\"3\">3 lessons per day</SelectItem>\n                    <SelectItem value=\"4\">4 lessons per day</SelectItem>\n                  </SelectContent>\n                </Select>\n                <p className=\"text-sm text-gray-600 mt-1\">\n                  For math with several lessons before a quiz, choose 2 lessons per day\n                </p>\n              </div>\n\n              <div className=\"flex justify-end space-x-2\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setAssignDialogOpen(false)}\n                >\n                  Cancel\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={assignCurriculumMutation.isPending}\n                >\n                  {assignCurriculumMutation.isPending ? 'Assigning...' : 'Assign Curriculum'}\n                </Button>\n              </div>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </div>\n  )\n}","size_bytes":32181},"client/src/pages/Home.tsx":{"content":"import { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { User, GraduationCap, Heart } from \"lucide-react\";\n\nexport default function Home() {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-[#9CA3AF] via-[#A7B8A8] to-[#7FB3C4] flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-4xl\">\n        {/* App Header */}\n        <div className=\"text-center mb-12\">\n          <div className=\"flex items-center justify-center space-x-4 mb-4\">\n            <div className=\"w-16 h-16 bg-[#8BA88E] rounded-2xl flex items-center justify-center shadow-lg\">\n              <span className=\"text-3xl\">🍃</span>\n            </div>\n            <h1 \n              className=\"text-5xl font-bold text-[#4B5563]\" \n              style={{ fontFamily: 'Comic Sans MS, cursive' }}\n            >\n              Pebble Track\n            </h1>\n          </div>\n          <p className=\"text-xl text-[#6B7280] mb-2\">\n            Your Family's Homeschool Journey\n          </p>\n          <p className=\"text-lg text-[#6B7280]\">\n            Track progress, manage lessons, and celebrate learning together\n          </p>\n        </div>\n\n        {/* Login Options */}\n        <div className=\"grid md:grid-cols-2 gap-8\">\n          {/* Parent Login */}\n          <Card className=\"group hover:shadow-xl transition-all duration-300 border-2 hover:border-[#8BA88E]\">\n            <CardHeader className=\"text-center pb-4\">\n              <div className=\"w-20 h-20 bg-[#8BA88E] rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform\">\n                <User className=\"w-10 h-10 text-white\" />\n              </div>\n              <CardTitle \n                className=\"text-2xl text-[#4B5563]\" \n                style={{ fontFamily: 'Comic Sans MS, cursive' }}\n              >\n                Parent Login\n              </CardTitle>\n              <CardDescription className=\"text-base\">\n                Manage your family's homeschool curriculum, track student progress, and plan lessons\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"text-center\">\n              <div className=\"space-y-3 mb-6\">\n                <div className=\"flex items-center text-sm text-[#6B7280]\">\n                  <Heart className=\"w-4 h-4 mr-2 text-[#8BA88E]\" />\n                  Create and manage student profiles\n                </div>\n                <div className=\"flex items-center text-sm text-[#6B7280]\">\n                  <GraduationCap className=\"w-4 h-4 mr-2 text-[#8BA88E]\" />\n                  Plan lessons and assignments\n                </div>\n                <div className=\"flex items-center text-sm text-[#6B7280]\">\n                  <User className=\"w-4 h-4 mr-2 text-[#8BA88E]\" />\n                  Monitor family progress\n                </div>\n              </div>\n              <Link href=\"/parent/login\">\n                <Button \n                  className=\"w-full bg-[#8BA88E] hover:bg-[#7A9A7D] text-white text-lg py-6\"\n                  style={{ fontFamily: 'Comic Sans MS, cursive' }}\n                >\n                  Parent Sign In\n                </Button>\n              </Link>\n              <p className=\"text-xs text-[#9CA3AF] mt-3\">\n                New family? <Link href=\"/parent/register\" className=\"text-[#8BA88E] hover:underline\">Create Account</Link>\n              </p>\n            </CardContent>\n          </Card>\n\n          {/* Student Login */}\n          <Card className=\"group hover:shadow-xl transition-all duration-300 border-2 hover:border-[#7FB3C4]\">\n            <CardHeader className=\"text-center pb-4\">\n              <div className=\"w-20 h-20 bg-[#7FB3C4] rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform\">\n                <GraduationCap className=\"w-10 h-10 text-white\" />\n              </div>\n              <CardTitle \n                className=\"text-2xl text-[#4B5563]\" \n                style={{ fontFamily: 'Comic Sans MS, cursive' }}\n              >\n                Student Login\n              </CardTitle>\n              <CardDescription className=\"text-base\">\n                Access your personalized learning dashboard and complete your daily tasks\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"text-center\">\n              <div className=\"space-y-3 mb-6\">\n                <div className=\"flex items-center text-sm text-[#6B7280]\">\n                  <span className=\"w-4 h-4 mr-2 text-2xl\">📚</span>\n                  View your daily assignments\n                </div>\n                <div className=\"flex items-center text-sm text-[#6B7280]\">\n                  <span className=\"w-4 h-4 mr-2 text-2xl\">⭐</span>\n                  Track your progress and achievements\n                </div>\n                <div className=\"flex items-center text-sm text-[#6B7280]\">\n                  <span className=\"w-4 h-4 mr-2 text-2xl\">🎯</span>\n                  Complete fun learning activities\n                </div>\n              </div>\n              <Link href=\"/student/login\">\n                <Button \n                  className=\"w-full bg-[#7FB3C4] hover:bg-[#6FA3B4] text-white text-lg py-6\"\n                  style={{ fontFamily: 'Comic Sans MS, cursive' }}\n                >\n                  Student Sign In\n                </Button>\n              </Link>\n              <p className=\"text-xs text-[#9CA3AF] mt-3\">\n                Ask your parent for your PIN number\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Features Preview */}\n        <div className=\"mt-16 text-center\">\n          <h2 \n            className=\"text-3xl font-bold text-[#4B5563] mb-8\" \n            style={{ fontFamily: 'Comic Sans MS, cursive' }}\n          >\n            Why Families Love Pebble Track\n          </h2>\n          <div className=\"grid md:grid-cols-3 gap-6\">\n            <div className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6\">\n              <span className=\"text-4xl mb-4 block\">🌱</span>\n              <h3 className=\"font-bold text-[#4B5563] mb-2\">Growth Focused</h3>\n              <p className=\"text-sm text-[#6B7280]\">\n                Track each child's unique learning journey with personalized progress monitoring\n              </p>\n            </div>\n            <div className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6\">\n              <span className=\"text-4xl mb-4 block\">👨‍👩‍👧‍👦</span>\n              <h3 className=\"font-bold text-[#4B5563] mb-2\">Family Centered</h3>\n              <p className=\"text-sm text-[#6B7280]\">\n                Designed specifically for homeschool families with multiple children\n              </p>\n            </div>\n            <div className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6\">\n              <span className=\"text-4xl mb-4 block\">📱</span>\n              <h3 className=\"font-bold text-[#4B5563] mb-2\">Mobile Ready</h3>\n              <p className=\"text-sm text-[#6B7280]\">\n                Access your homeschool tools anywhere with our mobile-friendly design\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":7322},"client/src/pages/Landing.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { School, Users, Calendar, BookOpen, Star, ArrowRight } from \"lucide-react\";\n\nexport default function Landing() {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100\">\n      {/* Header */}\n      <header className=\"border-b bg-white/80 backdrop-blur-sm\">\n        <div className=\"container mx-auto px-4 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center space-x-2\">\n            <School className=\"h-8 w-8 text-blue-600\" />\n            <span className=\"text-xl font-bold text-gray-900\">Homeschool Planner</span>\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            <Button variant=\"ghost\" asChild>\n              <a href=\"/forgot-password\">Forgot Password?</a>\n            </Button>\n            <Button asChild>\n              <a href=\"/api/login\">Sign In</a>\n            </Button>\n          </div>\n        </div>\n      </header>\n\n      {/* Hero Section */}\n      <section className=\"container mx-auto px-4 py-16 text-center\">\n        <div className=\"max-w-3xl mx-auto\">\n          <h1 className=\"text-4xl md:text-6xl font-bold text-gray-900 mb-6\">\n            Your Complete\n            <span className=\"text-blue-600\"> Homeschool</span>\n            <br />\n            Management Solution\n          </h1>\n          <p className=\"text-xl text-gray-600 mb-8\">\n            Streamline your homeschool journey with AI-powered curriculum management, \n            student tracking, and comprehensive planning tools designed for modern families.\n          </p>\n          <Button size=\"lg\" className=\"text-lg px-8 py-3\" asChild>\n            <a href=\"/api/login\">\n              Get Started Free\n              <ArrowRight className=\"ml-2 h-5 w-5\" />\n            </a>\n          </Button>\n        </div>\n      </section>\n\n      {/* Features Grid */}\n      <section className=\"container mx-auto px-4 py-16\">\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">\n            Everything You Need to Succeed\n          </h2>\n          <p className=\"text-lg text-gray-600\">\n            Powerful tools designed specifically for homeschooling families\n          </p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n          <Card className=\"border-0 shadow-lg\">\n            <CardHeader>\n              <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4\">\n                <BookOpen className=\"h-6 w-6 text-blue-600\" />\n              </div>\n              <CardTitle>AI Curriculum Extraction</CardTitle>\n              <CardDescription>\n                Upload photos of textbook indexes and let AI automatically extract lessons and create structured curricula\n              </CardDescription>\n            </CardHeader>\n          </Card>\n\n          <Card className=\"border-0 shadow-lg\">\n            <CardHeader>\n              <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4\">\n                <Users className=\"h-6 w-6 text-green-600\" />\n              </div>\n              <CardTitle>Student Progress Tracking</CardTitle>\n              <CardDescription>\n                Monitor each child's progress with detailed analytics, completion rates, and personalized learning paths\n              </CardDescription>\n            </CardHeader>\n          </Card>\n\n          <Card className=\"border-0 shadow-lg\">\n            <CardHeader>\n              <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4\">\n                <Calendar className=\"h-6 w-6 text-purple-600\" />\n              </div>\n              <CardTitle>Weekly Planner</CardTitle>\n              <CardDescription>\n                Create beautiful, printable weekly plans that adapt to your family's schedule and learning style\n              </CardDescription>\n            </CardHeader>\n          </Card>\n\n          <Card className=\"border-0 shadow-lg\">\n            <CardHeader>\n              <div className=\"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mb-4\">\n                <Star className=\"h-6 w-6 text-orange-600\" />\n              </div>\n              <CardTitle>Gamified Learning</CardTitle>\n              <CardDescription>\n                Keep students motivated with XP points, levels, and achievements for completed assignments\n              </CardDescription>\n            </CardHeader>\n          </Card>\n\n          <Card className=\"border-0 shadow-lg\">\n            <CardHeader>\n              <div className=\"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mb-4\">\n                <School className=\"h-6 w-6 text-red-600\" />\n              </div>\n              <CardTitle>Multi-Student Management</CardTitle>\n              <CardDescription>\n                Manage multiple children with individual profiles, grade levels, and customized learning plans\n              </CardDescription>\n            </CardHeader>\n          </Card>\n\n          <Card className=\"border-0 shadow-lg\">\n            <CardHeader>\n              <div className=\"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center mb-4\">\n                <BookOpen className=\"h-6 w-6 text-teal-600\" />\n              </div>\n              <CardTitle>Printable Resources</CardTitle>\n              <CardDescription>\n                Generate beautiful printable planners, worksheets, and progress reports for offline use\n              </CardDescription>\n            </CardHeader>\n          </Card>\n        </div>\n      </section>\n\n      {/* CTA Section */}\n      <section className=\"bg-blue-600 text-white py-16\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <h2 className=\"text-3xl font-bold mb-4\">\n            Ready to Transform Your Homeschool Experience?\n          </h2>\n          <p className=\"text-xl mb-8 opacity-90\">\n            Join thousands of families who have streamlined their homeschool journey\n          </p>\n          <Button size=\"lg\" variant=\"secondary\" className=\"text-lg px-8 py-3\" asChild>\n            <a href=\"/api/login\">\n              Start Your Free Account\n              <ArrowRight className=\"ml-2 h-5 w-5\" />\n            </a>\n          </Button>\n        </div>\n      </section>\n\n      {/* Footer */}\n      <footer className=\"bg-gray-900 text-white py-12\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <div className=\"flex items-center justify-center space-x-2 mb-4\">\n            <School className=\"h-6 w-6\" />\n            <span className=\"text-lg font-semibold\">Homeschool Planner</span>\n          </div>\n          <p className=\"text-gray-400\">\n            Empowering families to create amazing learning experiences at home\n          </p>\n        </div>\n      </footer>\n    </div>\n  );\n}","size_bytes":6953},"client/src/pages/Login.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient } from \"@/lib/queryClient\";\n\nconst loginSchema = z.object({\n  email: z.string().email(\"Please enter a valid email address\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\n});\n\ntype LoginFormData = z.infer<typeof loginSchema>;\n\nexport default function Login() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  \n  const form = useForm<LoginFormData>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n    },\n  });\n\n  const loginMutation = useMutation({\n    mutationFn: async (data: LoginFormData) => {\n      const response = await fetch(\"/api/auth/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n        body: JSON.stringify(data),\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Login failed\");\n      }\n      \n      return response.json();\n    },\n    onSuccess: async () => {\n      // Invalidate auth query to trigger re-fetch\n      await queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      // Wait a moment for the query to update\n      setTimeout(() => {\n        toast({\n          title: \"Welcome back!\",\n          description: \"You've successfully logged in.\",\n        });\n        setLocation(\"/\");\n      }, 100);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Login failed\",\n        description: error.message || \"Please check your email and password.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: LoginFormData) => {\n    loginMutation.mutate(data);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-[#9CA3AF] via-[#A7B8A8] to-[#7FB3C4] flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <CardTitle className=\"text-2xl font-bold text-[#4B5563]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n            Welcome to Pebble Track\n          </CardTitle>\n          <CardDescription>\n            Sign in to manage your homeschool journey\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Email</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"email\" \n                        placeholder=\"your@email.com\" \n                        {...field} \n                        className=\"text-lg\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"password\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Password</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"password\" \n                        placeholder=\"••••••••\" \n                        {...field} \n                        className=\"text-lg\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <Button \n                type=\"submit\" \n                className=\"w-full bg-[#22C55E] hover:bg-[#16A34A] text-white text-lg py-3\"\n                disabled={loginMutation.isPending}\n              >\n                {loginMutation.isPending ? \"Signing in...\" : \"Sign In\"}\n              </Button>\n            </form>\n          </Form>\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-sm text-gray-600\">\n              Don't have an account?{\" \"}\n              <button\n                onClick={() => setLocation(\"/register\")}\n                className=\"text-[#22C55E] hover:underline font-medium\"\n              >\n                Create Family Account\n              </button>\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":5033},"client/src/pages/ParentLogin.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useLocation, Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { ArrowLeft, User } from \"lucide-react\";\n\nconst loginSchema = z.object({\n  email: z.string().email(\"Please enter a valid email address\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\n});\n\ntype LoginFormData = z.infer<typeof loginSchema>;\n\nexport default function ParentLogin() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  \n  const form = useForm<LoginFormData>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n    },\n  });\n\n  const loginMutation = useMutation({\n    mutationFn: async (data: LoginFormData) => {\n      const response = await fetch(\"/api/auth/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n        body: JSON.stringify(data),\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Login failed\");\n      }\n      \n      return response.json();\n    },\n    onSuccess: async () => {\n      // Invalidate auth query to trigger re-fetch\n      await queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      // Wait a moment for the query to update\n      setTimeout(() => {\n        toast({\n          title: \"Welcome back!\",\n          description: \"You've successfully logged in.\",\n        });\n        setLocation(\"/\");\n      }, 100);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Login failed\",\n        description: error.message || \"Please check your email and password.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: LoginFormData) => {\n    loginMutation.mutate(data);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-[#9CA3AF] via-[#A7B8A8] to-[#7FB3C4] flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-md\">\n        {/* Back Button */}\n        <Link href=\"/\">\n          <Button variant=\"ghost\" className=\"mb-4 text-[#4B5563] hover:text-[#8BA88E]\">\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Back to Home\n          </Button>\n        </Link>\n\n        <Card className=\"border-2 border-[#8BA88E]/20\">\n          <CardHeader className=\"text-center\">\n            <div className=\"w-16 h-16 bg-[#8BA88E] rounded-full flex items-center justify-center mx-auto mb-4\">\n              <User className=\"w-8 h-8 text-white\" />\n            </div>\n            <CardTitle className=\"text-2xl font-bold text-[#4B5563]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n              Parent Login\n            </CardTitle>\n            <CardDescription>\n              Sign in to manage your family's homeschool journey\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Email</FormLabel>\n                      <FormControl>\n                        <Input \n                          type=\"email\" \n                          placeholder=\"your@email.com\" \n                          {...field} \n                          className=\"text-lg\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"password\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Password</FormLabel>\n                      <FormControl>\n                        <Input \n                          type=\"password\" \n                          placeholder=\"Enter your password\" \n                          {...field} \n                          className=\"text-lg\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <Button \n                  type=\"submit\" \n                  className=\"w-full bg-[#8BA88E] hover:bg-[#7A9A7D] text-white text-lg py-6\"\n                  disabled={loginMutation.isPending}\n                  style={{ fontFamily: 'Comic Sans MS, cursive' }}\n                >\n                  {loginMutation.isPending ? \"Signing in...\" : \"Sign In\"}\n                </Button>\n              </form>\n            </Form>\n            \n            <div className=\"mt-6 text-center\">\n              <p className=\"text-sm text-[#6B7280]\">\n                Don't have an account?{\" \"}\n                <Link href=\"/parent/register\" className=\"text-[#8BA88E] hover:underline font-medium\">\n                  Create Family Account\n                </Link>\n              </p>\n            </div>\n\n            {/* Demo Credentials */}\n            <div className=\"mt-6 p-4 bg-[#F3F4F6] rounded-lg\">\n              <p className=\"text-xs text-[#6B7280] mb-2\">Demo Credentials:</p>\n              <p className=\"text-xs text-[#4B5563]\">Email: parent@test.com</p>\n              <p className=\"text-xs text-[#4B5563]\">Password: password123</p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":6111},"client/src/pages/Planner.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { \n  Calendar,\n  ChevronLeft,\n  ChevronRight,\n  Plus,\n  Edit,\n  Check,\n  X,\n  GripVertical,\n  Clock,\n  BookOpen,\n  CheckCircle,\n  AlertCircle,\n  Printer\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { getAvatarForStudent } from \"@/lib/avatars\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { format, addWeeks, subWeeks, startOfWeek, addDays } from \"date-fns\";\n\ninterface PlannerTask {\n  id: string;\n  studentId: number;\n  day: string;\n  time: string;\n  subject: string;\n  title: string;\n  description: string;\n  status: 'pending' | 'completed' | 'in_progress';\n  type: 'lesson' | 'assignment' | 'activity' | 'assessment';\n}\n\nconst Planner = () => {\n  const [currentWeek, setCurrentWeek] = useState(new Date());\n  const [editingTask, setEditingTask] = useState<PlannerTask | null>(null);\n  const [isTaskModalOpen, setIsTaskModalOpen] = useState(false);\n  const [selectedCell, setSelectedCell] = useState<{studentId: number, day: string} | null>(null);\n  const [isPrintMode, setIsPrintMode] = useState(false);\n  const { toast } = useToast();\n\n  // Get current authenticated user\n  const { data: currentUser } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  // Fetch family students\n  const { data: students = [] } = useQuery({\n    queryKey: [\"/api/auth/students\"],\n    enabled: !!currentUser && (currentUser as any)?.role === \"parent\",\n  });\n\n  // Ensure students is always an array\n  const studentList = Array.isArray(students) ? students : [];\n\n  // Get week dates\n  const weekStart = startOfWeek(currentWeek, { weekStartsOn: 1 }); // Monday start\n  const weekDays = Array.from({ length: 5 }, (_, i) => addDays(weekStart, i)); // Monday to Friday\n\n  // Sample planner data with proper subject hierarchy\n  const [plannerTasks, setPlannerTasks] = useState<PlannerTask[]>([\n    {\n      id: '1',\n      studentId: 1, // Bryton\n      day: 'Monday',\n      time: '9:00 AM',\n      subject: 'Math K-7',\n      title: 'Multiplication Tables',\n      description: 'Practice times tables 6-8',\n      status: 'completed',\n      type: 'lesson'\n    },\n    {\n      id: '2',\n      studentId: 1,\n      day: 'Monday',\n      time: '10:30 AM',\n      subject: 'Elementary Science',\n      title: 'Plant Growth',\n      description: 'Observe and record plant changes',\n      status: 'in_progress',\n      type: 'activity'\n    },\n    {\n      id: '3',\n      studentId: 2, // Riley\n      day: 'Monday',\n      time: '9:00 AM',\n      subject: 'Reading K-5',\n      title: 'Chapter 3 Discussion',\n      description: 'Read and discuss main characters',\n      status: 'pending',\n      type: 'lesson'\n    },\n    {\n      id: '4',\n      studentId: 1,\n      day: 'Tuesday',\n      time: '9:00 AM',\n      subject: 'History',\n      title: 'Ancient Egypt',\n      description: 'Learn about pyramids and pharaohs',\n      status: 'pending',\n      type: 'lesson'\n    },\n    {\n      id: '5',\n      studentId: 3, // Levi\n      day: 'Wednesday',\n      time: '2:00 PM',\n      subject: 'Art',\n      title: 'Nature Drawing',\n      description: 'Draw trees and flowers from garden',\n      status: 'pending',\n      type: 'activity'\n    }\n  ]);\n\n  const getTasksForCell = (studentId: number, day: string) => {\n    return plannerTasks.filter(task => \n      task.studentId === studentId && task.day === day\n    ).sort((a, b) => a.time.localeCompare(b.time));\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'completed': return 'bg-[#D9E5D1] text-[#8BA88E] border-[#8BA88E]';\n      case 'in_progress': return 'bg-yellow-100 text-yellow-700 border-yellow-300';\n      case 'pending': return 'bg-gray-100 text-gray-700 border-gray-300';\n      default: return 'bg-gray-100 text-gray-700 border-gray-300';\n    }\n  };\n\n  const handlePrint = () => {\n    setIsPrintMode(true);\n    setTimeout(() => {\n      window.print();\n      setIsPrintMode(false);\n    }, 100);\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'completed': return <CheckCircle className=\"h-3 w-3\" />;\n      case 'in_progress': return <Clock className=\"h-3 w-3\" />;\n      case 'pending': return <AlertCircle className=\"h-3 w-3\" />;\n      default: return <AlertCircle className=\"h-3 w-3\" />;\n    }\n  };\n\n  const getSubjectColor = (subject: string) => {\n    const colors: Record<string, string> = {\n      'Math': '#8BA88E',\n      'Science': '#A8C7DD',\n      'Reading': '#D9E5D1',\n      'History': '#F5F2EA',\n      'Art': '#7E8A97',\n      'Music': '#A8C7DD',\n      'PE': '#8BA88E'\n    };\n    return colors[subject] || '#F5F2EA';\n  };\n\n  const handleAddTask = (studentId: number, day: string) => {\n    setSelectedCell({ studentId, day });\n    setEditingTask(null);\n    setIsTaskModalOpen(true);\n  };\n\n  const handleEditTask = (task: PlannerTask) => {\n    setEditingTask(task);\n    setSelectedCell({ studentId: task.studentId, day: task.day });\n    setIsTaskModalOpen(true);\n  };\n\n  const handleSaveTask = (taskData: Partial<PlannerTask>) => {\n    if (editingTask) {\n      // Update existing task\n      setPlannerTasks(prev => prev.map(task => \n        task.id === editingTask.id \n          ? { ...task, ...taskData }\n          : task\n      ));\n      toast({\n        title: \"Task updated\",\n        description: \"The task has been successfully updated.\",\n      });\n    } else {\n      // Add new task\n      const newTask: PlannerTask = {\n        id: Date.now().toString(),\n        studentId: selectedCell!.studentId,\n        day: selectedCell!.day,\n        time: '9:00 AM', // Default time since we removed time selection\n        subject: taskData.subject || 'Math K-7',\n        title: taskData.title || 'New Task',\n        description: taskData.description || '',\n        status: 'pending',\n        type: taskData.type || 'lesson'\n      };\n      setPlannerTasks(prev => [...prev, newTask]);\n      toast({\n        title: \"Task added\",\n        description: \"A new task has been added to the planner.\",\n      });\n    }\n    setIsTaskModalOpen(false);\n    setEditingTask(null);\n    setSelectedCell(null);\n  };\n\n  const handleStatusChange = (taskId: string, newStatus: 'pending' | 'completed' | 'in_progress') => {\n    setPlannerTasks(prev => prev.map(task => \n      task.id === taskId \n        ? { ...task, status: newStatus }\n        : task\n    ));\n  };\n\n  const handleDeleteTask = (taskId: string) => {\n    setPlannerTasks(prev => prev.filter(task => task.id !== taskId));\n    toast({\n      title: \"Task deleted\",\n      description: \"The task has been removed from the planner.\",\n    });\n  };\n\n  const navigateWeek = (direction: 'prev' | 'next') => {\n    setCurrentWeek(prev => direction === 'next' ? addWeeks(prev, 1) : subWeeks(prev, 1));\n  };\n\n  if (studentList.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <div className=\"text-center\">\n          <h3 className=\"text-lg font-semibold text-[#3E4A59] mb-2\">No Students Found</h3>\n          <p className=\"text-[#7E8A97]\">Add students to start planning their weekly schedule.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6 p-6 print-planner\">\n      {/* Print Header - only visible when printing */}\n      <div className=\"hidden print:block print-header\">\n        <h1>Weekly Learning Planner</h1>\n        <p>{format(weekStart, 'MMM d')} - {format(addDays(weekStart, 4), 'MMM d, yyyy')} (Week {format(weekStart, 'w')})</p>\n      </div>\n\n      {/* Screen Header */}\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 print:hidden\">\n        <div>\n          <h2 className=\"text-3xl font-bold text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n            Weekly Planner\n          </h2>\n          <p className=\"text-[#7E8A97] mt-1\">\n            Plan and track your family's weekly learning schedule\n          </p>\n        </div>\n        \n        <div className=\"flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-4 mt-4 md:mt-0\">\n          {/* Print Button */}\n          <Button \n            variant=\"outline\" \n            onClick={() => window.print()}\n            className=\"border-[#8BA88E] text-[#8BA88E] hover:bg-[#D9E5D1] print:hidden\"\n          >\n            <Printer className=\"h-4 w-4 mr-2\" />\n            Print Planner\n          </Button>\n          \n          {/* Week Navigation */}\n          <div className=\"flex items-center space-x-4\">\n            <Button \n              variant=\"outline\" \n              onClick={() => navigateWeek('prev')}\n              className=\"border-[#D9E5D1] text-[#7E8A97] hover:bg-[#F5F2EA] print:hidden\"\n            >\n              <ChevronLeft className=\"h-4 w-4\" />\n            </Button>\n            \n            <div className=\"text-center\">\n              <h3 className=\"font-semibold text-[#3E4A59]\">\n                {format(weekStart, 'MMM d')} - {format(addDays(weekStart, 4), 'MMM d, yyyy')}\n              </h3>\n              <p className=\"text-sm text-[#7E8A97]\">Week {format(weekStart, 'w')}</p>\n            </div>\n            \n            <Button \n              variant=\"outline\" \n              onClick={() => navigateWeek('next')}\n              className=\"border-[#D9E5D1] text-[#7E8A97] hover:bg-[#F5F2EA] print:hidden\"\n            >\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Planner Grid */}\n      <Card className=\"border-[#D9E5D1]\">\n        <CardContent className=\"p-0\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full print-grid\">\n              <thead>\n                <tr className=\"border-b border-[#D9E5D1]\">\n                  <th className=\"p-4 text-left font-semibold text-[#3E4A59] bg-[#F5F2EA] min-w-[120px]\">\n                    Day\n                  </th>\n                  {studentList.map((student: any) => {\n                    const avatar = getAvatarForStudent(student.fullName);\n                    return (\n                      <th \n                        key={student.id} \n                        className=\"p-4 text-center font-semibold text-[#3E4A59] bg-[#F5F2EA] min-w-[280px] student-header print-no-break\"\n                      >\n                        <div className=\"flex items-center justify-center space-x-2\">\n                          <div \n                            className=\"w-8 h-8 rounded-full flex items-center justify-center text-sm\"\n                            style={{ backgroundColor: avatar.backgroundColor }}\n                          >\n                            {avatar.emoji}\n                          </div>\n                          <div>\n                            <div className=\"font-medium\">{student.fullName}</div>\n                            <div className=\"text-xs text-[#7E8A97] font-normal\">{student.gradeLevel}</div>\n                          </div>\n                        </div>\n                      </th>\n                    );\n                  })}\n                </tr>\n              </thead>\n              <tbody>\n                {weekDays.map((date, dayIndex) => {\n                  const dayName = format(date, 'EEEE');\n                  return (\n                    <tr key={dayIndex} className=\"border-b border-[#D9E5D1]\">\n                      <td className=\"p-4 bg-[#F5F2EA] font-medium text-[#3E4A59] min-h-[200px] align-top\">\n                        <div>\n                          <div className=\"font-semibold\">{dayName}</div>\n                          <div className=\"text-sm text-[#7E8A97]\">{format(date, 'MMM d')}</div>\n                        </div>\n                      </td>\n                      {studentList.map((student: any) => {\n                        const cellTasks = getTasksForCell(student.id, dayName);\n                        return (\n                          <td \n                            key={`${dayIndex}-${student.id}`} \n                            className=\"p-2 align-top min-h-[200px] bg-white hover:bg-[#F5F2EA] transition-colors border-r border-[#D9E5D1] print-no-break\"\n                          >\n                            <div className=\"space-y-2 min-h-[180px]\">\n                              {cellTasks.map((task) => (\n                                <div\n                                  key={task.id}\n                                  className={`p-3 rounded-lg border cursor-pointer hover:shadow-sm transition-shadow print-task print-task-${task.status}`}\n                                  style={{ \n                                    backgroundColor: `${getSubjectColor(task.subject)}15`,\n                                    borderColor: getSubjectColor(task.subject)\n                                  }}\n                                  onClick={() => handleEditTask(task)}\n                                >\n                                  <div className=\"flex items-start justify-between mb-2\">\n                                    <div className=\"flex items-center space-x-2\">\n                                      <Badge \n                                        className={`text-xs px-2 py-1 ${getStatusColor(task.status)} print:hidden`}\n                                        onClick={(e) => {\n                                          e.stopPropagation();\n                                          const nextStatus = task.status === 'pending' ? 'in_progress' \n                                            : task.status === 'in_progress' ? 'completed' \n                                            : 'pending';\n                                          handleStatusChange(task.id, nextStatus);\n                                        }}\n                                      >\n                                        {getStatusIcon(task.status)}\n                                        <span className=\"ml-1 capitalize\">{task.status.replace('_', ' ')}</span>\n                                      </Badge>\n                                      {/* Print-only status indicator */}\n                                      <span className=\"hidden print:inline-block print-task-time text-xs\">\n                                        {task.status === 'completed' ? '✓' : task.status === 'in_progress' ? '●' : '○'} {task.time}\n                                      </span>\n                                    </div>\n                                    <span className=\"text-xs text-[#7E8A97] print:hidden\">{task.time}</span>\n                                  </div>\n                                  \n                                  <div className=\"space-y-1\">\n                                    <div className=\"flex items-center space-x-2\">\n                                      <div \n                                        className=\"w-3 h-3 rounded-full print:hidden\" \n                                        style={{ backgroundColor: getSubjectColor(task.subject) }}\n                                      />\n                                      <span className=\"text-xs font-medium text-[#7E8A97] print-task-subject\">{task.subject}</span>\n                                    </div>\n                                    <h4 className=\"font-medium text-[#3E4A59] text-sm print-task-title\">{task.title}</h4>\n                                    {task.description && (\n                                      <p className=\"text-xs text-[#7E8A97] line-clamp-2 print:line-clamp-none\">{task.description}</p>\n                                    )}\n                                  </div>\n                                </div>\n                              ))}\n                              \n                              {/* Add Task Button */}\n                              <Button\n                                variant=\"ghost\"\n                                className=\"w-full h-12 border-2 border-dashed border-[#D9E5D1] text-[#7E8A97] hover:border-[#8BA88E] hover:text-[#8BA88E] hover:bg-[#D9E5D1]\"\n                                onClick={() => handleAddTask(student.id, dayName)}\n                              >\n                                <Plus className=\"h-4 w-4 mr-2\" />\n                                Add Task\n                              </Button>\n                            </div>\n                          </td>\n                        );\n                      })}\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Print Footer - only visible when printing */}\n      <div className=\"hidden print:block print-footer\">\n        <p>Generated by Pebble Track • {format(new Date(), 'MMMM d, yyyy')}</p>\n      </div>\n\n      {/* Task Modal */}\n      <TaskModal \n        isOpen={isTaskModalOpen}\n        onClose={() => {\n          setIsTaskModalOpen(false);\n          setEditingTask(null);\n          setSelectedCell(null);\n        }}\n        task={editingTask}\n        onSave={handleSaveTask}\n        onDelete={editingTask ? () => handleDeleteTask(editingTask.id) : undefined}\n      />\n    </div>\n  );\n};\n\n// Task Modal Component\ninterface TaskModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  task: PlannerTask | null;\n  onSave: (taskData: Partial<PlannerTask>) => void;\n  onDelete?: () => void;\n}\n\nconst TaskModal = ({ isOpen, onClose, task, onSave, onDelete }: TaskModalProps) => {\n  const [formData, setFormData] = useState({\n    subject: task?.subject || 'Math K',\n    title: task?.title || '',\n    description: task?.description || '',\n    type: task?.type || 'lesson'\n  });\n\n  const [expandedCategories, setExpandedCategories] = useState<string[]>(['Math']);\n  const [customSubject, setCustomSubject] = useState('');\n  const [showCustomInput, setShowCustomInput] = useState(false);\n\n  const subjectHierarchy = {\n    'Math': [\n      'Math K',\n      'Math 1st Grade',\n      'Math 2nd Grade', \n      'Math 3rd Grade',\n      'Math 4th Grade',\n      'Math 5th Grade',\n      'Math 6th Grade',\n      'Math 7th Grade',\n      'Pre-Algebra',\n      'Algebra I',\n      'Geometry',\n      'Algebra II',\n      'Trigonometry',\n      'Pre-Calculus',\n      'Calculus',\n      'Custom Math Class'\n    ],\n    'Science': [\n      'Science K',\n      'Science 1st Grade',\n      'Science 2nd Grade',\n      'Science 3rd Grade', \n      'Science 4th Grade',\n      'Science 5th Grade',\n      'Science 6th Grade',\n      'Science 7th Grade',\n      'Science 8th Grade',\n      'Earth Science',\n      'Life Science',\n      'Physical Science',\n      'Biology',\n      'Chemistry',\n      'Physics',\n      'Environmental Science',\n      'Custom Science Class'\n    ],\n    'ELA': [\n      'Reading K',\n      'Reading 1st Grade',\n      'Reading 2nd Grade',\n      'Reading 3rd Grade',\n      'Reading 4th Grade', \n      'Reading 5th Grade',\n      'Language Arts 6th Grade',\n      'Language Arts 7th Grade',\n      'Language Arts 8th Grade',\n      'English 9',\n      'English 10',\n      'English 11',\n      'English 12',\n      'Creative Writing',\n      'Literature',\n      'Custom ELA Class'\n    ],\n    'History': [\n      'History K-5',\n      'World History',\n      'American History',\n      'Ancient History',\n      'Modern History',\n      'Government',\n      'Economics',\n      'Custom History Class'\n    ],\n    'Electives': [\n      'Art',\n      'Music',\n      'PE',\n      'Foreign Language',\n      'Drama',\n      'Technology',\n      'Life Skills',\n      'Custom Elective'\n    ]\n  };\n\n  const toggleCategory = (category: string) => {\n    setExpandedCategories(prev => \n      prev.includes(category) \n        ? prev.filter(c => c !== category)\n        : [...prev, category]\n    );\n  };\n\n  const handleSubjectSelect = (subject: string) => {\n    if (subject.startsWith('Custom')) {\n      setShowCustomInput(true);\n      setCustomSubject('');\n    } else {\n      setFormData(prev => ({ ...prev, subject }));\n      setShowCustomInput(false);\n    }\n  };\n\n  const handleCustomSubjectSave = () => {\n    if (customSubject.trim()) {\n      setFormData(prev => ({ ...prev, subject: customSubject.trim() }));\n      setShowCustomInput(false);\n      setCustomSubject('');\n    }\n  };\n\n  const handleSave = () => {\n    if (!formData.title.trim()) return;\n    onSave(formData);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[400px] max-h-[85vh] flex flex-col\">\n        <DialogHeader className=\"flex-shrink-0\">\n          <DialogTitle style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n            {task ? 'Edit Task' : 'Add New Task'}\n          </DialogTitle>\n          <DialogDescription>\n            {task ? 'Update the task details' : 'Create a new task for the selected day'}\n          </DialogDescription>\n        </DialogHeader>\n        \n        <div className=\"space-y-3 overflow-y-auto flex-1\">\n          <div>\n            <label className=\"text-sm font-medium text-[#3E4A59]\">Subject</label>\n            <div className=\"border rounded-md p-2 max-h-32 overflow-y-auto bg-white text-xs\">\n              {Object.entries(subjectHierarchy).map(([category, subjects]) => (\n                <div key={category} className=\"mb-1\">\n                  <button\n                    type=\"button\"\n                    onClick={() => toggleCategory(category)}\n                    className=\"flex items-center w-full text-left px-1 py-1 text-xs font-semibold text-[#3E4A59] bg-[#F5F2EA] rounded hover:bg-[#E8E2D5] transition-colors\"\n                  >\n                    <span className=\"mr-1 text-xs\">\n                      {expandedCategories.includes(category) ? '▼' : '▶'}\n                    </span>\n                    {category}\n                  </button>\n                  {expandedCategories.includes(category) && (\n                    <div className=\"mt-1 ml-3 space-y-0.5\">\n                      {subjects.map(subject => (\n                        <button\n                          key={subject}\n                          type=\"button\"\n                          onClick={() => handleSubjectSelect(subject)}\n                          className={`block w-full text-left px-2 py-0.5 text-xs rounded transition-colors ${\n                            formData.subject === subject\n                              ? 'bg-[#C3A06D] text-white'\n                              : subject.startsWith('Custom')\n                              ? 'hover:bg-blue-100 text-blue-600 font-medium'\n                              : 'hover:bg-gray-100 text-[#3E4A59]'\n                          }`}\n                        >\n                          {subject}\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n            {showCustomInput && (\n              <div className=\"mt-2 p-2 border rounded-md bg-blue-50\">\n                <label className=\"text-xs font-medium text-blue-700\">Enter Custom Class Name:</label>\n                <div className=\"flex gap-1 mt-1\">\n                  <Input\n                    value={customSubject}\n                    onChange={(e) => setCustomSubject(e.target.value)}\n                    placeholder=\"e.g., Advanced Algebra, Marine Biology\"\n                    className=\"text-xs\"\n                    onKeyPress={(e) => e.key === 'Enter' && handleCustomSubjectSave()}\n                  />\n                  <Button\n                    size=\"sm\"\n                    onClick={handleCustomSubjectSave}\n                    disabled={!customSubject.trim()}\n                    className=\"text-xs px-2 py-1\"\n                  >\n                    Add\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={() => setShowCustomInput(false)}\n                    className=\"text-xs px-2 py-1\"\n                  >\n                    Cancel\n                  </Button>\n                </div>\n              </div>\n            )}\n            <div className=\"mt-1 text-xs text-[#7E8A97]\">\n              Selected: <span className=\"font-medium\">{formData.subject}</span>\n            </div>\n          </div>\n          \n          <div>\n            <label className=\"text-sm font-medium text-[#3E4A59]\">Task Title</label>\n            <Input\n              value={formData.title}\n              onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\n              placeholder=\"Enter task title\"\n              className=\"border-[#D9E5D1] focus:border-[#8BA88E]\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"text-sm font-medium text-[#3E4A59]\">Description</label>\n            <Textarea\n              value={formData.description}\n              onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n              placeholder=\"Add task description or notes\"\n              className=\"border-[#D9E5D1] focus:border-[#8BA88E]\"\n              rows={3}\n            />\n          </div>\n          \n          <div>\n            <label className=\"text-sm font-medium text-[#3E4A59]\">Type</label>\n            <Select value={formData.type} onValueChange={(value) => setFormData(prev => ({ ...prev, type: value as any }))}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"lesson\">Lesson</SelectItem>\n                <SelectItem value=\"assignment\">Assignment</SelectItem>\n                <SelectItem value=\"activity\">Activity</SelectItem>\n                <SelectItem value=\"assessment\">Assessment</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n        \n        <DialogFooter className=\"flex-shrink-0 mt-4\">\n          <div className=\"flex justify-between w-full\">\n            {onDelete && (\n              <Button\n                variant=\"destructive\"\n                onClick={() => {\n                  onDelete();\n                  onClose();\n                }}\n              >\n                Delete\n              </Button>\n            )}\n            <div className=\"flex space-x-2 ml-auto\">\n              <Button variant=\"outline\" onClick={onClose}>\n                Cancel\n              </Button>\n              <Button\n                onClick={handleSave}\n                disabled={!formData.title.trim()}\n                className=\"bg-gradient-to-r from-[#7E8A97] to-[#8BA88E] hover:from-[#6E7A87] to-[#7B987E] text-white\"\n              >\n                {task ? 'Update' : 'Add'} Task\n              </Button>\n            </div>\n          </div>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default Planner;","size_bytes":27165},"client/src/pages/Register.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nconst registerSchema = z.object({\n  email: z.string().email(\"Please enter a valid email address\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\n  confirmPassword: z.string(),\n  fullName: z.string().min(2, \"Please enter your full name\"),\n  familyName: z.string().min(2, \"Please enter your family name\"),\n}).refine((data) => data.password === data.confirmPassword, {\n  message: \"Passwords don't match\",\n  path: [\"confirmPassword\"],\n});\n\ntype RegisterFormData = z.infer<typeof registerSchema>;\n\nexport default function Register() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  \n  const form = useForm<RegisterFormData>({\n    resolver: zodResolver(registerSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n      fullName: \"\",\n      familyName: \"\",\n    },\n  });\n\n  const registerMutation = useMutation({\n    mutationFn: async (data: RegisterFormData) => {\n      const { confirmPassword, ...registerData } = data;\n      const response = await fetch(\"/api/auth/register\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(registerData),\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Registration failed\");\n      }\n      \n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Family account created!\",\n        description: \"Please sign in with your new account.\",\n      });\n      setLocation(\"/login\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Registration failed\",\n        description: error.message || \"An error occurred while creating your account.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: RegisterFormData) => {\n    registerMutation.mutate(data);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-[#9CA3AF] via-[#A7B8A8] to-[#7FB3C4] flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <CardTitle className=\"text-2xl font-bold text-[#4B5563]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n            Create Your Family Account\n          </CardTitle>\n          <CardDescription>\n            Start your homeschool journey with Pebble Track\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Email Address</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"email\" \n                        placeholder=\"your@email.com\" \n                        {...field} \n                        className=\"text-lg\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"fullName\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Your Full Name</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Sarah Johnson\" \n                        {...field} \n                        className=\"text-lg\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"familyName\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Family Name</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"The Johnson Family\" \n                        {...field} \n                        className=\"text-lg\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"password\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Password</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"password\" \n                        placeholder=\"••••••••\" \n                        {...field} \n                        className=\"text-lg\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"confirmPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Confirm Password</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"password\" \n                        placeholder=\"••••••••\" \n                        {...field} \n                        className=\"text-lg\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <Button \n                type=\"submit\" \n                className=\"w-full bg-[#22C55E] hover:bg-[#16A34A] text-white text-lg py-3\"\n                disabled={registerMutation.isPending}\n              >\n                {registerMutation.isPending ? \"Creating Account...\" : \"Create Family Account\"}\n              </Button>\n            </form>\n          </Form>\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-sm text-gray-600\">\n              Already have an account?{\" \"}\n              <button\n                onClick={() => setLocation(\"/login\")}\n                className=\"text-[#22C55E] hover:underline font-medium\"\n              >\n                Sign In\n              </button>\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":7075},"client/src/pages/Reports.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { format, subDays, startOfWeek, endOfWeek } from \"date-fns\";\nimport { \n  Calendar, \n  TrendingUp, \n  Users, \n  CheckCircle, \n  Clock, \n  BookOpen,\n  BarChart3,\n  Download,\n  Filter\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { getAvatarForStudent } from \"@/lib/avatars\";\n\nconst Reports = () => {\n  const [selectedPeriod, setSelectedPeriod] = useState(\"week\");\n  const [selectedStudent, setSelectedStudent] = useState(\"all\");\n\n  // Get current authenticated user\n  const { data: currentUser } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  // Fetch family students\n  const { data: students } = useQuery({\n    queryKey: [\"/api/auth/students\"],\n    enabled: !!currentUser && currentUser.role === \"parent\",\n  });\n\n  // Generate report data based on your actual students\n  const reportData = {\n    totalStudents: students?.length || 0,\n    totalTasks: 40,\n    completedTasks: 28,\n    avgProgress: 70,\n    studentsProgress: students?.map((student: any, index: number) => ({\n      ...student,\n      completedTasks: [8, 6, 9, 5, 7, 4][index] || 5,\n      totalTasks: 10,\n      progressPercentage: [80, 60, 90, 50, 70, 40][index] || 50,\n      recentActivity: [\n        { task: \"Math Practice\", completed: true, date: \"2025-01-02\" },\n        { task: \"Reading Chapter\", completed: true, date: \"2025-01-01\" },\n        { task: \"Science Quiz\", completed: false, date: \"2024-12-30\" }\n      ]\n    })) || []\n  };\n\n  const weeklyProgress = [\n    { week: \"Week 1\", completed: 15, total: 20 },\n    { week: \"Week 2\", completed: 18, total: 22 },\n    { week: \"Week 3\", completed: 16, total: 20 },\n    { week: \"Week 4\", completed: 20, total: 25 }\n  ];\n\n  const subjectProgress = [\n    { subject: \"Math\", progress: 85, color: \"#8BA88E\" },\n    { subject: \"Science\", progress: 72, color: \"#A8C7DD\" },\n    { subject: \"Reading\", progress: 90, color: \"#D9E5D1\" },\n    { subject: \"History\", progress: 65, color: \"#F5F2EA\" }\n  ];\n\n  const filteredStudents = selectedStudent === \"all\" \n    ? reportData.studentsProgress \n    : reportData.studentsProgress.filter(s => s.id.toString() === selectedStudent);\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      {/* Header */}\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6\">\n        <div>\n          <h2 className=\"text-3xl font-bold text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n            Progress Reports\n          </h2>\n          <p className=\"text-[#7E8A97] mt-1\">\n            Track your family's learning journey and achievements\n          </p>\n        </div>\n        <div className=\"flex space-x-2 mt-4 md:mt-0\">\n          <Select value={selectedPeriod} onValueChange={setSelectedPeriod}>\n            <SelectTrigger className=\"w-32\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"week\">This Week</SelectItem>\n              <SelectItem value=\"month\">This Month</SelectItem>\n              <SelectItem value=\"quarter\">This Quarter</SelectItem>\n            </SelectContent>\n          </Select>\n          <Button \n            variant=\"outline\" \n            className=\"border-[#8BA88E] text-[#8BA88E] hover:bg-[#D9E5D1]\"\n          >\n            <Download className=\"h-4 w-4 mr-2\" />\n            Export\n          </Button>\n        </div>\n      </div>\n\n      {/* Summary Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n        <Card className=\"border-[#D9E5D1]\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-[#7E8A97]\">Total Students</p>\n                <p className=\"text-2xl font-bold text-[#3E4A59]\">{reportData.totalStudents}</p>\n              </div>\n              <div className=\"p-2 bg-[#D9E5D1] rounded-lg\">\n                <Users className=\"h-6 w-6 text-[#8BA88E]\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-[#D9E5D1]\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-[#7E8A97]\">Tasks Completed</p>\n                <p className=\"text-2xl font-bold text-[#3E4A59]\">\n                  {reportData.completedTasks}/{reportData.totalTasks}\n                </p>\n              </div>\n              <div className=\"p-2 bg-[#A8C7DD] rounded-lg\">\n                <CheckCircle className=\"h-6 w-6 text-[#7E8A97]\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-[#D9E5D1]\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-[#7E8A97]\">Average Progress</p>\n                <p className=\"text-2xl font-bold text-[#3E4A59]\">{reportData.avgProgress}%</p>\n              </div>\n              <div className=\"p-2 bg-[#D9E5D1] rounded-lg\">\n                <TrendingUp className=\"h-6 w-6 text-[#8BA88E]\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-[#D9E5D1]\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-[#7E8A97]\">Active Classes</p>\n                <p className=\"text-2xl font-bold text-[#3E4A59]\">4</p>\n              </div>\n              <div className=\"p-2 bg-[#A8C7DD] rounded-lg\">\n                <BookOpen className=\"h-6 w-6 text-[#7E8A97]\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Student Filter */}\n      <div className=\"flex items-center space-x-4 mb-6\">\n        <Filter className=\"h-5 w-5 text-[#7E8A97]\" />\n        <Select value={selectedStudent} onValueChange={setSelectedStudent}>\n          <SelectTrigger className=\"w-48\">\n            <SelectValue placeholder=\"Select student\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Students</SelectItem>\n            {students?.map((student: any) => (\n              <SelectItem key={student.id} value={student.id.toString()}>\n                {student.fullName}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n\n      {/* Charts Section */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\n        {/* Weekly Progress Chart */}\n        <Card className=\"border-[#D9E5D1]\">\n          <CardHeader>\n            <CardTitle className=\"text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n              Weekly Progress\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {weeklyProgress.map((week, index) => {\n                const percentage = (week.completed / week.total) * 100;\n                return (\n                  <div key={index} className=\"space-y-2\">\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"text-sm font-medium text-[#3E4A59]\">{week.week}</span>\n                      <span className=\"text-sm text-[#7E8A97]\">\n                        {week.completed}/{week.total} tasks\n                      </span>\n                    </div>\n                    <Progress value={percentage} className=\"h-2\" />\n                  </div>\n                );\n              })}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Subject Progress */}\n        <Card className=\"border-[#D9E5D1]\">\n          <CardHeader>\n            <CardTitle className=\"text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n              Subject Progress\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {subjectProgress.map((subject, index) => (\n                <div key={index} className=\"space-y-2\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-sm font-medium text-[#3E4A59]\">{subject.subject}</span>\n                    <span className=\"text-sm text-[#7E8A97]\">{subject.progress}%</span>\n                  </div>\n                  <Progress value={subject.progress} className=\"h-2\" />\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Student Progress Details */}\n      <Card className=\"border-[#D9E5D1]\">\n        <CardHeader>\n          <CardTitle className=\"text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n            Individual Student Progress\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredStudents.map((student: any) => {\n              const avatar = getAvatarForStudent(student.fullName);\n              return (\n                <Card key={student.id} className=\"border-[#D9E5D1]\">\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-center space-x-3 mb-4\">\n                      <div \n                        className=\"w-12 h-12 rounded-full flex items-center justify-center text-xl\"\n                        style={{ backgroundColor: avatar.backgroundColor }}\n                      >\n                        {avatar.emoji}\n                      </div>\n                      <div>\n                        <h3 className=\"font-semibold text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                          {student.fullName}\n                        </h3>\n                        <p className=\"text-sm text-[#7E8A97]\">{student.gradeLevel}</p>\n                      </div>\n                    </div>\n\n                    <div className=\"space-y-3\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-[#7E8A97]\">Progress</span>\n                        <span className=\"text-sm font-medium text-[#3E4A59]\">\n                          {student.progressPercentage}%\n                        </span>\n                      </div>\n                      <Progress value={student.progressPercentage} className=\"h-2\" />\n                      \n                      <div className=\"flex justify-between items-center text-sm\">\n                        <span className=\"text-[#7E8A97]\">Tasks Completed</span>\n                        <span className=\"font-medium text-[#3E4A59]\">\n                          {student.completedTasks}/{student.totalTasks}\n                        </span>\n                      </div>\n\n                      {/* Recent Activity */}\n                      <div className=\"pt-2 border-t border-[#D9E5D1]\">\n                        <h4 className=\"text-sm font-medium text-[#3E4A59] mb-2\">Recent Activity</h4>\n                        <div className=\"space-y-1\">\n                          {student.recentActivity.slice(0, 2).map((activity: any, index: number) => (\n                            <div key={index} className=\"flex items-center justify-between text-xs\">\n                              <span className=\"text-[#7E8A97] truncate\">{activity.task}</span>\n                              <Badge \n                                variant=\"secondary\" \n                                className={activity.completed \n                                  ? \"bg-[#D9E5D1] text-[#8BA88E]\" \n                                  : \"bg-red-100 text-red-700\"\n                                }\n                              >\n                                {activity.completed ? \"Done\" : \"Pending\"}\n                              </Badge>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Performance Insights */}\n      <Card className=\"border-[#D9E5D1]\">\n        <CardHeader>\n          <CardTitle className=\"text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n            Performance Insights\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"space-y-3\">\n              <h4 className=\"font-medium text-[#3E4A59]\">Strengths</h4>\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center space-x-2\">\n                  <CheckCircle className=\"h-4 w-4 text-[#8BA88E]\" />\n                  <span className=\"text-sm text-[#7E8A97]\">Reading comprehension showing strong improvement</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <CheckCircle className=\"h-4 w-4 text-[#8BA88E]\" />\n                  <span className=\"text-sm text-[#7E8A97]\">Consistent task completion rates</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <CheckCircle className=\"h-4 w-4 text-[#8BA88E]\" />\n                  <span className=\"text-sm text-[#7E8A97]\">Good engagement across all subjects</span>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"space-y-3\">\n              <h4 className=\"font-medium text-[#3E4A59]\">Areas for Growth</h4>\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center space-x-2\">\n                  <Clock className=\"h-4 w-4 text-[#A8C7DD]\" />\n                  <span className=\"text-sm text-[#7E8A97]\">Math problem-solving could use more practice</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <Clock className=\"h-4 w-4 text-[#A8C7DD]\" />\n                  <span className=\"text-sm text-[#7E8A97]\">History timeline understanding needs work</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <Clock className=\"h-4 w-4 text-[#A8C7DD]\" />\n                  <span className=\"text-sm text-[#7E8A97]\">Science experiments completion rate below average</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default Reports;","size_bytes":15022},"client/src/pages/Settings.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { \n  Settings as SettingsIcon, \n  User, \n  Bell, \n  Palette, \n  Shield, \n  Database,\n  Download,\n  Upload,\n  Save,\n  Eye,\n  EyeOff,\n  CreditCard,\n  Calendar,\n  CheckCircle,\n  AlertCircle\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Switch } from \"@/components/ui/switch\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from \"@/components/ui/tabs\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { getAvatarById } from \"@/lib/avatars\";\nimport { queryClient } from \"@/lib/queryClient\";\n\nconst Settings = () => {\n  const { toast } = useToast();\n  const [showPassword, setShowPassword] = useState(false);\n  const [settings, setSettings] = useState({\n    // Profile Settings\n    familyName: \"Matthews Family\",\n    email: \"jesmj11@gmail.com\",\n    notifications: {\n      email: true,\n      assignments: true,\n      progress: false,\n      weekly: true\n    },\n    // Privacy Settings\n    dataSharing: false,\n    analytics: true,\n    // App Settings\n    theme: \"light\",\n    language: \"en\",\n    timezone: \"America/New_York\",\n    // Backup Settings\n    autoBackup: true,\n    backupFrequency: \"weekly\"\n  });\n\n  // Get current authenticated user\n  const { data: currentUser } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  // Fetch family students for data overview\n  const { data: students } = useQuery({\n    queryKey: [\"/api/auth/students\"],\n    enabled: !!currentUser && currentUser.role === \"parent\",\n  });\n\n  const handleSettingChange = (category: string, key: string, value: any) => {\n    setSettings(prev => ({\n      ...prev,\n      [category]: {\n        ...prev[category as keyof typeof prev],\n        [key]: value\n      }\n    }));\n  };\n\n  const saveSettingsMutation = useMutation({\n    mutationFn: async (settingsData: any) => {\n      const response = await fetch(\"/api/family/settings\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n        body: JSON.stringify(settingsData),\n      });\n      \n      if (!response.ok) {\n        throw new Error(\"Failed to save settings\");\n      }\n      \n      return response.json();\n    },\n    onSuccess: () => {\n      // Invalidate family settings query to refresh the data\n      queryClient.invalidateQueries({ queryKey: [\"/api/family/settings\"] });\n      toast({\n        title: \"Settings saved\",\n        description: \"Your preferences have been updated successfully.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to save settings. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSaveSettings = () => {\n    saveSettingsMutation.mutate(settings);\n  };\n\n  const handleExportData = () => {\n    // Would trigger data export\n    toast({\n      title: \"Export started\",\n      description: \"Your data export will be ready for download shortly.\",\n    });\n  };\n\n  const handleDeleteAllData = () => {\n    if (confirm(\"Are you sure you want to delete all data? This action cannot be undone.\")) {\n      // Would trigger data deletion\n      toast({\n        title: \"Data deletion initiated\",\n        description: \"All your data will be permanently deleted.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      {/* Header */}\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6\">\n        <div>\n          <h2 className=\"text-3xl font-bold text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n            Settings\n          </h2>\n          <p className=\"text-[#7E8A97] mt-1\">\n            Manage your Pebble Track preferences and account settings\n          </p>\n        </div>\n        <Button \n          onClick={handleSaveSettings}\n          className=\"bg-gradient-to-r from-[#7E8A97] to-[#8BA88E] hover:from-[#6E7A87] to-[#7B987E] text-white\"\n        >\n          <Save className=\"h-4 w-4 mr-2\" />\n          Save Changes\n        </Button>\n      </div>\n\n      <Tabs defaultValue=\"profile\" className=\"space-y-6\">\n        <TabsList className=\"grid w-full grid-cols-6\">\n          <TabsTrigger value=\"profile\">Profile</TabsTrigger>\n          <TabsTrigger value=\"subscription\">Subscription</TabsTrigger>\n          <TabsTrigger value=\"notifications\">Notifications</TabsTrigger>\n          <TabsTrigger value=\"privacy\">Privacy</TabsTrigger>\n          <TabsTrigger value=\"app\">App Settings</TabsTrigger>\n          <TabsTrigger value=\"data\">Data & Backup</TabsTrigger>\n        </TabsList>\n\n        {/* Profile Settings */}\n        <TabsContent value=\"profile\" className=\"space-y-6\">\n          <Card className=\"border-[#D9E5D1]\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                <User className=\"h-5 w-5 mr-2\" />\n                Family Profile\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"familyName\" className=\"text-[#3E4A59]\">Family Name</Label>\n                  <Input\n                    id=\"familyName\"\n                    value={settings.familyName}\n                    onChange={(e) => setSettings(prev => ({ ...prev, familyName: e.target.value }))}\n                    className=\"border-[#D9E5D1] focus:border-[#8BA88E]\"\n                  />\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"email\" className=\"text-[#3E4A59]\">Email Address</Label>\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    value={settings.email}\n                    onChange={(e) => setSettings(prev => ({ ...prev, email: e.target.value }))}\n                    className=\"border-[#D9E5D1] focus:border-[#8BA88E]\"\n                  />\n                </div>\n              </div>\n\n              {/* Students Overview */}\n              <div className=\"pt-4 border-t border-[#D9E5D1]\">\n                <h3 className=\"text-lg font-semibold text-[#3E4A59] mb-3\">Family Students</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                  {students?.map((student: any) => {\n                    const studentAvatar = getAvatarById(student.avatar);\n                    return (\n                      <div key={student.id} className=\"flex items-center space-x-3 p-3 bg-[#F5F2EA] rounded-lg\">\n                        <div \n                          className=\"w-8 h-8 rounded-full flex items-center justify-center text-sm\"\n                          style={{\n                            backgroundColor: studentAvatar?.backgroundColor || '#A8C7DD'\n                          }}\n                        >\n                          {studentAvatar?.emoji || student.fullName.charAt(0)}\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-[#3E4A59]\">{student.fullName}</p>\n                          <p className=\"text-xs text-[#7E8A97]\">{student.gradeLevel}</p>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Subscription Settings */}\n        <TabsContent value=\"subscription\" className=\"space-y-6\">\n          <Card className=\"border-[#D9E5D1]\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                <CreditCard className=\"h-5 w-5 mr-2\" />\n                Subscription & Billing\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              {/* Current Plan */}\n              <div className=\"bg-gradient-to-r from-[#D9E5D1] to-[#F5F2EA] p-6 rounded-lg border border-[#8BA88E]\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div>\n                    <h3 className=\"text-xl font-bold text-[#3E4A59]\">Family Pro Plan</h3>\n                    <div className=\"flex items-center space-x-2 mt-1\">\n                      <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                      <span className=\"text-sm text-[#7E8A97]\">Active Subscription</span>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <div className=\"text-2xl font-bold text-[#3E4A59]\">$19.99</div>\n                    <div className=\"text-sm text-[#7E8A97]\">per month</div>\n                  </div>\n                </div>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Calendar className=\"h-4 w-4 text-[#8BA88E]\" />\n                    <span className=\"text-sm text-[#7E8A97]\">Renewal: March 15, 2025</span>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                    <span className=\"text-sm text-[#7E8A97]\">Up to 10 students</span>\n                  </div>\n                </div>\n\n                <div className=\"flex space-x-3\">\n                  <Button \n                    variant=\"outline\" \n                    className=\"border-[#8BA88E] text-[#8BA88E] hover:bg-white\"\n                  >\n                    Change Plan\n                  </Button>\n                  <Button \n                    variant=\"outline\" \n                    className=\"border-[#7E8A97] text-[#7E8A97] hover:bg-white\"\n                  >\n                    Cancel Subscription\n                  </Button>\n                </div>\n              </div>\n\n              {/* Usage Stats */}\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <Card className=\"border-[#D9E5D1]\">\n                  <CardContent className=\"p-4 text-center\">\n                    <div className=\"text-2xl font-bold text-[#3E4A59] mb-1\">6</div>\n                    <div className=\"text-sm text-[#7E8A97]\">Active Students</div>\n                    <div className=\"text-xs text-green-600 mt-1\">4 remaining</div>\n                  </CardContent>\n                </Card>\n                \n                <Card className=\"border-[#D9E5D1]\">\n                  <CardContent className=\"p-4 text-center\">\n                    <div className=\"text-2xl font-bold text-[#3E4A59] mb-1\">248</div>\n                    <div className=\"text-sm text-[#7E8A97]\">Tasks This Month</div>\n                    <div className=\"text-xs text-[#8BA88E] mt-1\">Unlimited</div>\n                  </CardContent>\n                </Card>\n                \n                <Card className=\"border-[#D9E5D1]\">\n                  <CardContent className=\"p-4 text-center\">\n                    <div className=\"text-2xl font-bold text-[#3E4A59] mb-1\">12</div>\n                    <div className=\"text-sm text-[#7E8A97]\">Active Classes</div>\n                    <div className=\"text-xs text-[#8BA88E] mt-1\">Unlimited</div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              {/* Payment Method */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold text-[#3E4A59]\">Payment Method</h3>\n                <div className=\"flex items-center justify-between p-4 border border-[#D9E5D1] rounded-lg\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"w-8 h-6 bg-blue-600 rounded flex items-center justify-center\">\n                      <span className=\"text-white text-xs font-bold\">VISA</span>\n                    </div>\n                    <div>\n                      <div className=\"text-sm font-medium text-[#3E4A59]\">•••• •••• •••• 4532</div>\n                      <div className=\"text-xs text-[#7E8A97]\">Expires 03/27</div>\n                    </div>\n                  </div>\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\"\n                    className=\"border-[#8BA88E] text-[#8BA88E] hover:bg-[#D9E5D1]\"\n                  >\n                    Update\n                  </Button>\n                </div>\n              </div>\n\n              {/* Billing History */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold text-[#3E4A59]\">Recent Billing History</h3>\n                <div className=\"space-y-2\">\n                  {[\n                    { date: \"Feb 15, 2025\", amount: \"$19.99\", status: \"Paid\" },\n                    { date: \"Jan 15, 2025\", amount: \"$19.99\", status: \"Paid\" },\n                    { date: \"Dec 15, 2024\", amount: \"$19.99\", status: \"Paid\" },\n                  ].map((bill, index) => (\n                    <div key={index} className=\"flex items-center justify-between p-3 bg-[#F5F2EA] rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                        <div>\n                          <div className=\"text-sm font-medium text-[#3E4A59]\">{bill.date}</div>\n                          <div className=\"text-xs text-[#7E8A97]\">Family Pro Plan</div>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-sm font-medium text-[#3E4A59]\">{bill.amount}</div>\n                        <div className=\"text-xs text-green-600\">{bill.status}</div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n                <Button \n                  variant=\"outline\" \n                  className=\"w-full border-[#8BA88E] text-[#8BA88E] hover:bg-[#D9E5D1]\"\n                >\n                  View All Invoices\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Notification Settings */}\n        <TabsContent value=\"notifications\" className=\"space-y-6\">\n          <Card className=\"border-[#D9E5D1]\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                <Bell className=\"h-5 w-5 mr-2\" />\n                Notification Preferences\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <Label className=\"text-[#3E4A59]\">Email Notifications</Label>\n                  <p className=\"text-sm text-[#7E8A97]\">Receive general updates via email</p>\n                </div>\n                <Switch\n                  checked={settings.notifications.email}\n                  onCheckedChange={(checked) => handleSettingChange('notifications', 'email', checked)}\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <Label className=\"text-[#3E4A59]\">Assignment Notifications</Label>\n                  <p className=\"text-sm text-[#7E8A97]\">Get notified about assignment due dates</p>\n                </div>\n                <Switch\n                  checked={settings.notifications.assignments}\n                  onCheckedChange={(checked) => handleSettingChange('notifications', 'assignments', checked)}\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <Label className=\"text-[#3E4A59]\">Progress Reports</Label>\n                  <p className=\"text-sm text-[#7E8A97]\">Weekly progress summaries</p>\n                </div>\n                <Switch\n                  checked={settings.notifications.progress}\n                  onCheckedChange={(checked) => handleSettingChange('notifications', 'progress', checked)}\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <Label className=\"text-[#3E4A59]\">Weekly Digest</Label>\n                  <p className=\"text-sm text-[#7E8A97]\">Summary of week's activities</p>\n                </div>\n                <Switch\n                  checked={settings.notifications.weekly}\n                  onCheckedChange={(checked) => handleSettingChange('notifications', 'weekly', checked)}\n                />\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Privacy Settings */}\n        <TabsContent value=\"privacy\" className=\"space-y-6\">\n          <Card className=\"border-[#D9E5D1]\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                <Shield className=\"h-5 w-5 mr-2\" />\n                Privacy & Security\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <Label className=\"text-[#3E4A59]\">Data Sharing</Label>\n                  <p className=\"text-sm text-[#7E8A97]\">Allow sharing anonymized data for improvements</p>\n                </div>\n                <Switch\n                  checked={settings.dataSharing}\n                  onCheckedChange={(checked) => setSettings(prev => ({ ...prev, dataSharing: checked }))}\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <Label className=\"text-[#3E4A59]\">Usage Analytics</Label>\n                  <p className=\"text-sm text-[#7E8A97]\">Help improve Pebble Track with usage data</p>\n                </div>\n                <Switch\n                  checked={settings.analytics}\n                  onCheckedChange={(checked) => setSettings(prev => ({ ...prev, analytics: checked }))}\n                />\n              </div>\n\n              <Separator />\n\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold text-[#3E4A59]\">Account Security</h3>\n                <div className=\"space-y-3\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"currentPassword\" className=\"text-[#3E4A59]\">Current Password</Label>\n                    <div className=\"relative\">\n                      <Input\n                        id=\"currentPassword\"\n                        type={showPassword ? \"text\" : \"password\"}\n                        placeholder=\"Enter current password\"\n                        className=\"border-[#D9E5D1] focus:border-[#8BA88E] pr-10\"\n                      />\n                      <Button\n                        type=\"button\"\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        className=\"absolute right-0 top-0 h-full px-3 hover:bg-transparent\"\n                        onClick={() => setShowPassword(!showPassword)}\n                      >\n                        {showPassword ? (\n                          <EyeOff className=\"h-4 w-4\" />\n                        ) : (\n                          <Eye className=\"h-4 w-4\" />\n                        )}\n                      </Button>\n                    </div>\n                  </div>\n                  \n                  <Button \n                    variant=\"outline\" \n                    className=\"border-[#8BA88E] text-[#8BA88E] hover:bg-[#D9E5D1]\"\n                  >\n                    Change Password\n                  </Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* App Settings */}\n        <TabsContent value=\"app\" className=\"space-y-6\">\n          <Card className=\"border-[#D9E5D1]\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                <Palette className=\"h-5 w-5 mr-2\" />\n                App Preferences\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"theme\" className=\"text-[#3E4A59]\">Theme</Label>\n                  <Select value={settings.theme} onValueChange={(value) => setSettings(prev => ({ ...prev, theme: value }))}>\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"light\">Light</SelectItem>\n                      <SelectItem value=\"dark\">Dark</SelectItem>\n                      <SelectItem value=\"auto\">Auto</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"language\" className=\"text-[#3E4A59]\">Language</Label>\n                  <Select value={settings.language} onValueChange={(value) => setSettings(prev => ({ ...prev, language: value }))}>\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"en\">English</SelectItem>\n                      <SelectItem value=\"es\">Spanish</SelectItem>\n                      <SelectItem value=\"fr\">French</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"timezone\" className=\"text-[#3E4A59]\">Timezone</Label>\n                  <Select value={settings.timezone} onValueChange={(value) => setSettings(prev => ({ ...prev, timezone: value }))}>\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"America/New_York\">Eastern Time</SelectItem>\n                      <SelectItem value=\"America/Chicago\">Central Time</SelectItem>\n                      <SelectItem value=\"America/Denver\">Mountain Time</SelectItem>\n                      <SelectItem value=\"America/Los_Angeles\">Pacific Time</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Data & Backup Settings */}\n        <TabsContent value=\"data\" className=\"space-y-6\">\n          <Card className=\"border-[#D9E5D1]\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                <Database className=\"h-5 w-5 mr-2\" />\n                Data Management\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              {/* Backup Settings */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold text-[#3E4A59]\">Backup Settings</h3>\n                \n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <Label className=\"text-[#3E4A59]\">Automatic Backup</Label>\n                    <p className=\"text-sm text-[#7E8A97]\">Automatically backup your data</p>\n                  </div>\n                  <Switch\n                    checked={settings.autoBackup}\n                    onCheckedChange={(checked) => setSettings(prev => ({ ...prev, autoBackup: checked }))}\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"backupFrequency\" className=\"text-[#3E4A59]\">Backup Frequency</Label>\n                  <Select \n                    value={settings.backupFrequency} \n                    onValueChange={(value) => setSettings(prev => ({ ...prev, backupFrequency: value }))}\n                    disabled={!settings.autoBackup}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"daily\">Daily</SelectItem>\n                      <SelectItem value=\"weekly\">Weekly</SelectItem>\n                      <SelectItem value=\"monthly\">Monthly</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n\n              <Separator />\n\n              {/* Data Export/Import */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold text-[#3E4A59]\">Data Export & Import</h3>\n                \n                <div className=\"space-y-3\">\n                  <p className=\"text-sm text-[#7E8A97]\">\n                    Export your family's learning data or import from another platform.\n                  </p>\n                  \n                  <div className=\"flex space-x-3\">\n                    <Button \n                      onClick={handleExportData}\n                      variant=\"outline\"\n                      className=\"border-[#8BA88E] text-[#8BA88E] hover:bg-[#D9E5D1]\"\n                    >\n                      <Download className=\"h-4 w-4 mr-2\" />\n                      Export Data\n                    </Button>\n                    \n                    <Button \n                      variant=\"outline\"\n                      className=\"border-[#A8C7DD] text-[#7E8A97] hover:bg-[#F5F2EA]\"\n                    >\n                      <Upload className=\"h-4 w-4 mr-2\" />\n                      Import Data\n                    </Button>\n                  </div>\n                </div>\n              </div>\n\n              <Separator />\n\n              {/* Danger Zone */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold text-red-600\">Danger Zone</h3>\n                \n                <div className=\"p-4 border border-red-200 rounded-lg bg-red-50\">\n                  <div className=\"space-y-3\">\n                    <p className=\"text-sm text-red-700\">\n                      <strong>Delete All Data:</strong> This will permanently delete all your family's data, including students, classes, assignments, and progress. This action cannot be undone.\n                    </p>\n                    \n                    <Button \n                      onClick={handleDeleteAllData}\n                      variant=\"destructive\"\n                      className=\"bg-red-600 hover:bg-red-700\"\n                    >\n                      Delete All Data\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};\n\nexport default Settings;","size_bytes":27819},"client/src/pages/StudentDashboard.tsx":{"content":"import { useState } from \"react\";\nimport { Link } from \"wouter\";\nimport { format } from \"date-fns\";\nimport { CheckCircle, Clock, BookOpen, CheckSquare, TrendingUp, MoreVertical } from \"lucide-react\";\nimport { Card } from \"@/components/ui/card\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface DashboardData {\n  completedTasks: number;\n  pendingTasks: number;\n  dueTodayTasks: number;\n  totalClasses: number;\n  progress: Array<{\n    className: string;\n    percentage: number;\n  }>;\n}\n\ninterface Task {\n  id: number;\n  assignment: {\n    id: number;\n    title: string;\n    dueDate: string;\n    priority: string;\n  };\n  class: {\n    id: number;\n    name: string;\n  };\n  completed: boolean;\n  completedAt: string | null;\n}\n\nconst StudentDashboard = () => {\n  const { toast } = useToast();\n  const [selectedClass, setSelectedClass] = useState<string>(\"all\");\n  \n  // For demo purposes, provide mock data \n  const isLoading = false;\n  const currentDate = format(new Date(), \"MMMM d, yyyy\");\n  \n  // State to track completed classes\n  const [completedClasses, setCompletedClasses] = useState<string[]>([]);\n\n  // Function to handle class completion\n  const handleClassComplete = (className: string, isCompleted: boolean) => {\n    if (isCompleted) {\n      setCompletedClasses(prev => [...prev, className]);\n      toast({\n        title: \"Class Complete!\",\n        description: `Great work on ${className}!`,\n      });\n    } else {\n      setCompletedClasses(prev => prev.filter(c => c !== className));\n      toast({\n        title: \"Class Reopened\",\n        description: `${className} has been reopened.`,\n      });\n    }\n  };\n\n  // Function to get class icons\n  const getClassIcon = (className: string) => {\n    switch (className.toLowerCase()) {\n      case 'math':\n        return '🔢';\n      case 'science':\n        return '🔬';\n      case 'reading':\n        return '📚';\n      case 'history':\n        return '🏛️';\n      case 'english':\n        return '✍️';\n      case 'art':\n        return '🎨';\n      case 'music':\n        return '🎵';\n      case 'pe':\n      case 'physical education':\n        return '⚽';\n      default:\n        return '📖';\n    }\n  };\n\n  // Function to get class colors\n  const getClassColor = (className: string) => {\n    switch (className.toLowerCase()) {\n      case 'math':\n        return 'bg-blue-500';\n      case 'science':\n        return 'bg-purple-500';\n      case 'reading':\n        return 'bg-green-500';\n      case 'history':\n        return 'bg-amber-500';\n      case 'english':\n        return 'bg-red-500';\n      case 'art':\n        return 'bg-pink-500';\n      case 'music':\n        return 'bg-indigo-500';\n      case 'pe':\n      case 'physical education':\n        return 'bg-orange-500';\n      default:\n        return 'bg-gray-500';\n    }\n  };\n  \n  // Mock student dashboard data\n  const studentData: DashboardData = {\n    completedTasks: 3,\n    pendingTasks: 5,\n    dueTodayTasks: 3,\n    totalClasses: 4,\n    progress: [\n      { className: \"Math\", percentage: 75 },\n      { className: \"Science\", percentage: 60 },\n      { className: \"Reading\", percentage: 90 },\n      { className: \"History\", percentage: 45 }\n    ]\n  };\n  \n  // Mock tasks data - kid-friendly tasks\n  const tasks: Task[] = [\n    {\n      id: 1,\n      assignment: {\n        id: 101,\n        title: \"Practice Addition Problems\",\n        dueDate: new Date().toISOString(),\n        priority: \"high\"\n      },\n      class: {\n        id: 1,\n        name: \"Math\"\n      },\n      completed: false,\n      completedAt: null\n    },\n    {\n      id: 2,\n      assignment: {\n        id: 102,\n        title: \"Read 20 Minutes\",\n        dueDate: new Date().toISOString(),\n        priority: \"medium\" \n      },\n      class: {\n        id: 3,\n        name: \"Reading\"\n      },\n      completed: false,\n      completedAt: null\n    },\n    {\n      id: 3,\n      assignment: {\n        id: 103,\n        title: \"Science Journal Entry\",\n        dueDate: new Date().toISOString(),\n        priority: \"low\"\n      },\n      class: {\n        id: 2,\n        name: \"Science\" \n      },\n      completed: false,\n      completedAt: null\n    },\n    {\n      id: 4,\n      assignment: {\n        id: 104,\n        title: \"Spelling Practice\",\n        dueDate: new Date(Date.now() - 86400000).toISOString(),\n        priority: \"high\"\n      },\n      class: {\n        id: 3,\n        name: \"Reading\"\n      },\n      completed: true,\n      completedAt: new Date(Date.now() - 3600000).toISOString()\n    },\n    {\n      id: 5,\n      assignment: {\n        id: 105,\n        title: \"Math Worksheet\",\n        dueDate: new Date(Date.now() - 86400000).toISOString(),\n        priority: \"medium\"\n      },\n      class: {\n        id: 1,\n        name: \"Math\"\n      },\n      completed: true,\n      completedAt: new Date(Date.now() - 7200000).toISOString()\n    }\n  ];\n  \n  // Filter tasks by completion status\n  const todayTasks = tasks.filter(task => !task.completed);\n  const completedTasks = tasks.filter(task => task.completed).slice(0, 3);\n  \n  // Function to handle task completion toggle\n  const handleTaskComplete = (taskId: number, isCompleted: boolean) => {\n    toast({\n      title: isCompleted ? \"Great job!\" : \"Task reopened\",\n      description: isCompleted ? \"You completed a task! Keep going!\" : \"Task has been reopened.\",\n    });\n  };\n  \n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <p>Loading your tasks...</p>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"space-y-6 max-w-4xl mx-auto\">\n      {/* Kid-friendly header */}\n      <div className=\"text-center mb-8\">\n        <h1 className=\"text-4xl font-bold text-primary mb-2\">My Learning Adventures!</h1>\n        <p className=\"text-lg text-neutral-dark\">Today is <span className=\"font-medium text-secondary\">{currentDate}</span></p>\n        <div className=\"mt-4 text-xl\">\n          <span className=\"text-green-600\">Completed: {studentData?.completedTasks || 0} tasks!</span>\n          <span className=\"mx-4\">•</span>\n          <span className=\"text-blue-600\">To do: {studentData?.pendingTasks || 0} tasks!</span>\n        </div>\n      </div>\n      \n      {/* Progress Bar */}\n      <div className=\"bg-white rounded-xl p-6 shadow-lg border-2 border-primary/20\">\n        <h2 className=\"text-2xl font-bold text-center mb-4 text-primary\">Today's Progress</h2>\n        <div className=\"w-full bg-gray-200 rounded-full h-8 mb-4\">\n          <div \n            className=\"bg-gradient-to-r from-green-400 to-green-600 h-8 rounded-full flex items-center justify-center text-white font-bold transition-all duration-500\"\n            style={{ width: `${Math.round(((studentData?.completedTasks || 0) / ((studentData?.completedTasks || 0) + (studentData?.pendingTasks || 1))) * 100)}%` }}\n          >\n            {Math.round(((studentData?.completedTasks || 0) / ((studentData?.completedTasks || 0) + (studentData?.pendingTasks || 1))) * 100)}%\n          </div>\n        </div>\n        <p className=\"text-center text-lg text-neutral-dark\">\n          You've completed <span className=\"font-bold text-green-600\">{studentData?.completedTasks || 0}</span> out of <span className=\"font-bold text-blue-600\">{(studentData?.completedTasks || 0) + (studentData?.pendingTasks || 0)}</span> tasks today!\n        </p>\n      </div>\n      \n      {/* Daily Class Checklist */}\n      <div className=\"bg-white rounded-xl p-6 shadow-lg border-2 border-secondary/20\">\n        <h2 className=\"text-3xl font-bold text-center mb-8 text-secondary\">Today's Classes</h2>\n        \n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {studentData.progress.filter(classItem => !completedClasses.includes(classItem.className)).map(classItem => {\n            const isCompleted = false;\n            return (\n              <button\n                key={classItem.className}\n                onClick={() => !isCompleted && handleClassComplete(classItem.className, !isCompleted)}\n                className={`relative p-6 rounded-3xl border-4 transition-all duration-300 transform hover:scale-105 shadow-lg min-h-[140px] ${\n                  isCompleted\n                    ? \"bg-green-500 border-green-700 shadow-green-400\"\n                    : `${getClassColor(classItem.className)} border-4 shadow-xl hover:shadow-2xl`\n                } ${!isCompleted ? \"hover:scale-105 active:scale-95\" : \"\"}`}\n                disabled={isCompleted}\n              >\n                {/* Checkbox */}\n                <div className=\"absolute top-4 left-4\">\n                  <div\n                    className={`w-8 h-8 border-4 rounded-lg flex items-center justify-center ${\n                      isCompleted ? \"bg-green-500 border-green-600\" : \"bg-white border-gray-400\"\n                    }`}\n                  >\n                    {isCompleted && <CheckCircle className=\"w-6 h-6 text-white\" />}\n                  </div>\n                </div>\n\n                {/* Task Content */}\n                <div className=\"flex items-center gap-4 mt-4\">\n                  {/* Large Emoji */}\n                  <div className=\"text-6xl flex-shrink-0\">{getClassIcon(classItem.className)}</div>\n\n                  {/* Task Text */}\n                  <div className=\"flex-1 text-left min-w-0\">\n                    <h3\n                      className={`text-2xl font-bold mb-1 ${\n                        isCompleted ? \"line-through text-gray-600\" : \"text-white\"\n                      } truncate`}\n                      style={{ fontFamily: \"Comic Sans MS, cursive\" }}\n                    >\n                      {classItem.className}\n                    </h3>\n                    <p className=\"text-lg text-white opacity-90 truncate\" style={{ fontFamily: \"Comic Sans MS, cursive\" }}>\n                      Daily Learning\n                    </p>\n                  </div>\n                </div>\n\n                {/* Completion Overlay */}\n                {isCompleted && (\n                  <div className=\"absolute inset-0 bg-green-400 bg-opacity-20 rounded-3xl flex items-center justify-center\">\n                    <div className=\"bg-green-500 text-white px-6 py-3 rounded-2xl text-2xl font-bold shadow-lg\">\n                      ✅ DONE!\n                    </div>\n                  </div>\n                )}\n              </button>\n            );\n          })}\n        </div>\n        \n        {/* All Complete Message */}\n        {studentData.progress.every(() => Math.random() > 0.7) && (\n          <div className=\"text-center mt-8 p-6 bg-gradient-to-r from-green-100 to-yellow-100 rounded-xl border-2 border-green-300\">\n            <div className=\"text-6xl mb-4\">🌟</div>\n            <h3 className=\"text-3xl font-bold text-green-700 mb-2\">Amazing Work!</h3>\n            <p className=\"text-xl text-green-600\">You completed all your classes today!</p>\n          </div>\n        )}\n      </div>\n      \n      {/* Recently Completed Section */}\n      {completedClasses.length > 0 && (\n        <div className=\"bg-white rounded-xl p-6 shadow-lg border-2 border-green-300\">\n          <h2 className=\"text-3xl font-bold text-center mb-8 text-green-700\">Recently Completed! 🎉</h2>\n          \n          <div className=\"grid md:grid-cols-2 gap-6\">\n            {completedClasses.map(className => {\n              return (\n                <div\n                  key={className}\n                  className=\"relative p-6 rounded-3xl border-4 bg-green-500 border-green-700 shadow-green-400 shadow-lg min-h-[140px]\"\n                >\n                  {/* Completed Checkbox */}\n                  <div className=\"absolute top-4 left-4\">\n                    <div className=\"w-8 h-8 border-4 rounded-lg flex items-center justify-center bg-green-500 border-green-600\">\n                      <CheckCircle className=\"w-6 h-6 text-white\" />\n                    </div>\n                  </div>\n\n                  {/* Task Content */}\n                  <div className=\"flex items-center gap-4 mt-4\">\n                    {/* Large Emoji */}\n                    <div className=\"text-6xl flex-shrink-0\">{getClassIcon(className)}</div>\n\n                    {/* Task Text */}\n                    <div className=\"flex-1 text-left min-w-0\">\n                      <h3\n                        className=\"text-2xl font-bold mb-1 line-through text-gray-600 truncate\"\n                        style={{ fontFamily: \"Comic Sans MS, cursive\" }}\n                      >\n                        {className}\n                      </h3>\n                      <p className=\"text-lg text-white opacity-90 truncate\" style={{ fontFamily: \"Comic Sans MS, cursive\" }}>\n                        Completed Today!\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Completion Overlay */}\n                  <div className=\"absolute inset-0 bg-green-400 bg-opacity-20 rounded-3xl flex items-center justify-center\">\n                    <div className=\"bg-green-500 text-white px-6 py-3 rounded-2xl text-2xl font-bold shadow-lg\">\n                      ✅ DONE!\n                    </div>\n                  </div>\n\n                  {/* Click to undo (hidden for now but could be enabled) */}\n                  <button\n                    onClick={() => handleClassComplete(className, false)}\n                    className=\"absolute top-4 right-4 bg-gray-500 hover:bg-gray-600 rounded-full p-2 opacity-50 hover:opacity-100 transition-opacity\"\n                    title=\"Click to undo completion\"\n                  >\n                    <span className=\"text-white text-sm\">↶</span>\n                  </button>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default StudentDashboard;","size_bytes":13891},"client/src/pages/StudentDashboardNew.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { getAvatarById } from \"@/lib/avatars\";\nimport {\n  ArrowLeft,\n  Star,\n  Trophy,\n  CheckCircle2,\n  BookOpen,\n  Calculator,\n  Palette,\n  Microscope,\n  PenTool,\n  Activity,\n} from \"lucide-react\";\n\ninterface Student {\n  id: string;\n  name: string;\n  avatar: string;\n  level: number;\n  xp: number;\n  totalXp: number;\n}\n\ninterface Task {\n  id: string;\n  title: string;\n  subject: string;\n  dueDate: string;\n  priority: \"low\" | \"medium\" | \"high\";\n  completed: boolean;\n  xpReward: number;\n  studentId: string;\n  description?: string;\n  icon: any;\n  color: string;\n}\n\ninterface StudentDashboardProps {\n  studentId?: number;\n}\n\nconst StudentDashboard = ({ studentId }: StudentDashboardProps) => {\n  // Fetch actual student data\n  const { data: students } = useQuery({\n    queryKey: [\"/api/auth/students\"],\n  });\n\n  const student = students?.find((s: any) => s.id === studentId) || students?.[0];\n  \n  if (!student) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <p className=\"text-gray-500\">Student not found</p>\n      </div>\n    );\n  }\n\n  // Get the student's nature avatar\n  const studentAvatar = getAvatarById(student.avatar);\n\n  const [tasks, setTasks] = useState<Task[]>([\n    {\n      id: \"1\",\n      title: \"Math Practice\",\n      subject: \"Mathematics\",\n      dueDate: \"2024-01-15\",\n      priority: \"high\",\n      completed: false,\n      xpReward: 50,\n      studentId: student.id.toString(),\n      icon: Calculator,\n      color: \"from-stream-blue/20 to-stream-blue/30 hover:from-stream-blue/30 hover:to-stream-blue/40 border-stream-blue/40\",\n    },\n    {\n      id: \"2\",\n      title: \"Read a Story\",\n      subject: \"Reading\",\n      dueDate: \"2024-01-15\",\n      priority: \"medium\",\n      completed: false,\n      xpReward: 30,\n      studentId: student.id,\n      icon: BookOpen,\n      color: \"from-moss-green/20 to-moss-green/30 hover:from-moss-green/30 hover:to-moss-green/40 border-moss-green/40\",\n    },\n    {\n      id: \"3\",\n      title: \"Create Art\",\n      subject: \"Art\",\n      dueDate: \"2024-01-16\",\n      priority: \"low\",\n      completed: false,\n      xpReward: 25,\n      studentId: student.id,\n      icon: Palette,\n      color: \"from-fern-mist/40 to-fern-mist/60 hover:from-fern-mist/50 hover:to-fern-mist/70 border-fern-mist/60\",\n    },\n    {\n      id: \"4\",\n      title: \"Science Exploration\",\n      subject: \"Science\",\n      dueDate: \"2024-01-16\",\n      priority: \"medium\",\n      completed: false,\n      xpReward: 40,\n      studentId: student.id,\n      icon: Microscope,\n      color: \"from-stream-blue/15 to-moss-green/25 hover:from-stream-blue/25 hover:to-moss-green/35 border-moss-green/50\",\n    },\n    {\n      id: \"5\",\n      title: \"Writing Practice\",\n      subject: \"Writing\",\n      dueDate: \"2024-01-16\",\n      priority: \"medium\",\n      completed: false,\n      xpReward: 35,\n      studentId: student.id,\n      icon: PenTool,\n      color: \"from-pebble-gray/20 to-pebble-gray/30 hover:from-pebble-gray/30 hover:to-pebble-gray/40 border-pebble-gray/50\",\n    },\n    {\n      id: \"6\",\n      title: \"Physical Activity\",\n      subject: \"Physical Education\",\n      dueDate: \"2024-01-16\",\n      priority: \"low\",\n      completed: false,\n      xpReward: 20,\n      studentId: student.id,\n      icon: Activity,\n      color: \"from-moss-green/15 to-stream-blue/25 hover:from-moss-green/25 hover:to-stream-blue/35 border-stream-blue/50\",\n    },\n  ]);\n\n  const [showCelebration, setShowCelebration] = useState(false);\n  const [celebrationMessage, setCelebrationMessage] = useState(\"\");\n\n  const toggleTaskCompletion = (taskId: string) => {\n    setTasks(\n      tasks.map((task) => {\n        if (task.id === taskId && !task.completed) {\n          setCelebrationMessage(`Well done! +${task.xpReward} XP earned`);\n          setShowCelebration(true);\n          setTimeout(() => setShowCelebration(false), 3000);\n          return { ...task, completed: true };\n        }\n        return task;\n      }),\n    );\n  };\n\n  const completedTasks = tasks.filter((task) => task.completed).length;\n  const totalTasks = tasks.length;\n  const todayXP = tasks.filter((t) => t.completed).reduce((sum, t) => sum + t.xpReward, 0);\n\n  return (\n    <div \n      className=\"min-h-screen p-4\"\n      style={{\n        background: \"linear-gradient(135deg, hsl(var(--drift-sand)) 0%, hsl(var(--fern-mist)) 100%)\"\n      }}\n    >\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Celebration Animation */}\n        {showCelebration && (\n          <div className=\"fixed inset-0 flex items-center justify-center z-50 pointer-events-none\">\n            <div \n              className=\"text-white px-12 py-6 rounded-2xl text-2xl font-semibold animate-bounce shadow-2xl border border-white\"\n              style={{\n                background: \"linear-gradient(to right, hsl(var(--moss-green)), hsl(var(--stream-blue)))\"\n              }}\n            >\n              {celebrationMessage}\n            </div>\n          </div>\n        )}\n\n        {/* Title Card */}\n        <Card className=\"mb-8 bg-white/90 backdrop-blur-sm shadow-lg\" style={{borderColor: \"hsl(var(--fern-mist))\"}}>\n          <CardContent className=\"p-8 text-center\">\n            <div className=\"flex items-center justify-center gap-4 mb-6\">\n              <div \n                className=\"w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold\"\n                style={{\n                  backgroundColor: studentAvatar?.backgroundColor || '#3E4A59'\n                }}\n              >\n                {studentAvatar?.emoji || '👦'}\n              </div>\n              <div>\n                <h1 className=\"text-4xl font-bold\" style={{color: \"hsl(var(--charcoal-slate))\"}}>\n                  {student.fullName}'s Learning Path\n                </h1>\n                <p className=\"text-xl\" style={{color: \"hsl(var(--pebble-gray))\"}}>\n                  Level {student.level || 1} Explorer\n                </p>\n              </div>\n            </div>\n\n            {/* Progress Bar */}\n            <div \n              className=\"rounded-2xl p-4 shadow-inner mb-6\"\n              style={{\n                backgroundColor: \"hsl(var(--fern-mist))\",\n                borderColor: \"hsl(var(--fern-mist))\"\n              }}\n            >\n              <div className=\"flex justify-between text-lg font-semibold mb-3 px-2\">\n                <span style={{color: \"hsl(var(--charcoal-slate))\"}}>Today's Progress</span>\n                <span style={{color: \"hsl(var(--charcoal-slate))\"}}>\n                  {completedTasks}/{totalTasks}\n                </span>\n              </div>\n              <Progress \n                value={(completedTasks / totalTasks) * 100} \n                className=\"h-4\"\n                style={{\n                  backgroundColor: \"hsl(var(--drift-sand))\"\n                }}\n              />\n            </div>\n\n            {/* Stats Display */}\n            <div className=\"flex justify-center gap-6\">\n              <div \n                className=\"rounded-xl px-6 py-4 shadow-md border\"\n                style={{\n                  backgroundColor: \"white\",\n                  borderColor: \"hsl(var(--moss-green))\"\n                }}\n              >\n                <div className=\"flex items-center gap-2\">\n                  <Trophy className=\"w-6 h-6\" style={{color: \"hsl(var(--moss-green))\"}} />\n                  <span className=\"text-xl font-semibold\" style={{color: \"hsl(var(--charcoal-slate))\"}}>\n                    {todayXP} XP Today\n                  </span>\n                </div>\n              </div>\n              <div \n                className=\"rounded-xl px-6 py-4 shadow-md border\"\n                style={{\n                  backgroundColor: \"white\",\n                  borderColor: \"hsl(var(--stream-blue))\"\n                }}\n              >\n                <div className=\"flex items-center gap-2\">\n                  <Star className=\"w-6 h-6\" style={{color: \"hsl(var(--stream-blue))\"}} />\n                  <span className=\"text-xl font-semibold\" style={{color: \"hsl(var(--charcoal-slate))\"}}>\n                    Level {student.level}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Task Buttons Grid */}\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {tasks.map((task) => {\n            const IconComponent = task.icon;\n            return (\n              <button\n                key={task.id}\n                onClick={() => !task.completed && toggleTaskCompletion(task.id)}\n                className={`relative p-6 rounded-2xl border-2 transition-all duration-300 transform hover:scale-105 shadow-lg ${\n                  task.completed\n                    ? \"border-4 shadow-lg\"\n                    : \"border-2 shadow-xl hover:shadow-2xl hover:scale-105 active:scale-95\"\n                }`}\n                style={{\n                  background: task.completed \n                    ? \"linear-gradient(to bottom right, hsl(var(--moss-green) / 0.3), hsl(var(--moss-green) / 0.5))\"\n                    : `hsl(var(--drift-sand))`,\n                  borderColor: task.completed \n                    ? \"hsl(var(--moss-green))\"\n                    : \"hsl(var(--fern-mist))\"\n                }}\n                disabled={task.completed}\n              >\n                {/* Checkbox */}\n                <div className=\"absolute top-4 left-4\">\n                  <div\n                    className={`w-6 h-6 border-2 rounded-md flex items-center justify-center ${\n                      task.completed \n                        ? \"border-2\" \n                        : \"bg-white\"\n                    }`}\n                    style={{\n                      backgroundColor: task.completed ? \"hsl(var(--moss-green))\" : \"white\",\n                      borderColor: task.completed ? \"hsl(var(--moss-green))\" : \"hsl(var(--pebble-gray))\"\n                    }}\n                  >\n                    {task.completed && <CheckCircle2 className=\"w-4 h-4 text-white\" />}\n                  </div>\n                </div>\n\n                {/* XP Badge */}\n                <div className=\"absolute top-4 right-4\">\n                  <div \n                    className=\"text-white px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-1 shadow-md\"\n                    style={{backgroundColor: \"hsl(var(--charcoal-slate))\"}}\n                  >\n                    <Trophy className=\"w-3 h-3\" />\n                    {task.xpReward}\n                  </div>\n                </div>\n\n                {/* Task Content */}\n                <div className=\"flex items-center gap-4 mt-8\">\n                  {/* Icon */}\n                  <div \n                    className=\"w-16 h-16 rounded-xl flex items-center justify-center shadow-md border\"\n                    style={{\n                      backgroundColor: \"white\",\n                      borderColor: \"hsl(var(--fern-mist))\"\n                    }}\n                  >\n                    <IconComponent className=\"w-8 h-8\" style={{color: \"hsl(var(--charcoal-slate))\"}} />\n                  </div>\n\n                  {/* Task Text */}\n                  <div className=\"flex-1 text-left\">\n                    <h3\n                      className={`text-2xl font-bold mb-1 ${\n                        task.completed ? \"line-through\" : \"\"\n                      }`}\n                      style={{\n                        color: task.completed \n                          ? \"hsl(var(--pebble-gray))\" \n                          : \"hsl(var(--charcoal-slate))\",\n                        fontFamily: \"Comic Sans MS, cursive\"\n                      }}\n                    >\n                      {task.title}\n                    </h3>\n                    <p \n                      className=\"text-lg\"\n                      style={{\n                        color: \"hsl(var(--pebble-gray))\",\n                        fontFamily: \"Comic Sans MS, cursive\"\n                      }}\n                    >\n                      {task.subject}\n                    </p>\n                  </div>\n                </div>\n\n                {/* Completion Overlay */}\n                {task.completed && (\n                  <div className=\"absolute inset-0 bg-opacity-10 rounded-2xl flex items-center justify-center\">\n                    <div \n                      className=\"text-white px-4 py-2 rounded-xl text-lg font-semibold shadow-lg\"\n                      style={{backgroundColor: \"hsl(var(--moss-green))\"}}\n                    >\n                      ✓ Complete\n                    </div>\n                  </div>\n                )}\n              </button>\n            );\n          })}\n        </div>\n\n        {/* Encouragement Message */}\n        <Card \n          className=\"mt-8 border\"\n          style={{\n            background: \"linear-gradient(to right, hsl(var(--fern-mist) / 0.5), hsl(var(--stream-blue) / 0.3))\",\n            borderColor: \"hsl(var(--moss-green))\"\n          }}\n        >\n          <CardContent className=\"p-6 text-center\">\n            <h3 className=\"text-2xl font-bold mb-2\" style={{color: \"hsl(var(--charcoal-slate))\"}}>\n              Keep Growing, {student.fullName}!\n            </h3>\n            <p className=\"text-lg mb-4\" style={{color: \"hsl(var(--pebble-gray))\"}}>\n              {completedTasks === totalTasks\n                ? \"Excellent work! You've completed all your tasks today.\"\n                : `You're making great progress. ${totalTasks - completedTasks} more to go!`}\n            </p>\n            \n            {/* Parent Access Button */}\n            <div className=\"mt-6 pt-4 border-t\" style={{borderColor: \"hsl(var(--fern-mist))\"}}>\n              <Button\n                onClick={() => window.location.href = '/'}\n                variant=\"outline\"\n                className=\"text-sm px-4 py-2\"\n                style={{\n                  borderColor: \"hsl(var(--pebble-gray))\",\n                  color: \"hsl(var(--pebble-gray))\"\n                }}\n              >\n                Parent Dashboard\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default StudentDashboard;","size_bytes":14354},"client/src/pages/StudentLessons.tsx":{"content":"'use client'\n\nimport { useState } from \"react\"\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Progress } from \"@/components/ui/progress\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { BookOpen, CheckCircle, Clock, Star, Award, Target } from \"lucide-react\"\nimport { apiRequest } from \"@/lib/queryClient\"\nimport type { StudentDailyLessons, CurriculumLesson } from \"@shared/schema\"\n\ninterface StudentLessonsProps {\n  studentId: number\n}\n\nexport default function StudentLessons({ studentId }: StudentLessonsProps) {\n  const { toast } = useToast()\n  const queryClient = useQueryClient()\n  const [selectedLesson, setSelectedLesson] = useState<CurriculumLesson | null>(null)\n  const [lessonDialogOpen, setLessonDialogOpen] = useState(false)\n\n  // Fetch student's daily lessons\n  const { data: dailyLessons, isLoading } = useQuery<StudentDailyLessons>({\n    queryKey: [`/api/students/${studentId}/daily-lessons`],\n    enabled: !!studentId\n  })\n\n  // Update lesson progress mutation\n  const updateProgressMutation = useMutation({\n    mutationFn: async ({ lessonId, status, timeSpent, notes, score }: any) => \n      await apiRequest(`/api/lesson-progress/${lessonId}`, 'PUT', { \n        status, \n        timeSpent, \n        notes, \n        score,\n        studentId,\n        curriculumId: selectedLesson?.curriculumId,\n        lessonId\n      }),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/students/${studentId}/daily-lessons`] })\n      setLessonDialogOpen(false)\n      toast({\n        title: \"Great job!\",\n        description: \"Lesson progress updated successfully!\"\n      })\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Oops!\",\n        description: error.message || \"Failed to update progress\",\n        variant: \"destructive\"\n      })\n    }\n  })\n\n  const handleCompleteLesson = (lesson: CurriculumLesson, timeSpent?: number, notes?: string, score?: number) => {\n    updateProgressMutation.mutate({\n      lessonId: lesson.id,\n      status: 'completed',\n      timeSpent: timeSpent || 30,\n      notes: notes || '',\n      score: score || null\n    })\n  }\n\n  const handleStartLesson = (lesson: CurriculumLesson) => {\n    updateProgressMutation.mutate({\n      lessonId: lesson.id,\n      status: 'in_progress',\n      timeSpent: 0,\n      notes: '',\n      score: null\n    })\n  }\n\n  const subjectEmojis: Record<string, string> = {\n    'Math': '🔢',\n    'Science': '🔬',\n    'History': '📚',\n    'Language Arts': '✍️',\n    'Reading': '📖',\n    'Art': '🎨'\n  }\n\n  const subjectColors: Record<string, string> = {\n    'Math': 'bg-blue-100 text-blue-800',\n    'Science': 'bg-green-100 text-green-800',\n    'History': 'bg-yellow-100 text-yellow-800',\n    'Language Arts': 'bg-purple-100 text-purple-800',\n    'Reading': 'bg-pink-100 text-pink-800',\n    'Art': 'bg-orange-100 text-orange-800'\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-8 bg-gray-200 rounded w-1/3\"></div>\n          <div className=\"h-32 bg-gray-200 rounded\"></div>\n          <div className=\"h-32 bg-gray-200 rounded\"></div>\n        </div>\n      </div>\n    )\n  }\n\n  if (!dailyLessons || dailyLessons.curriculums.length === 0) {\n    return (\n      <Card>\n        <CardContent className=\"flex flex-col items-center justify-center p-12\">\n          <BookOpen className=\"h-16 w-16 text-gray-400 mb-4\" />\n          <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No Lessons Today</h3>\n          <p className=\"text-gray-600 text-center\">\n            Your parent will set up your curriculum soon. Check back later!\n          </p>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n          Today's Lessons for {dailyLessons.studentName}\n        </h1>\n        <p className=\"text-gray-600\">Complete your daily lessons to earn XP and level up!</p>\n      </div>\n\n      <div className=\"grid gap-6\">\n        {dailyLessons.curriculums.map((curriculum) => (\n          <Card key={curriculum.id} className=\"border-l-4 border-l-blue-500\">\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <span className=\"text-2xl\">{subjectEmojis[curriculum.subject] || '📚'}</span>\n                  <div>\n                    <CardTitle className=\"text-xl\">{curriculum.name}</CardTitle>\n                    <CardDescription>\n                      {curriculum.lessonsPerDay} lesson{curriculum.lessonsPerDay > 1 ? 's' : ''} per day\n                    </CardDescription>\n                  </div>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <Badge className={subjectColors[curriculum.subject] || 'bg-gray-100 text-gray-800'}>\n                    {curriculum.subject}\n                  </Badge>\n                  <div className=\"text-right\">\n                    <div className=\"text-sm font-medium text-gray-900\">{curriculum.progress}%</div>\n                    <Progress value={curriculum.progress} className=\"w-20\" />\n                  </div>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              {curriculum.todaysLessons.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {curriculum.todaysLessons.map((lesson, index) => (\n                    <div\n                      key={lesson.id}\n                      className=\"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors\"\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"flex-shrink-0\">\n                          {lesson.type === 'quiz' ? (\n                            <Target className=\"h-5 w-5 text-orange-500\" />\n                          ) : lesson.type === 'test' ? (\n                            <Award className=\"h-5 w-5 text-red-500\" />\n                          ) : (\n                            <BookOpen className=\"h-5 w-5 text-blue-500\" />\n                          )}\n                        </div>\n                        <div>\n                          <h3 className=\"font-medium text-gray-900\">\n                            Lesson {lesson.lessonNumber}: {lesson.title}\n                          </h3>\n                          <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\n                            <span className=\"flex items-center\">\n                              <Clock className=\"mr-1 h-3 w-3\" />\n                              {lesson.estimatedMinutes || 30} min\n                            </span>\n                            <Badge \n                              variant={lesson.type === 'lesson' ? 'secondary' : 'outline'}\n                              className=\"text-xs\"\n                            >\n                              {lesson.type}\n                            </Badge>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex space-x-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleStartLesson(lesson)}\n                          disabled={updateProgressMutation.isPending}\n                        >\n                          Start\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          onClick={() => {\n                            setSelectedLesson(lesson)\n                            setLessonDialogOpen(true)\n                          }}\n                          className=\"bg-green-600 hover:bg-green-700\"\n                        >\n                          <CheckCircle className=\"mr-1 h-3 w-3\" />\n                          Complete\n                        </Button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <Star className=\"h-12 w-12 text-yellow-500 mx-auto mb-3\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">All Done!</h3>\n                  <p className=\"text-gray-600\">\n                    You've completed all your {curriculum.subject} lessons for today!\n                  </p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* Lesson Completion Dialog */}\n      <Dialog open={lessonDialogOpen} onOpenChange={setLessonDialogOpen}>\n        <DialogContent className=\"sm:max-w-[400px]\">\n          <DialogHeader>\n            <DialogTitle>Complete Lesson</DialogTitle>\n            <DialogDescription>\n              {selectedLesson && `Mark \"${selectedLesson.title}\" as complete`}\n            </DialogDescription>\n          </DialogHeader>\n          <form \n            onSubmit={(e) => {\n              e.preventDefault()\n              const formData = new FormData(e.currentTarget)\n              const timeSpent = parseInt(formData.get('timeSpent') as string) || 30\n              const notes = formData.get('notes') as string\n              const score = selectedLesson?.type === 'quiz' || selectedLesson?.type === 'test' \n                ? parseInt(formData.get('score') as string) || null \n                : null\n              \n              if (selectedLesson) {\n                handleCompleteLesson(selectedLesson, timeSpent, notes, score)\n              }\n            }} \n            className=\"space-y-4\"\n          >\n            <div>\n              <label htmlFor=\"timeSpent\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Time Spent (minutes)\n              </label>\n              <input\n                type=\"number\"\n                id=\"timeSpent\"\n                name=\"timeSpent\"\n                defaultValue={selectedLesson?.estimatedMinutes || 30}\n                min=\"1\"\n                max=\"180\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              />\n            </div>\n\n            {(selectedLesson?.type === 'quiz' || selectedLesson?.type === 'test') && (\n              <div>\n                <label htmlFor=\"score\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Score (0-100)\n                </label>\n                <input\n                  type=\"number\"\n                  id=\"score\"\n                  name=\"score\"\n                  min=\"0\"\n                  max=\"100\"\n                  placeholder=\"Enter your score\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n            )}\n\n            <div>\n              <label htmlFor=\"notes\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Notes (optional)\n              </label>\n              <Textarea\n                id=\"notes\"\n                name=\"notes\"\n                placeholder=\"How did the lesson go? Any questions or thoughts?\"\n                rows={3}\n              />\n            </div>\n\n            <div className=\"flex justify-end space-x-2\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => setLessonDialogOpen(false)}\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={updateProgressMutation.isPending}\n                className=\"bg-green-600 hover:bg-green-700\"\n              >\n                {updateProgressMutation.isPending ? 'Saving...' : 'Mark Complete'}\n              </Button>\n            </div>\n          </form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}","size_bytes":12475},"client/src/pages/StudentLogin.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { useLocation, Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, getQueryFn } from \"@/lib/queryClient\";\nimport { ArrowLeft, GraduationCap } from \"lucide-react\";\nimport { getAvatarForStudent } from \"@/lib/avatars\";\n\nconst pinSchema = z.object({\n  pin: z.string().min(4, \"PIN must be at least 4 characters\").max(8, \"PIN must be at most 8 characters\"),\n});\n\ntype PinFormData = z.infer<typeof pinSchema>;\n\ninterface Student {\n  id: number;\n  fullName: string;\n  gradeLevel: string;\n  avatar: string | null;\n  pin: string | null;\n}\n\nexport default function StudentLogin() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [selectedStudent, setSelectedStudent] = useState<Student | null>(null);\n  \n  // Fetch available students\n  const { data: students, isLoading: studentsLoading } = useQuery<Student[]>({\n    queryKey: [\"/api/students\"],\n    queryFn: getQueryFn({ on401: \"returnNull\" }),\n    retry: false,\n  });\n\n  const form = useForm<PinFormData>({\n    resolver: zodResolver(pinSchema),\n    defaultValues: {\n      pin: \"\",\n    },\n  });\n\n  const loginMutation = useMutation({\n    mutationFn: async (data: PinFormData) => {\n      if (!selectedStudent) throw new Error(\"Please select a student first\");\n      \n      const response = await fetch(\"/api/auth/student-login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n        body: JSON.stringify({ \n          studentId: selectedStudent.id, \n          pin: data.pin \n        }),\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Login failed\");\n      }\n      \n      return response.json();\n    },\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      setTimeout(() => {\n        toast({\n          title: `Welcome back, ${selectedStudent?.fullName}!`,\n          description: \"Let's start learning today!\",\n        });\n        setLocation(\"/student\");\n      }, 100);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Login failed\",\n        description: error.message || \"Please check your PIN and try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: PinFormData) => {\n    loginMutation.mutate(data);\n  };\n\n  if (studentsLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-[#9CA3AF] via-[#A7B8A8] to-[#7FB3C4] flex items-center justify-center\">\n        <div className=\"text-xl font-bold text-[#4B5563]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n          Loading students...\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-[#9CA3AF] via-[#A7B8A8] to-[#7FB3C4] flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-2xl\">\n        {/* Back Button */}\n        <Link href=\"/\">\n          <Button variant=\"ghost\" className=\"mb-4 text-[#4B5563] hover:text-[#7FB3C4]\">\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Back to Home\n          </Button>\n        </Link>\n\n        <Card className=\"border-2 border-[#7FB3C4]/20\">\n          <CardHeader className=\"text-center\">\n            <div className=\"w-16 h-16 bg-[#7FB3C4] rounded-full flex items-center justify-center mx-auto mb-4\">\n              <GraduationCap className=\"w-8 h-8 text-white\" />\n            </div>\n            <CardTitle className=\"text-2xl font-bold text-[#4B5563]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n              Student Login\n            </CardTitle>\n            <CardDescription>\n              Choose your name and enter your PIN to start learning\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            {!selectedStudent ? (\n              <div>\n                <h3 className=\"text-lg font-bold text-[#4B5563] mb-4\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                  Who's learning today?\n                </h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  {students?.map((student) => {\n                    const avatar = getAvatarForStudent(student.fullName);\n                    return (\n                      <Button\n                        key={student.id}\n                        variant=\"outline\"\n                        className=\"h-auto p-4 flex flex-col items-center space-y-3 border-2 hover:border-[#7FB3C4] hover:bg-[#7FB3C4]/10\"\n                        onClick={() => setSelectedStudent(student)}\n                      >\n                        <div \n                          className=\"w-16 h-16 rounded-full flex items-center justify-center text-2xl\"\n                          style={{ backgroundColor: avatar.backgroundColor }}\n                        >\n                          {avatar.emoji}\n                        </div>\n                        <div className=\"text-center\">\n                          <p className=\"font-bold text-[#4B5563]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                            {student.fullName}\n                          </p>\n                          <p className=\"text-xs text-[#6B7280]\">\n                            {student.gradeLevel}\n                          </p>\n                        </div>\n                      </Button>\n                    );\n                  })}\n                </div>\n                \n                {(!students || students.length === 0) && (\n                  <div className=\"text-center py-8\">\n                    <p className=\"text-[#6B7280] mb-4\">\n                      No students found. Ask your parent to create student accounts first.\n                    </p>\n                    <Link href=\"/parent/login\">\n                      <Button variant=\"outline\" className=\"text-[#8BA88E] border-[#8BA88E]\">\n                        Parent Login\n                      </Button>\n                    </Link>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div>\n                <div className=\"flex items-center space-x-4 mb-6 p-4 bg-[#F3F4F6] rounded-lg\">\n                  <div \n                    className=\"w-12 h-12 rounded-full flex items-center justify-center text-xl\"\n                    style={{ backgroundColor: getAvatarForStudent(selectedStudent.fullName).backgroundColor }}\n                  >\n                    {getAvatarForStudent(selectedStudent.fullName).emoji}\n                  </div>\n                  <div>\n                    <p className=\"font-bold text-[#4B5563]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                      {selectedStudent.fullName}\n                    </p>\n                    <p className=\"text-sm text-[#6B7280]\">\n                      {selectedStudent.gradeLevel}\n                    </p>\n                  </div>\n                  <Button \n                    variant=\"ghost\" \n                    size=\"sm\" \n                    onClick={() => setSelectedStudent(null)}\n                    className=\"ml-auto text-[#6B7280] hover:text-[#4B5563]\"\n                  >\n                    Change\n                  </Button>\n                </div>\n\n                <Form {...form}>\n                  <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                    <FormField\n                      control={form.control}\n                      name=\"pin\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-lg\">Enter Your PIN</FormLabel>\n                          <FormControl>\n                            <Input \n                              type=\"password\" \n                              placeholder=\"Enter your 4-digit PIN\" \n                              {...field} \n                              className=\"text-2xl text-center tracking-widest\"\n                              maxLength={8}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <Button \n                      type=\"submit\" \n                      className=\"w-full bg-[#7FB3C4] hover:bg-[#6FA3B4] text-white text-lg py-6\"\n                      disabled={loginMutation.isPending}\n                      style={{ fontFamily: 'Comic Sans MS, cursive' }}\n                    >\n                      {loginMutation.isPending ? \"Signing in...\" : \"Start Learning!\"}\n                    </Button>\n                  </form>\n                </Form>\n\n                <div className=\"mt-6 text-center\">\n                  <p className=\"text-sm text-[#6B7280]\">\n                    Forgot your PIN? Ask your parent for help.\n                  </p>\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":9519},"client/src/pages/StudentTasks.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { format } from \"date-fns\";\nimport { Clock, Check, CalendarDays, BookOpen, Search, MoreVertical, AlertCircle } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from \"@/components/ui/tabs\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\n\ninterface Task {\n  id: number;\n  assignment: {\n    id: number;\n    title: string;\n    description?: string;\n    dueDate: string;\n    priority: string;\n  };\n  class: {\n    id: number;\n    name: string;\n  };\n  completed: boolean;\n  completedAt: string | null;\n}\n\ninterface Class {\n  id: number;\n  name: string;\n}\n\nconst StudentTasks = () => {\n  const { toast } = useToast();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedClass, setSelectedClass] = useState<string>(\"all\");\n  const [selectedTab, setSelectedTab] = useState(\"all\");\n  \n  const { data: tasksData, isLoading: isTasksLoading } = useQuery({\n    queryKey: [\"/api/student/tasks\"],\n  });\n  \n  const { data: classesData, isLoading: isClassesLoading } = useQuery({\n    queryKey: [\"/api/classes\"],\n  });\n  \n  const tasks = tasksData as Task[];\n  const classes = classesData as Class[];\n  \n  const updateTaskMutation = useMutation({\n    mutationFn: async ({ taskId, completed }: { taskId: number; completed: boolean }) => {\n      return apiRequest(\"PUT\", `/api/tasks/${taskId}`, { completed });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/student/tasks\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/student\"] });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update task status\",\n        variant: \"destructive\",\n      });\n    },\n  });\n  \n  const handleTaskComplete = (taskId: number, completed: boolean) => {\n    updateTaskMutation.mutate({ taskId, completed });\n    \n    toast({\n      title: completed ? \"Task completed\" : \"Task marked as incomplete\",\n      description: completed ? \"Great job! Task marked as complete.\" : \"Task marked as incomplete.\",\n      variant: completed ? \"default\" : \"destructive\",\n    });\n  };\n  \n  const isLoading = isTasksLoading || isClassesLoading;\n  const currentDate = format(new Date(), \"MMMM d, yyyy\");\n  \n  // Filter tasks based on search, class, and tab\n  const filteredTasks = tasks\n    ? tasks.filter(task => {\n        // Search filter\n        const matchesSearch = \n          task.assignment.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n          task.class.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n          (task.assignment.description && task.assignment.description.toLowerCase().includes(searchQuery.toLowerCase()));\n        \n        // Class filter\n        const matchesClass = selectedClass === \"all\" || task.class.id.toString() === selectedClass;\n        \n        // Tab filter\n        const matchesTab = \n          selectedTab === \"all\" || \n          (selectedTab === \"pending\" && !task.completed) ||\n          (selectedTab === \"completed\" && task.completed);\n        \n        return matchesSearch && matchesClass && matchesTab;\n      })\n    : [];\n  \n  // Sort tasks by due date (pending tasks) or completion date (completed tasks)\n  const sortedTasks = [...filteredTasks].sort((a, b) => {\n    if (a.completed && b.completed) {\n      // Sort completed tasks by completion date (newest first)\n      return new Date(b.completedAt || 0).getTime() - new Date(a.completedAt || 0).getTime();\n    } else if (!a.completed && !b.completed) {\n      // Sort pending tasks by due date (earliest first)\n      return new Date(a.assignment.dueDate).getTime() - new Date(b.assignment.dueDate).getTime();\n    } else {\n      // Pending tasks before completed tasks\n      return a.completed ? 1 : -1;\n    }\n  });\n  \n  // Group tasks by due date status (today, upcoming, overdue)\n  const todayTasks = sortedTasks.filter(task => {\n    if (task.completed) return false;\n    const dueDate = new Date(task.assignment.dueDate);\n    const today = new Date();\n    return dueDate.toDateString() === today.toDateString();\n  });\n  \n  const upcomingTasks = sortedTasks.filter(task => {\n    if (task.completed) return false;\n    const dueDate = new Date(task.assignment.dueDate);\n    const today = new Date();\n    return dueDate > today && dueDate.toDateString() !== today.toDateString();\n  });\n  \n  const overdueTasks = sortedTasks.filter(task => {\n    if (task.completed) return false;\n    const dueDate = new Date(task.assignment.dueDate);\n    const today = new Date();\n    return dueDate < today && dueDate.toDateString() !== today.toDateString();\n  });\n  \n  const completedTasks = sortedTasks.filter(task => task.completed);\n  \n  const getPriorityColor = (priority: string) => {\n    switch (priority.toLowerCase()) {\n      case \"high\":\n        return \"text-red-500\";\n      case \"medium\":\n        return \"text-amber-500\";\n      case \"low\":\n        return \"text-green-500\";\n      default:\n        return \"text-neutral-dark\";\n    }\n  };\n  \n  const formatDueDate = (dateString: string) => {\n    const dueDate = new Date(dateString);\n    const today = new Date();\n    const tomorrow = new Date(today);\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    \n    if (dueDate.toDateString() === today.toDateString()) {\n      return `Today at ${format(dueDate, \"h:mm a\")}`;\n    } else if (dueDate.toDateString() === tomorrow.toDateString()) {\n      return `Tomorrow at ${format(dueDate, \"h:mm a\")}`;\n    } else {\n      return format(dueDate, \"MMM d 'at' h:mm a\");\n    }\n  };\n  \n  const formatCompletedDate = (dateString: string | null) => {\n    if (!dateString) return \"Recently\";\n    \n    const completedDate = new Date(dateString);\n    const today = new Date();\n    \n    if (completedDate.toDateString() === today.toDateString()) {\n      return `Today at ${format(completedDate, \"h:mm a\")}`;\n    } else {\n      return format(completedDate, \"MMM d 'at' h:mm a\");\n    }\n  };\n  \n  const renderTaskList = (taskList: Task[], statusLabel?: string) => {\n    return (\n      <>\n        {statusLabel && (\n          <h3 className=\"text-sm font-medium text-neutral-dark mt-4 mb-2\">{statusLabel}</h3>\n        )}\n        \n        {taskList.length > 0 ? (\n          <div className=\"space-y-3\">\n            {taskList.map(task => (\n              <div \n                key={task.id} \n                className={`flex items-center rounded-lg p-3 border-l-4 ${\n                  task.completed \n                    ? \"bg-neutral-light bg-opacity-30 border-green-500\" \n                    : statusLabel === \"Overdue\"\n                    ? \"bg-neutral-light bg-opacity-50 border-red-500\"\n                    : statusLabel === \"Due Today\"\n                    ? \"bg-neutral-light bg-opacity-50 border-amber-500\"\n                    : \"bg-neutral-light bg-opacity-50 border-neutral-medium\"\n                }`}\n              >\n                <div className=\"mr-3\">\n                  <Checkbox \n                    checked={task.completed}\n                    onCheckedChange={(checked) => handleTaskComplete(task.id, !!checked)}\n                    className=\"h-5 w-5 rounded border-neutral-medium text-secondary\"\n                  />\n                </div>\n                <div className=\"flex-grow\">\n                  <h5 className={`text-neutral-darkest font-medium ${task.completed ? 'line-through' : ''}`}>\n                    {task.assignment.title}\n                  </h5>\n                  <div className=\"flex items-center text-xs text-neutral-dark mt-1\">\n                    <BookOpen className=\"h-3 w-3 mr-1\" />\n                    <span className=\"mr-3\">{task.class.name}</span>\n                    \n                    {task.completed ? (\n                      <>\n                        <Check className=\"h-3 w-3 mr-1 text-green-500\" />\n                        <span className=\"text-green-500\">\n                          Completed {formatCompletedDate(task.completedAt)}\n                        </span>\n                      </>\n                    ) : (\n                      <>\n                        {statusLabel === \"Overdue\" ? (\n                          <>\n                            <AlertCircle className=\"h-3 w-3 mr-1 text-red-500\" />\n                            <span className=\"mr-3 text-red-500\">\n                              {formatDueDate(task.assignment.dueDate)}\n                            </span>\n                          </>\n                        ) : (\n                          <>\n                            <Clock className=\"h-3 w-3 mr-1\" />\n                            <span className=\"mr-3\">{formatDueDate(task.assignment.dueDate)}</span>\n                          </>\n                        )}\n                        <span className={`mr-1 ${getPriorityColor(task.assignment.priority)}`}>•</span>\n                        <span className={getPriorityColor(task.assignment.priority)}>\n                          {task.assignment.priority.charAt(0).toUpperCase() + task.assignment.priority.slice(1)} Priority\n                        </span>\n                      </>\n                    )}\n                  </div>\n                  {task.assignment.description && (\n                    <p className=\"text-xs text-neutral-dark mt-1\">\n                      {task.assignment.description}\n                    </p>\n                  )}\n                </div>\n                <DropdownMenu>\n                  <DropdownMenuTrigger asChild>\n                    <Button variant=\"ghost\" className=\"text-neutral-dark hover:text-neutral-darkest ml-2 p-1 h-auto\">\n                      <MoreVertical className=\"h-5 w-5\" />\n                    </Button>\n                  </DropdownMenuTrigger>\n                  <DropdownMenuContent align=\"end\">\n                    <DropdownMenuItem onClick={() => handleTaskComplete(task.id, !task.completed)}>\n                      {task.completed ? \"Mark as Incomplete\" : \"Mark as Complete\"}\n                    </DropdownMenuItem>\n                  </DropdownMenuContent>\n                </DropdownMenu>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-4 text-neutral-dark\">\n            <p>No tasks found in this category</p>\n          </div>\n        )}\n      </>\n    );\n  };\n  \n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <p>Loading tasks...</p>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6\">\n        <h2 className=\"text-2xl font-medium text-neutral-darkest mb-2 md:mb-0\">My Tasks</h2>\n        <div>\n          <span className=\"text-sm text-neutral-dark\">Today: <span className=\"font-medium\">{currentDate}</span></span>\n        </div>\n      </div>\n      \n      <Card>\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex flex-col md:flex-row justify-between md:items-center\">\n            <CardTitle>All Tasks</CardTitle>\n            <div className=\"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2 mt-2 md:mt-0\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <Input \n                  placeholder=\"Search tasks...\" \n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-8 bg-neutral-light w-full md:w-auto\"\n                />\n              </div>\n              \n              <Select value={selectedClass} onValueChange={setSelectedClass}>\n                <SelectTrigger className=\"bg-neutral-light w-full md:w-[180px]\">\n                  <SelectValue placeholder=\"All Classes\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Classes</SelectItem>\n                  {classes?.map(cls => (\n                    <SelectItem key={cls.id} value={cls.id.toString()}>{cls.name}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Tabs defaultValue=\"all\" value={selectedTab} onValueChange={setSelectedTab} className=\"w-full\">\n            <TabsList className=\"grid grid-cols-3 mb-4\">\n              <TabsTrigger value=\"all\">All Tasks</TabsTrigger>\n              <TabsTrigger value=\"pending\">Pending</TabsTrigger>\n              <TabsTrigger value=\"completed\">Completed</TabsTrigger>\n            </TabsList>\n            \n            <TabsContent value=\"all\">\n              {overdueTasks.length > 0 && renderTaskList(overdueTasks, \"Overdue\")}\n              {todayTasks.length > 0 && renderTaskList(todayTasks, \"Due Today\")}\n              {upcomingTasks.length > 0 && renderTaskList(upcomingTasks, \"Upcoming\")}\n              {completedTasks.length > 0 && renderTaskList(completedTasks, \"Completed\")}\n              \n              {filteredTasks.length === 0 && (\n                <div className=\"text-center py-8 text-neutral-dark\">\n                  <p>No tasks found for the selected filters</p>\n                </div>\n              )}\n            </TabsContent>\n            \n            <TabsContent value=\"pending\">\n              {overdueTasks.length > 0 && renderTaskList(overdueTasks, \"Overdue\")}\n              {todayTasks.length > 0 && renderTaskList(todayTasks, \"Due Today\")}\n              {upcomingTasks.length > 0 && renderTaskList(upcomingTasks, \"Upcoming\")}\n              \n              {overdueTasks.length === 0 && todayTasks.length === 0 && upcomingTasks.length === 0 && (\n                <div className=\"text-center py-8 text-neutral-dark\">\n                  <p>No pending tasks found for the selected filters</p>\n                </div>\n              )}\n            </TabsContent>\n            \n            <TabsContent value=\"completed\">\n              {completedTasks.length > 0 ? renderTaskList(completedTasks) : (\n                <div className=\"text-center py-8 text-neutral-dark\">\n                  <p>No completed tasks found for the selected filters</p>\n                </div>\n              )}\n            </TabsContent>\n          </Tabs>\n        </CardContent>\n      </Card>\n      \n      {/* Task Progress Summary */}\n      <Card>\n        <CardHeader>\n          <CardTitle>My Progress Summary</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-4\">\n              <h4 className=\"text-sm font-medium text-neutral-dark\">Class Progress</h4>\n              {classes && classes.map(cls => {\n                const classTotal = tasks?.filter(task => task.class.id === cls.id).length || 0;\n                const classCompleted = tasks?.filter(task => task.class.id === cls.id && task.completed).length || 0;\n                const percentage = classTotal > 0 ? (classCompleted / classTotal) * 100 : 0;\n                \n                return (\n                  <div key={cls.id}>\n                    <div className=\"flex justify-between text-sm mb-1\">\n                      <span className=\"font-medium text-neutral-darkest\">{cls.name}</span>\n                      <span className=\"text-neutral-dark\">{Math.round(percentage)}%</span>\n                    </div>\n                    <div className=\"w-full bg-neutral-light rounded-full h-2\">\n                      <div \n                        className=\"bg-secondary h-2 rounded-full\"\n                        style={{ width: `${percentage}%` }}\n                      />\n                    </div>\n                  </div>\n                );\n              })}\n              \n              {(!classes || classes.length === 0) && (\n                <div className=\"text-center py-4 text-neutral-dark\">\n                  <p>No classes available</p>\n                </div>\n              )}\n            </div>\n            \n            <div>\n              <h4 className=\"text-sm font-medium text-neutral-dark mb-4\">Task Status</h4>\n              <div className=\"aspect-square max-w-[200px] mx-auto\">\n                <div className=\"relative h-full w-full rounded-full\">\n                  <svg className=\"h-full w-full\" viewBox=\"0 0 100 100\">\n                    {/* Background circle */}\n                    <circle\n                      cx=\"50\"\n                      cy=\"50\"\n                      r=\"40\"\n                      fill=\"none\"\n                      stroke=\"#e5e7eb\"\n                      strokeWidth=\"15\"\n                    />\n                    \n                    {/* Progress circle */}\n                    {tasks && tasks.length > 0 && (\n                      <circle\n                        cx=\"50\"\n                        cy=\"50\"\n                        r=\"40\"\n                        fill=\"none\"\n                        stroke=\"hsl(207, 90%, 54%)\"\n                        strokeWidth=\"15\"\n                        strokeDasharray={`${(tasks.filter(t => t.completed).length / tasks.length) * 251.2} 251.2`}\n                        strokeDashoffset=\"0\"\n                        transform=\"rotate(-90 50 50)\"\n                      />\n                    )}\n                  </svg>\n                  <div className=\"absolute inset-0 flex items-center justify-center flex-col\">\n                    <span className=\"text-3xl font-bold\">\n                      {tasks && tasks.length > 0\n                        ? Math.round((tasks.filter(t => t.completed).length / tasks.length) * 100)\n                        : 0}%\n                    </span>\n                    <span className=\"text-sm text-neutral-dark\">Completed</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default StudentTasks;\n","size_bytes":18474},"client/src/pages/Students.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { \n  PlusIcon, \n  Search, \n  Edit, \n  Trash, \n  MoreHorizontal, \n  Users, \n  GraduationCap, \n  BookOpen, \n  Calendar, \n  CheckCircle, \n  Clock, \n  ChevronRight,\n  ArrowLeft,\n  FileText,\n  Award,\n  TrendingUp\n} from \"lucide-react\";\nimport { getAvatarForStudent, natureAvatars } from \"@/lib/avatars\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Label } from \"@/components/ui/label\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertStudentSchema } from \"@shared/schema\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { z } from \"zod\";\n\ninterface Student {\n  id: number;\n  fullName: string;\n  gradeLevel: string;\n  parentId: number;\n  avatar?: string | null;\n  level?: number | null;\n  xp?: number | null;\n  totalXp?: number | null;\n  pin?: string | null;\n  createdAt?: Date | null;\n}\n\nconst Students = () => {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n  const [editingStudent, setEditingStudent] = useState<Student | null>(null);\n  const [selectedStudent, setSelectedStudent] = useState<Student | null>(null);\n  const [selectedClass, setSelectedClass] = useState<any>(null);\n  const [view, setView] = useState<'students' | 'classes' | 'assignments'>('students');\n  const { toast } = useToast();\n\n  // Get current authenticated user\n  const { data: currentUser } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  // Fetch family students\n  const { data: students } = useQuery({\n    queryKey: [\"/api/auth/students\"],\n    enabled: !!currentUser && currentUser?.role === \"parent\",\n  });\n\n  // Mock data for student classes and assignments (would come from API)\n  const getStudentClasses = (studentId: number) => [\n    {\n      id: 1,\n      name: \"Math\",\n      description: \"Arithmetic, Algebra, and Problem Solving\",\n      progress: 85,\n      totalAssignments: 12,\n      completedAssignments: 10,\n      color: \"#8BA88E\"\n    },\n    {\n      id: 2,\n      name: \"Science\",\n      description: \"Nature Studies and Simple Experiments\",\n      progress: 72,\n      totalAssignments: 8,\n      completedAssignments: 6,\n      color: \"#A8C7DD\"\n    },\n    {\n      id: 3,\n      name: \"Reading\",\n      description: \"Literature and Comprehension\",\n      progress: 90,\n      totalAssignments: 15,\n      completedAssignments: 14,\n      color: \"#D9E5D1\"\n    },\n    {\n      id: 4,\n      name: \"History\",\n      description: \"World History and Geography\",\n      progress: 65,\n      totalAssignments: 10,\n      completedAssignments: 7,\n      color: \"#F5F2EA\"\n    }\n  ];\n\n  const getClassAssignments = (classId: number) => [\n    {\n      id: 1,\n      title: \"Multiplication Tables Practice\",\n      description: \"Complete multiplication tables 1-12\",\n      dueDate: \"2025-01-05\",\n      status: \"completed\",\n      type: \"practice\"\n    },\n    {\n      id: 2,\n      title: \"Word Problems Set A\",\n      description: \"Solve 10 word problems involving addition and subtraction\",\n      dueDate: \"2025-01-07\",\n      status: \"pending\",\n      type: \"homework\"\n    },\n    {\n      id: 3,\n      title: \"Geometry Shapes Quiz\",\n      description: \"Identify and describe basic geometric shapes\",\n      dueDate: \"2025-01-08\",\n      status: \"pending\",\n      type: \"quiz\"\n    },\n    {\n      id: 4,\n      title: \"Fractions Introduction\",\n      description: \"Learn about halves, thirds, and quarters\",\n      dueDate: \"2025-01-10\",\n      status: \"not_started\",\n      type: \"lesson\"\n    }\n  ];\n\n  const form = useForm({\n    resolver: zodResolver(insertStudentSchema),\n    defaultValues: {\n      fullName: \"\",\n      gradeLevel: \"\",\n      avatar: \"\",\n      pin: \"\",\n    },\n  });\n\n  const handleEditStudent = (student: Student) => {\n    setEditingStudent(student);\n    form.reset({\n      fullName: student.fullName,\n      gradeLevel: student.gradeLevel,\n      avatar: student.avatar || \"\",\n      pin: student.pin || \"\",\n    });\n    setIsAddModalOpen(true);\n  };\n\n  const resetForm = () => {\n    setEditingStudent(null);\n    form.reset({\n      fullName: \"\",\n      gradeLevel: \"\",\n      avatar: \"\",\n      pin: \"\",\n    });\n  };\n\n  // Handle navigation breadcrumbs\n  const getBreadcrumb = () => {\n    if (view === 'students') return 'Students';\n    if (view === 'classes') return `${selectedStudent?.fullName} > Classes`;\n    if (view === 'assignments') return `${selectedStudent?.fullName} > ${selectedClass?.name} > Assignments`;\n    return 'Students';\n  };\n\n  const handleBackClick = () => {\n    if (view === 'assignments') {\n      setView('classes');\n      setSelectedClass(null);\n    } else if (view === 'classes') {\n      setView('students');\n      setSelectedStudent(null);\n    }\n  };\n\n  const filteredStudents = students?.filter((student: any) =>\n    student.fullName.toLowerCase().includes(searchTerm.toLowerCase())\n  ) || [];\n\n  // Student List View\n  if (view === 'students') {\n    return (\n      <div className=\"space-y-6 p-6\">\n        {/* Header */}\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6\">\n          <div>\n            <h2 className=\"text-3xl font-bold text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n              Students\n            </h2>\n            <p className=\"text-[#7E8A97] mt-1\">\n              Manage your family's learning journey\n            </p>\n          </div>\n          <Button \n            onClick={() => setIsAddModalOpen(true)}\n            className=\"bg-gradient-to-r from-[#7E8A97] to-[#8BA88E] hover:from-[#6E7A87] to-[#7B987E] text-white\"\n          >\n            <PlusIcon className=\"h-4 w-4 mr-2\" />\n            Add Student\n          </Button>\n        </div>\n\n        {/* Search */}\n        <div className=\"relative mb-6\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#7E8A97] h-4 w-4\" />\n          <Input\n            placeholder=\"Search students...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"pl-10 border-[#D9E5D1] focus:border-[#8BA88E]\"\n          />\n        </div>\n\n        {/* Students Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredStudents.map((student: any) => {\n            const avatar = getAvatarForStudent(student.fullName);\n            const studentClasses = getStudentClasses(student.id);\n            const overallProgress = Math.round(\n              studentClasses.reduce((acc, cls) => acc + cls.progress, 0) / studentClasses.length\n            );\n\n            return (\n              <Card \n                key={student.id} \n                className=\"border-[#D9E5D1] hover:shadow-lg transition-shadow cursor-pointer\"\n                onClick={() => {\n                  setSelectedStudent(student);\n                  setView('classes');\n                }}\n              >\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center space-x-4 mb-4\">\n                    <div \n                      className=\"w-16 h-16 rounded-full flex items-center justify-center text-2xl\"\n                      style={{ backgroundColor: avatar.backgroundColor }}\n                    >\n                      {avatar.emoji}\n                    </div>\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-lg font-semibold text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                        {student.fullName}\n                      </h3>\n                      <p className=\"text-[#7E8A97] text-sm\">{student.gradeLevel}</p>\n                    </div>\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild onClick={(e) => e.stopPropagation()}>\n                        <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\n                          <MoreHorizontal className=\"h-4 w-4\" />\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\">\n                        <DropdownMenuItem onClick={(e) => {\n                          e.stopPropagation();\n                          handleEditStudent(student);\n                        }}>\n                          <Edit className=\"mr-2 h-4 w-4\" />\n                          Edit\n                        </DropdownMenuItem>\n                        <DropdownMenuItem className=\"text-red-600\">\n                          <Trash className=\"mr-2 h-4 w-4\" />\n                          Delete\n                        </DropdownMenuItem>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"text-sm text-[#7E8A97]\">Overall Progress</span>\n                      <span className=\"text-sm font-medium text-[#3E4A59]\">{overallProgress}%</span>\n                    </div>\n                    <Progress value={overallProgress} className=\"h-2\" />\n                    \n                    <div className=\"flex justify-between items-center text-sm\">\n                      <span className=\"text-[#7E8A97]\">Active Classes</span>\n                      <span className=\"font-medium text-[#3E4A59]\">{studentClasses.length}</span>\n                    </div>\n\n                    <div className=\"flex justify-between items-center text-sm\">\n                      <span className=\"text-[#7E8A97]\">Completed Tasks</span>\n                      <span className=\"font-medium text-[#3E4A59]\">\n                        {studentClasses.reduce((acc, cls) => acc + cls.completedAssignments, 0)}/\n                        {studentClasses.reduce((acc, cls) => acc + cls.totalAssignments, 0)}\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4 pt-4 border-t border-[#D9E5D1]\">\n                    <Button \n                      variant=\"ghost\" \n                      className=\"w-full text-[#8BA88E] hover:bg-[#D9E5D1]\"\n                    >\n                      View Classes\n                      <ChevronRight className=\"ml-2 h-4 w-4\" />\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n\n        {/* Add/Edit Student Modal */}\n        <Dialog open={isAddModalOpen} onOpenChange={setIsAddModalOpen}>\n          <DialogContent className=\"sm:max-w-[425px]\">\n            <DialogHeader>\n              <DialogTitle style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                {editingStudent ? \"Edit Student\" : \"Add New Student\"}\n              </DialogTitle>\n              <DialogDescription>\n                {editingStudent ? \"Update student information\" : \"Add a new student to your family\"}\n              </DialogDescription>\n            </DialogHeader>\n            <Form {...form}>\n              <form className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"fullName\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Full Name</FormLabel>\n                      <FormControl>\n                        <Input placeholder=\"Enter student's full name\" {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"gradeLevel\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Grade Level</FormLabel>\n                      <FormControl>\n                        <Input placeholder=\"e.g., 3rd Grade, Kindergarten\" {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"avatar\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Avatar</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Choose an avatar\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          {natureAvatars.map((avatar) => (\n                            <SelectItem key={avatar.id} value={avatar.id}>\n                              <div className=\"flex items-center space-x-2\">\n                                <span>{avatar.emoji}</span>\n                                <span>{avatar.name}</span>\n                              </div>\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"pin\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>PIN (Optional)</FormLabel>\n                      <FormControl>\n                        <Input type=\"password\" placeholder=\"4-digit PIN for student login\" {...field} />\n                      </FormControl>\n                      <FormDescription>\n                        Optional PIN for student to access their own tasks\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </form>\n            </Form>\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => {\n                  setIsAddModalOpen(false);\n                  resetForm();\n                }}\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                className=\"bg-gradient-to-r from-[#7E8A97] to-[#8BA88E] hover:from-[#6E7A87] to-[#7B987E] text-white\"\n              >\n                {editingStudent ? \"Update\" : \"Add\"} Student\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      </div>\n    );\n  }\n\n  // Classes View for Selected Student\n  if (view === 'classes' && selectedStudent) {\n    const studentClasses = getStudentClasses(selectedStudent.id);\n    const avatar = getAvatarForStudent(selectedStudent.fullName);\n\n    return (\n      <div className=\"space-y-6 p-6\">\n        {/* Header with Breadcrumb */}\n        <div className=\"flex items-center space-x-4 mb-6\">\n          <Button \n            variant=\"ghost\" \n            onClick={handleBackClick}\n            className=\"text-[#7E8A97] hover:text-[#3E4A59]\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back to Students\n          </Button>\n        </div>\n\n        <div className=\"flex items-center space-x-4 mb-6\">\n          <div \n            className=\"w-16 h-16 rounded-full flex items-center justify-center text-2xl\"\n            style={{ backgroundColor: avatar.backgroundColor }}\n          >\n            {avatar.emoji}\n          </div>\n          <div>\n            <h2 className=\"text-3xl font-bold text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n              {selectedStudent.fullName}'s Classes\n            </h2>\n            <p className=\"text-[#7E8A97] mt-1\">\n              {selectedStudent.gradeLevel} • {studentClasses.length} Active Classes\n            </p>\n          </div>\n        </div>\n\n        {/* Classes Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {studentClasses.map((classItem) => (\n            <Card \n              key={classItem.id}\n              className=\"border-[#D9E5D1] hover:shadow-lg transition-shadow cursor-pointer\"\n              onClick={() => {\n                setSelectedClass(classItem);\n                setView('assignments');\n              }}\n            >\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div \n                      className=\"w-12 h-12 rounded-lg flex items-center justify-center\"\n                      style={{ backgroundColor: classItem.color }}\n                    >\n                      <BookOpen className=\"h-6 w-6 text-white\" />\n                    </div>\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                        {classItem.name}\n                      </h3>\n                      <p className=\"text-sm text-[#7E8A97]\">{classItem.description}</p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-sm text-[#7E8A97]\">Progress</span>\n                    <span className=\"text-sm font-medium text-[#3E4A59]\">{classItem.progress}%</span>\n                  </div>\n                  <Progress value={classItem.progress} className=\"h-2\" />\n\n                  <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                    <div>\n                      <span className=\"text-[#7E8A97]\">Completed</span>\n                      <p className=\"font-medium text-[#3E4A59]\">{classItem.completedAssignments}</p>\n                    </div>\n                    <div>\n                      <span className=\"text-[#7E8A97]\">Total</span>\n                      <p className=\"font-medium text-[#3E4A59]\">{classItem.totalAssignments}</p>\n                    </div>\n                  </div>\n\n                  <Button \n                    variant=\"ghost\" \n                    className=\"w-full text-[#8BA88E] hover:bg-[#D9E5D1] mt-4\"\n                  >\n                    View Assignments\n                    <ChevronRight className=\"ml-2 h-4 w-4\" />\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // Assignments View for Selected Class\n  if (view === 'assignments' && selectedStudent && selectedClass) {\n    const assignments = getClassAssignments(selectedClass.id);\n    const avatar = getAvatarForStudent(selectedStudent.fullName);\n\n    return (\n      <div className=\"space-y-6 p-6\">\n        {/* Header with Breadcrumb */}\n        <div className=\"flex items-center space-x-4 mb-6\">\n          <Button \n            variant=\"ghost\" \n            onClick={handleBackClick}\n            className=\"text-[#7E8A97] hover:text-[#3E4A59]\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back to Classes\n          </Button>\n        </div>\n\n        <div className=\"flex items-center space-x-4 mb-6\">\n          <div \n            className=\"w-16 h-16 rounded-full flex items-center justify-center text-2xl\"\n            style={{ backgroundColor: avatar.backgroundColor }}\n          >\n            {avatar.emoji}\n          </div>\n          <div>\n            <h2 className=\"text-3xl font-bold text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n              {selectedClass.name} Assignments\n            </h2>\n            <p className=\"text-[#7E8A97] mt-1\">\n              {selectedStudent.fullName} • {assignments.length} Assignments\n            </p>\n          </div>\n        </div>\n\n        {/* Assignments List */}\n        <div className=\"space-y-4\">\n          {assignments.map((assignment) => {\n            const getStatusColor = (status: string) => {\n              switch (status) {\n                case 'completed': return 'bg-[#D9E5D1] text-[#8BA88E]';\n                case 'pending': return 'bg-yellow-100 text-yellow-700';\n                case 'not_started': return 'bg-gray-100 text-gray-700';\n                default: return 'bg-gray-100 text-gray-700';\n              }\n            };\n\n            const getStatusIcon = (status: string) => {\n              switch (status) {\n                case 'completed': return <CheckCircle className=\"h-4 w-4\" />;\n                case 'pending': return <Clock className=\"h-4 w-4\" />;\n                case 'not_started': return <Calendar className=\"h-4 w-4\" />;\n                default: return <Calendar className=\"h-4 w-4\" />;\n              }\n            };\n\n            const getTypeIcon = (type: string) => {\n              switch (type) {\n                case 'homework': return <FileText className=\"h-5 w-5\" />;\n                case 'quiz': return <Award className=\"h-5 w-5\" />;\n                case 'practice': return <TrendingUp className=\"h-5 w-5\" />;\n                case 'lesson': return <BookOpen className=\"h-5 w-5\" />;\n                default: return <FileText className=\"h-5 w-5\" />;\n              }\n            };\n\n            return (\n              <Card key={assignment.id} className=\"border-[#D9E5D1]\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-start space-x-4 flex-1\">\n                      <div className=\"p-2 bg-[#F5F2EA] rounded-lg\">\n                        {getTypeIcon(assignment.type)}\n                      </div>\n                      <div className=\"flex-1\">\n                        <h3 className=\"text-lg font-semibold text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                          {assignment.title}\n                        </h3>\n                        <p className=\"text-[#7E8A97] text-sm mb-2\">{assignment.description}</p>\n                        <div className=\"flex items-center space-x-4 text-sm\">\n                          <span className=\"text-[#7E8A97]\">Due: {assignment.dueDate}</span>\n                          <Badge className={`text-xs ${getStatusColor(assignment.status)}`}>\n                            {getStatusIcon(assignment.status)}\n                            <span className=\"ml-1 capitalize\">{assignment.status.replace('_', ' ')}</span>\n                          </Badge>\n                        </div>\n                      </div>\n                    </div>\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\n                          <MoreHorizontal className=\"h-4 w-4\" />\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\">\n                        <DropdownMenuItem>\n                          <Edit className=\"mr-2 h-4 w-4\" />\n                          Edit Assignment\n                        </DropdownMenuItem>\n                        <DropdownMenuItem>\n                          <CheckCircle className=\"mr-2 h-4 w-4\" />\n                          Mark Complete\n                        </DropdownMenuItem>\n                        <DropdownMenuItem className=\"text-red-600\">\n                          <Trash className=\"mr-2 h-4 w-4\" />\n                          Delete\n                        </DropdownMenuItem>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n\n        {/* Add Assignment Button */}\n        <Button \n          className=\"bg-gradient-to-r from-[#7E8A97] to-[#8BA88E] hover:from-[#6E7A87] to-[#7B987E] text-white\"\n        >\n          <PlusIcon className=\"h-4 w-4 mr-2\" />\n          Add Assignment\n        </Button>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nexport default Students;","size_bytes":25103},"client/src/pages/TeacherDashboard.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { format } from \"date-fns\";\nimport { PlusIcon, Users, BookOpen, CheckCircle, TrendingUp, AlertCircle, Bell, ExternalLink, MoreVertical, Eye } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { getAvatarForStudent } from \"@/lib/avatars\";\n\ninterface DashboardData {\n  classes: ClassWithCount[];\n  studentProgress: StudentProgressData[];\n  completionRate: number;\n}\n\ninterface ClassWithCount {\n  id: number;\n  name: string;\n  teacherId: number;\n  gradeLevel?: string;\n  description?: string;\n  studentCount: number;\n}\n\ninterface StudentProgressData {\n  studentId: number;\n  fullName: string;\n  className: string;\n  completedTasks: number;\n  pendingTasks: number;\n  progressPercentage: number;\n}\n\ninterface Activity {\n  id: number;\n  type: \"completion\" | \"missed\" | \"notification\";\n  studentName?: string;\n  assignmentTitle?: string;\n  timeAgo: string;\n}\n\nconst TeacherDashboard = () => {\n  const [selectedClass, setSelectedClass] = useState<string>(\"all\");\n  const [activities, setActivities] = useState<Activity[]>([]);\n\n  // Get current authenticated user\n  const { data: currentUser } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  // Fetch family students\n  const { data: students, isLoading: studentsLoading } = useQuery({\n    queryKey: [\"/api/auth/students\"],\n    enabled: !!currentUser && currentUser.role === \"parent\",\n  });\n\n  // Fetch parent dashboard data (would need to implement this endpoint)\n  const { data: dashboardData, isLoading: dashboardLoading } = useQuery({\n    queryKey: [\"/api/auth/dashboard\"],\n    enabled: !!currentUser && currentUser.role === \"parent\",\n  });\n\n  const isLoading = studentsLoading || dashboardLoading;\n  \n  // Generate activities based on your actual students\n  useEffect(() => {\n    if (students && students.length > 0) {\n      setActivities([\n        {\n          id: 1,\n          type: \"completion\",\n          studentName: students[0]?.fullName || \"Bryton\",\n          assignmentTitle: \"Math Practice\",\n          timeAgo: \"25 minutes ago\"\n        },\n        {\n          id: 2,\n          type: \"completion\",\n          studentName: students[1]?.fullName || \"Riley\",\n          assignmentTitle: \"Reading Comprehension\",\n          timeAgo: \"1 hour ago\"\n        },\n        {\n          id: 3,\n          type: \"notification\",\n          assignmentTitle: \"Science Activity Due Tomorrow\",\n          timeAgo: \"2 hours ago\"\n        }\n      ]);\n    }\n  }, [students]);\n  \n  const currentDate = format(new Date(), \"MMMM d, yyyy\");\n  \n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <p>Loading dashboard data...</p>\n      </div>\n    );\n  }\n  \n  // Create simplified dashboard data from your actual students\n  const simpleData = {\n    totalStudents: students?.length || 0,\n    activeClasses: 4, // Math, Science, Reading, History\n    completedTasks: 28,\n    pendingTasks: 12,\n    completionRate: Math.round((28 / 40) * 100) // 28 completed out of 40 total\n  };\n  \n  const classes = [\n    { id: 1, name: \"Math\", studentCount: students?.length || 0 },\n    { id: 2, name: \"Science\", studentCount: students?.length || 0 },\n    { id: 3, name: \"Reading\", studentCount: students?.length || 0 },\n    { id: 4, name: \"History\", studentCount: students?.length || 0 }\n  ];\n  \n  const activityIcon = (type: string) => {\n    switch (type) {\n      case \"completion\":\n        return (\n          <div className=\"w-10 h-10 rounded-full bg-primary bg-opacity-10 flex items-center justify-center\">\n            <CheckCircle className=\"h-5 w-5 text-primary\" />\n          </div>\n        );\n      case \"missed\":\n        return (\n          <div className=\"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center\">\n            <AlertCircle className=\"h-5 w-5 text-red-500\" />\n          </div>\n        );\n      case \"notification\":\n        return (\n          <div className=\"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center\">\n            <Bell className=\"h-5 w-5 text-amber-500\" />\n          </div>\n        );\n      default:\n        return null;\n    }\n  };\n  \n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6\">\n        <h2 className=\"text-2xl font-medium text-neutral-darkest mb-2 md:mb-0\">Teacher Dashboard</h2>\n        <div className=\"flex space-x-2\">\n          <span className=\"text-sm text-neutral-dark\">Today: <span className=\"font-medium\">{currentDate}</span></span>\n          <Button onClick={() => setIsAddAssignmentOpen(true)} className=\"bg-primary hover:bg-primary-dark text-white flex items-center\">\n            <PlusIcon className=\"h-4 w-4 mr-1\" />\n            <span>New Assignment</span>\n          </Button>\n        </div>\n      </div>\n      \n      {/* Overview Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card className=\"p-5 border-l-4 border-primary\">\n          <div className=\"flex justify-between items-start\">\n            <div>\n              <p className=\"text-neutral-dark text-sm\">Total Students</p>\n              <h3 className=\"text-2xl font-medium text-neutral-darkest\">\n                {dashboardData?.studentProgress.length || 0}\n              </h3>\n            </div>\n            <div className=\"bg-primary bg-opacity-10 p-2 rounded-full\">\n              <Users className=\"h-5 w-5 text-primary\" />\n            </div>\n          </div>\n          <p className=\"text-xs text-success mt-2 flex items-center\">\n            <TrendingUp className=\"h-3 w-3 mr-1\" />\n            <span>+12 from last month</span>\n          </p>\n        </Card>\n        \n        <Card className=\"p-5 border-l-4 border-amber-500\">\n          <div className=\"flex justify-between items-start\">\n            <div>\n              <p className=\"text-neutral-dark text-sm\">Active Classes</p>\n              <h3 className=\"text-2xl font-medium text-neutral-darkest\">\n                {dashboardData?.classes.length || 0}\n              </h3>\n            </div>\n            <div className=\"bg-amber-100 p-2 rounded-full\">\n              <BookOpen className=\"h-5 w-5 text-amber-500\" />\n            </div>\n          </div>\n          <p className=\"text-xs text-neutral-dark mt-2\">\n            Across {new Set(dashboardData?.classes.map(c => c.gradeLevel)).size || 0} grade levels\n          </p>\n        </Card>\n        \n        <Card className=\"p-5 border-l-4 border-green-500\">\n          <div className=\"flex justify-between items-start\">\n            <div>\n              <p className=\"text-neutral-dark text-sm\">Task Completion</p>\n              <h3 className=\"text-2xl font-medium text-neutral-darkest\">\n                {Math.round(dashboardData?.completionRate || 0)}%\n              </h3>\n            </div>\n            <div className=\"bg-green-100 p-2 rounded-full\">\n              <CheckCircle className=\"h-5 w-5 text-green-500\" />\n            </div>\n          </div>\n          <Progress \n            value={dashboardData?.completionRate || 0} \n            className=\"h-1.5 mt-3\"\n          />\n        </Card>\n      </div>\n      \n      {/* Recent Activity Section */}\n      <Card className=\"p-5\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-lg font-medium text-neutral-darkest\">Today's Activities</h3>\n          <Button variant=\"ghost\" className=\"text-primary text-sm flex items-center hover:bg-transparent hover:underline p-0\">\n            <span>View All</span>\n            <ExternalLink className=\"h-4 w-4 ml-1\" />\n          </Button>\n        </div>\n        \n        <div className=\"space-y-4\">\n          {activities.map(activity => (\n            <div key={activity.id} className=\"flex items-start border-b border-neutral-light pb-3\">\n              <div className=\"flex-shrink-0 mr-3\">\n                {activityIcon(activity.type)}\n              </div>\n              <div className=\"flex-grow\">\n                <p className=\"text-neutral-darkest\">\n                  {activity.type === \"notification\" ? (\n                    <>\n                      New assignment <span className=\"font-medium\">{activity.assignmentTitle}</span> is due tomorrow\n                    </>\n                  ) : (\n                    <>\n                      <span className=\"font-medium\">{activity.studentName}</span>\n                      {activity.type === \"completion\" ? \" completed \" : \" missed deadline for \"}\n                      <span className=\"font-medium\">{activity.assignmentTitle}</span>\n                    </>\n                  )}\n                </p>\n                <p className=\"text-xs text-neutral-dark mt-1\">{activity.timeAgo}</p>\n              </div>\n              <Button variant=\"ghost\" className=\"text-primary hover:text-primary-dark p-1 h-auto\">\n                <MoreVertical className=\"h-5 w-5\" />\n              </Button>\n            </div>\n          ))}\n        </div>\n      </Card>\n      \n      {/* Student Progress Section */}\n      <Card className=\"p-5\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-lg font-medium text-neutral-darkest\">Student Progress</h3>\n          <div className=\"flex space-x-2\">\n            <Select value={selectedClass} onValueChange={setSelectedClass}>\n              <SelectTrigger className=\"bg-neutral-light text-neutral-darkest w-[180px]\">\n                <SelectValue placeholder=\"All Classes\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Classes</SelectItem>\n                {dashboardData?.classes.map(cls => (\n                  <SelectItem key={cls.id} value={cls.name}>{cls.name}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full\">\n            <thead>\n              <tr className=\"text-left text-sm text-neutral-dark border-b border-neutral-light\">\n                <th className=\"py-3 px-4 font-medium\">Student</th>\n                <th className=\"py-3 px-4 font-medium\">Class</th>\n                <th className=\"py-3 px-4 font-medium\">Completed Tasks</th>\n                <th className=\"py-3 px-4 font-medium\">Pending Tasks</th>\n                <th className=\"py-3 px-4 font-medium\">Progress</th>\n                <th className=\"py-3 px-4 font-medium\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredStudents.length > 0 ? (\n                filteredStudents.map((student, index) => (\n                  <tr key={`${student.studentId}-${index}`} className=\"border-b border-neutral-light hover:bg-neutral-light\">\n                    <td className=\"py-3 px-4\">\n                      <div className=\"flex items-center\">\n                        <div className=\"w-8 h-8 rounded-full bg-primary-light text-white flex items-center justify-center mr-3\">\n                          <span className=\"text-sm font-medium\">\n                            {student.fullName.split(' ').map(n => n[0]).join('')}\n                          </span>\n                        </div>\n                        <span className=\"font-medium text-neutral-darkest\">{student.fullName}</span>\n                      </div>\n                    </td>\n                    <td className=\"py-3 px-4 text-neutral-dark\">{student.className}</td>\n                    <td className=\"py-3 px-4 text-neutral-darkest\">{student.completedTasks}</td>\n                    <td className=\"py-3 px-4 text-neutral-darkest\">{student.pendingTasks}</td>\n                    <td className=\"py-3 px-4\">\n                      <div className=\"flex items-center\">\n                        <div className=\"w-full bg-neutral-light rounded-full h-2 mr-2\">\n                          <div \n                            className={`h-2 rounded-full ${\n                              student.progressPercentage >= 80 \n                                ? 'bg-green-500' \n                                : student.progressPercentage >= 60 \n                                ? 'bg-amber-500' \n                                : 'bg-red-500'\n                            }`}\n                            style={{ width: `${student.progressPercentage}%` }}\n                          />\n                        </div>\n                        <span className=\"text-sm text-neutral-dark\">{Math.round(student.progressPercentage)}%</span>\n                      </div>\n                    </td>\n                    <td className=\"py-3 px-4\">\n                      <Button variant=\"ghost\" className=\"text-primary hover:text-primary-dark p-1 h-auto mr-2\">\n                        <Eye className=\"h-5 w-5\" />\n                      </Button>\n                      <Button variant=\"ghost\" className=\"text-neutral-dark hover:text-neutral-darkest p-1 h-auto\">\n                        <MoreVertical className=\"h-5 w-5\" />\n                      </Button>\n                    </td>\n                  </tr>\n                ))\n              ) : (\n                <tr>\n                  <td colSpan={6} className=\"py-4 text-center text-neutral-dark\">\n                    No student data available\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n        \n        {filteredStudents.length > 0 && (\n          <div className=\"mt-4 flex justify-between items-center\">\n            <span className=\"text-sm text-neutral-dark\">\n              Showing 1-{Math.min(filteredStudents.length, 10)} of {filteredStudents.length} students\n            </span>\n            <div className=\"flex space-x-1\">\n              <Button disabled variant=\"outline\" size=\"icon\" className=\"w-8 h-8 p-0\">\n                <span className=\"sr-only\">Previous page</span>\n                <ChevronLeftIcon className=\"h-4 w-4\" />\n              </Button>\n              <Button variant=\"outline\" size=\"icon\" className=\"w-8 h-8 p-0 bg-primary text-white\">\n                <span className=\"sr-only\">Page 1</span>\n                1\n              </Button>\n              <Button disabled variant=\"outline\" size=\"icon\" className=\"w-8 h-8 p-0\">\n                <span className=\"sr-only\">Next page</span>\n                <ChevronRightIcon className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n        )}\n      </Card>\n      \n      <AddAssignmentModal \n        isOpen={isAddAssignmentOpen} \n        onClose={() => setIsAddAssignmentOpen(false)} \n        assignment={null}\n        classes={dashboardData?.classes || []}\n      />\n    </div>\n  );\n};\n\n// Simple chevron icons for pagination\nconst ChevronLeftIcon = ({ className }: { className?: string }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}>\n    <polyline points=\"15 18 9 12 15 6\" />\n  </svg>\n);\n\nconst ChevronRightIcon = ({ className }: { className?: string }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}>\n    <polyline points=\"9 18 15 12 9 6\" />\n  </svg>\n);\n\nexport default TeacherDashboard;\n","size_bytes":15594},"client/src/pages/TeacherDashboardNew.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { format } from \"date-fns\";\nimport { Users, BookOpen, CheckCircle, TrendingUp, Bell, PlusIcon } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { getAvatarForStudent } from \"@/lib/avatars\";\n\nconst TeacherDashboard = () => {\n  // Get current authenticated user\n  const { data: currentUser } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  // Fetch family students\n  const { data: students, isLoading: studentsLoading } = useQuery({\n    queryKey: [\"/api/auth/students\"],\n    enabled: !!currentUser && currentUser.role === \"parent\",\n  });\n\n  const [activities, setActivities] = useState<any[]>([]);\n\n  // Generate activities based on your actual students\n  useEffect(() => {\n    if (students && students.length > 0) {\n      setActivities([\n        {\n          id: 1,\n          type: \"completion\",\n          studentName: students[0]?.fullName || \"Bryton\",\n          assignmentTitle: \"Math Practice\",\n          timeAgo: \"25 minutes ago\"\n        },\n        {\n          id: 2,\n          type: \"completion\", \n          studentName: students[1]?.fullName || \"Riley\",\n          assignmentTitle: \"Reading Comprehension\",\n          timeAgo: \"1 hour ago\"\n        },\n        {\n          id: 3,\n          type: \"notification\",\n          assignmentTitle: \"Science Activity Due Tomorrow\",\n          timeAgo: \"2 hours ago\"\n        }\n      ]);\n    }\n  }, [students]);\n\n  const currentDate = format(new Date(), \"MMMM d, yyyy\");\n  \n  if (studentsLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <p>Loading dashboard data...</p>\n      </div>\n    );\n  }\n\n  // Create dashboard data from your actual students\n  const dashboardStats = {\n    totalStudents: students?.length || 0,\n    activeClasses: 4, // Math, Science, Reading, History\n    completedTasks: 28,\n    pendingTasks: 12,\n    completionRate: Math.round((28 / 40) * 100) // 28 completed out of 40 total\n  };\n\n  const classes = [\n    { id: 1, name: \"Math\", studentCount: students?.length || 0 },\n    { id: 2, name: \"Science\", studentCount: students?.length || 0 },\n    { id: 3, name: \"Reading\", studentCount: students?.length || 0 },\n    { id: 4, name: \"History\", studentCount: students?.length || 0 }\n  ];\n\n  const getActivityIcon = (type: string) => {\n    switch (type) {\n      case \"completion\":\n        return <CheckCircle className=\"h-5 w-5 text-green-500\" />;\n      case \"missed\":\n        return <Bell className=\"h-5 w-5 text-red-500\" />;\n      case \"notification\":\n        return <Bell className=\"h-5 w-5 text-blue-500\" />;\n      default:\n        return <Bell className=\"h-5 w-5 text-gray-500\" />;\n    }\n  };\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      {/* Header */}\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6\">\n        <div>\n          <h2 className=\"text-3xl font-bold text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n            Family Dashboard\n          </h2>\n          <p className=\"text-[#7E8A97] mt-1\">\n            Track your homeschool progress - {currentDate}\n          </p>\n        </div>\n      </div>\n\n      {/* Stats Overview */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n        <Card className=\"border-[#D9E5D1]\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-[#7E8A97]\">Active Learners</p>\n                <p className=\"text-2xl font-bold text-[#3E4A59]\">{dashboardStats.totalStudents}</p>\n              </div>\n              <div className=\"p-2 bg-[#D9E5D1] rounded-lg\">\n                <Users className=\"h-6 w-6 text-[#8BA88E]\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-[#D9E5D1]\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-[#7E8A97]\">Active Classes</p>\n                <p className=\"text-2xl font-bold text-[#3E4A59]\">{dashboardStats.activeClasses}</p>\n              </div>\n              <div className=\"p-2 bg-[#A8C7DD] rounded-lg\">\n                <BookOpen className=\"h-6 w-6 text-[#7E8A97]\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-[#D9E5D1]\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-[#7E8A97]\">Completed Tasks</p>\n                <p className=\"text-2xl font-bold text-[#3E4A59]\">{dashboardStats.completedTasks}</p>\n              </div>\n              <div className=\"p-2 bg-[#D9E5D1] rounded-lg\">\n                <CheckCircle className=\"h-6 w-6 text-[#8BA88E]\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-[#D9E5D1]\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-[#7E8A97]\">Progress</p>\n                <p className=\"text-2xl font-bold text-[#3E4A59]\">{dashboardStats.completionRate}%</p>\n              </div>\n              <div className=\"p-2 bg-[#A8C7DD] rounded-lg\">\n                <TrendingUp className=\"h-6 w-6 text-[#7E8A97]\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Student Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\">\n        <Card className=\"border-[#D9E5D1]\">\n          <CardHeader>\n            <CardTitle className=\"text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n              Your Students\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {students && students.length > 0 ? (\n                students.slice(0, 6).map((student: any) => {\n                  const avatar = getAvatarForStudent(student.fullName);\n                  return (\n                    <div key={student.id} className=\"flex items-center space-x-3\">\n                      <div \n                        className=\"w-10 h-10 rounded-full flex items-center justify-center text-lg\"\n                        style={{ backgroundColor: avatar.backgroundColor }}\n                      >\n                        {avatar.emoji}\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n                          {student.fullName}\n                        </p>\n                        <p className=\"text-sm text-[#7E8A97]\">{student.gradeLevel}</p>\n                      </div>\n                      <Badge variant=\"secondary\" className=\"bg-[#D9E5D1] text-[#8BA88E]\">\n                        Active\n                      </Badge>\n                    </div>\n                  );\n                })\n              ) : (\n                <p className=\"text-[#7E8A97]\">No students added yet</p>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Recent Activity */}\n        <Card className=\"border-[#D9E5D1]\">\n          <CardHeader>\n            <CardTitle className=\"text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n              Recent Activity\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {activities.map((activity) => (\n                <div key={activity.id} className=\"flex items-start space-x-3\">\n                  {getActivityIcon(activity.type)}\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-sm font-medium text-[#3E4A59]\">\n                      {activity.studentName ? `${activity.studentName} completed` : 'Reminder:'}\n                    </p>\n                    <p className=\"text-sm text-[#7E8A97] truncate\">\n                      {activity.assignmentTitle}\n                    </p>\n                    <p className=\"text-xs text-[#7E8A97]\">{activity.timeAgo}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Classes Overview */}\n        <Card className=\"border-[#D9E5D1]\">\n          <CardHeader>\n            <CardTitle className=\"text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n              Classes\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {classes.map((cls) => (\n                <div key={cls.id} className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"font-medium text-[#3E4A59]\">{cls.name}</p>\n                    <p className=\"text-sm text-[#7E8A97]\">{cls.studentCount} students</p>\n                  </div>\n                  <Badge variant=\"outline\" className=\"border-[#8BA88E] text-[#8BA88E]\">\n                    Active\n                  </Badge>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Progress Section */}\n      <Card className=\"border-[#D9E5D1]\">\n        <CardHeader>\n          <CardTitle className=\"text-[#3E4A59]\" style={{ fontFamily: 'Comic Sans MS, cursive' }}>\n            Overall Progress\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-sm font-medium text-[#7E8A97]\">Task Completion</span>\n              <span className=\"text-sm font-medium text-[#3E4A59]\">{dashboardStats.completionRate}%</span>\n            </div>\n            <Progress \n              value={dashboardStats.completionRate} \n              className=\"h-2\" \n            />\n            <div className=\"flex justify-between text-sm text-[#7E8A97]\">\n              <span>{dashboardStats.completedTasks} completed</span>\n              <span>{dashboardStats.pendingTasks} pending</span>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default TeacherDashboard;","size_bytes":10700},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/modals/AddAssignmentModal.tsx":{"content":"import { z } from \"zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useForm } from \"react-hook-form\";\nimport { \n  Dialog, \n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { format } from \"date-fns\";\n\ninterface Assignment {\n  id: number;\n  title: string;\n  description?: string;\n  classId: number;\n  dueDate: string;\n  priority: string;\n  createdBy: number;\n}\n\ninterface Class {\n  id: number;\n  name: string;\n}\n\ninterface AddAssignmentModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  assignment: Assignment | null;\n  classes?: Class[];\n}\n\nconst assignmentSchema = z.object({\n  title: z.string().min(1, \"Assignment title is required\"),\n  description: z.string().optional(),\n  classId: z.string().min(1, \"Class is required\"),\n  dueDate: z.string().min(1, \"Due date is required\"),\n  dueTime: z.string().min(1, \"Due time is required\"),\n  priority: z.string().min(1, \"Priority is required\"),\n});\n\nconst AddAssignmentModal = ({ isOpen, onClose, assignment, classes = [] }: AddAssignmentModalProps) => {\n  const { toast } = useToast();\n  \n  // Format date and time for the form if editing\n  let defaultDate = \"\";\n  let defaultTime = \"\";\n  \n  if (assignment?.dueDate) {\n    const dueDate = new Date(assignment.dueDate);\n    defaultDate = format(dueDate, \"yyyy-MM-dd\");\n    defaultTime = format(dueDate, \"HH:mm\");\n  }\n  \n  const form = useForm<z.infer<typeof assignmentSchema>>({\n    resolver: zodResolver(assignmentSchema),\n    defaultValues: {\n      title: assignment?.title || \"\",\n      description: assignment?.description || \"\",\n      classId: assignment?.classId.toString() || \"\",\n      dueDate: defaultDate,\n      dueTime: defaultTime,\n      priority: assignment?.priority || \"medium\",\n    },\n  });\n\n  const isEditing = !!assignment;\n\n  const createMutation = useMutation({\n    mutationFn: async (values: z.infer<typeof assignmentSchema>) => {\n      // Combine date and time into a single ISO string\n      const dueDateTime = new Date(`${values.dueDate}T${values.dueTime}`);\n      \n      return apiRequest(\"POST\", \"/api/assignments\", {\n        title: values.title,\n        description: values.description,\n        classId: parseInt(values.classId),\n        dueDate: dueDateTime.toISOString(),\n        priority: values.priority,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Assignment created successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/assignments\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/student/tasks\"] });\n      onClose();\n      form.reset();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create assignment\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async (values: z.infer<typeof assignmentSchema>) => {\n      if (!assignment) return null;\n      \n      // Combine date and time into a single ISO string\n      const dueDateTime = new Date(`${values.dueDate}T${values.dueTime}`);\n      \n      return apiRequest(\"PUT\", `/api/assignments/${assignment.id}`, {\n        title: values.title,\n        description: values.description,\n        classId: parseInt(values.classId),\n        dueDate: dueDateTime.toISOString(),\n        priority: values.priority,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Assignment updated successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/assignments\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/student/tasks\"] });\n      onClose();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update assignment\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (values: z.infer<typeof assignmentSchema>) => {\n    if (isEditing) {\n      updateMutation.mutate(values);\n    } else {\n      createMutation.mutate(values);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle>{isEditing ? \"Edit Assignment\" : \"Add New Assignment\"}</DialogTitle>\n        </DialogHeader>\n        \n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"title\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Assignment Title</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"Enter title\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"classId\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Class</FormLabel>\n                  <Select\n                    onValueChange={field.onChange}\n                    defaultValue={field.value}\n                  >\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select a class\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      {classes.map((cls) => (\n                        <SelectItem key={cls.id} value={cls.id.toString()}>\n                          {cls.name}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"dueDate\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Due Date</FormLabel>\n                    <FormControl>\n                      <Input type=\"date\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              \n              <FormField\n                control={form.control}\n                name=\"dueTime\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Due Time</FormLabel>\n                    <FormControl>\n                      <Input type=\"time\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n            \n            <FormField\n              control={form.control}\n              name=\"priority\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Priority</FormLabel>\n                  <Select\n                    onValueChange={field.onChange}\n                    defaultValue={field.value}\n                  >\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select priority\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"low\">Low</SelectItem>\n                      <SelectItem value=\"medium\">Medium</SelectItem>\n                      <SelectItem value=\"high\">High</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"description\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Description (Optional)</FormLabel>\n                  <FormControl>\n                    <Textarea \n                      placeholder=\"Enter assignment details\" \n                      className=\"resize-none\"\n                      {...field} \n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                className=\"mt-4\"\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                className=\"mt-4\"\n                disabled={createMutation.isPending || updateMutation.isPending}\n              >\n                {createMutation.isPending || updateMutation.isPending ? (\n                  \"Saving...\"\n                ) : isEditing ? (\n                  \"Update Assignment\"\n                ) : (\n                  \"Add Assignment\"\n                )}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AddAssignmentModal;\n","size_bytes":9793},"client/src/components/modals/AddClassModal.tsx":{"content":"import { z } from \"zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useForm } from \"react-hook-form\";\nimport { \n  Dialog, \n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\n\ninterface ClassWithCount {\n  id: number;\n  name: string;\n  gradeLevel?: string;\n  description?: string;\n  studentCount: number;\n}\n\ninterface AddClassModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  classItem: ClassWithCount | null;\n}\n\nconst classSchema = z.object({\n  name: z.string().min(1, \"Class name is required\"),\n  gradeLevel: z.string().optional(),\n  description: z.string().optional(),\n});\n\nconst AddClassModal = ({ isOpen, onClose, classItem }: AddClassModalProps) => {\n  const { toast } = useToast();\n  \n  const form = useForm<z.infer<typeof classSchema>>({\n    resolver: zodResolver(classSchema),\n    defaultValues: {\n      name: classItem?.name || \"\",\n      gradeLevel: classItem?.gradeLevel || \"\",\n      description: classItem?.description || \"\",\n    },\n  });\n\n  const isEditing = !!classItem;\n\n  const createMutation = useMutation({\n    mutationFn: async (values: z.infer<typeof classSchema>) => {\n      return apiRequest(\"POST\", \"/api/classes\", values);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Class created successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/classes\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/teacher\"] });\n      onClose();\n      form.reset();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create class\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async (values: z.infer<typeof classSchema>) => {\n      if (!classItem) return null;\n      return apiRequest(\"PUT\", `/api/classes/${classItem.id}`, values);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Class updated successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/classes\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/teacher\"] });\n      onClose();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update class\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (values: z.infer<typeof classSchema>) => {\n    if (isEditing) {\n      updateMutation.mutate(values);\n    } else {\n      createMutation.mutate(values);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>{isEditing ? \"Edit Class\" : \"Add New Class\"}</DialogTitle>\n        </DialogHeader>\n        \n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"name\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Class Name</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"Class Name\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"gradeLevel\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Grade Level</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"Grade Level (optional)\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"description\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Description</FormLabel>\n                  <FormControl>\n                    <Textarea \n                      placeholder=\"Class description (optional)\" \n                      className=\"resize-none\"\n                      {...field} \n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                className=\"mt-4\"\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                className=\"mt-4\"\n                disabled={createMutation.isPending || updateMutation.isPending}\n              >\n                {createMutation.isPending || updateMutation.isPending ? (\n                  \"Saving...\"\n                ) : isEditing ? (\n                  \"Update Class\"\n                ) : (\n                  \"Add Class\"\n                )}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AddClassModal;\n","size_bytes":5685},"client/src/components/modals/AddStudentModal.tsx":{"content":"import { useState } from \"react\";\nimport { z } from \"zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useForm } from \"react-hook-form\";\nimport { \n  Dialog, \n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\n\ninterface Student {\n  id: number;\n  user: {\n    id: number;\n    fullName: string;\n    username: string;\n  };\n  classIds: string[];\n}\n\ninterface Class {\n  id: number;\n  name: string;\n}\n\ninterface AddStudentModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  student: Student | null;\n  classes: Class[];\n}\n\nconst studentSchema = z.object({\n  fullName: z.string().min(2, \"Full name is required\"),\n  username: z.string().min(3, \"Username must be at least 3 characters\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\").optional(),\n  classIds: z.array(z.string()).optional(),\n});\n\nconst AddStudentModal = ({ isOpen, onClose, student, classes }: AddStudentModalProps) => {\n  const { toast } = useToast();\n  const [selectedClasses, setSelectedClasses] = useState<string[]>(\n    student?.classIds || []\n  );\n  \n  const form = useForm<z.infer<typeof studentSchema>>({\n    resolver: zodResolver(studentSchema),\n    defaultValues: {\n      fullName: student?.user.fullName || \"\",\n      username: student?.user.username || \"\",\n      password: \"\",\n      classIds: student?.classIds || [],\n    },\n  });\n\n  const isEditing = !!student;\n\n  const createMutation = useMutation({\n    mutationFn: async (values: z.infer<typeof studentSchema>) => {\n      return apiRequest(\"POST\", \"/api/students\", {\n        ...values,\n        password: values.password || \"password123\",\n        classIds: selectedClasses,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Student created successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/students\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/teacher\"] });\n      onClose();\n      form.reset();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create student\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async (values: z.infer<typeof studentSchema>) => {\n      if (!student) return null;\n      return apiRequest(\"PUT\", `/api/students/${student.id}`, {\n        fullName: values.fullName,\n        classIds: selectedClasses,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Student updated successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/students\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/teacher\"] });\n      onClose();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update student\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (values: z.infer<typeof studentSchema>) => {\n    if (isEditing) {\n      updateMutation.mutate(values);\n    } else {\n      createMutation.mutate(values);\n    }\n  };\n\n  const handleClassToggle = (classId: string) => {\n    setSelectedClasses((prev) => {\n      if (prev.includes(classId)) {\n        return prev.filter((id) => id !== classId);\n      } else {\n        return [...prev, classId];\n      }\n    });\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>{isEditing ? \"Edit Student\" : \"Add New Student\"}</DialogTitle>\n        </DialogHeader>\n        \n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"fullName\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Full Name</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"Full Name\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"username\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Username</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"Username\" \n                      {...field} \n                      disabled={isEditing} \n                      className={isEditing ? \"opacity-50\" : \"\"}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            {!isEditing && (\n              <FormField\n                control={form.control}\n                name=\"password\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Password</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"password\"\n                        placeholder=\"Leave empty for default password\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            )}\n\n            <div>\n              <FormLabel>Assigned Classes</FormLabel>\n              <div className=\"grid grid-cols-2 gap-2 mt-2\">\n                {classes.map((cls) => (\n                  <div\n                    key={cls.id}\n                    className={`p-2 border rounded-md cursor-pointer ${\n                      selectedClasses.includes(cls.id.toString())\n                        ? \"border-primary bg-primary/10\"\n                        : \"border-gray-200\"\n                    }`}\n                    onClick={() => handleClassToggle(cls.id.toString())}\n                  >\n                    {cls.name}\n                  </div>\n                ))}\n              </div>\n              {classes.length === 0 && (\n                <p className=\"text-sm text-gray-500 mt-1\">No classes available</p>\n              )}\n            </div>\n\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                className=\"mt-4\"\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                className=\"mt-4\"\n                disabled={createMutation.isPending || updateMutation.isPending}\n              >\n                {createMutation.isPending || updateMutation.isPending ? (\n                  \"Saving...\"\n                ) : isEditing ? (\n                  \"Update Student\"\n                ) : (\n                  \"Add Student\"\n                )}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AddStudentModal;\n","size_bytes":7629},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"server/plannerRoutes.ts":{"content":"import { Router } from \"express\";\nimport { z } from \"zod\";\nimport { storage } from \"./storage-replit\";\nimport { insertPlannerTaskSchema } from \"../shared/schema\";\n\nconst router = Router();\n\n// Class schema for validation\nconst createClassSchema = z.object({\n  title: z.string().min(1, \"Title is required\"),\n  subject: z.string().min(1, \"Subject is required\"),\n  dueDate: z.string().optional(),\n  studentId: z.string().optional(),\n});\n\nconst updateClassSchema = z.object({\n  completed: z.boolean(),\n});\n\n// Get classes for a specific week (organized by day-student combinations)\nrouter.get(\"/classes\", async (req, res) => {\n  try {\n    const { week } = req.query;\n    const allClasses = await storage.getAllTasks();\n    \n    if (week) {\n      // For now, return all classes regardless of week\n      // Later we can filter by week when we have proper date tracking\n      const weekClasses = allClasses;\n      \n      // Transform into the format expected by frontend: { \"monday-0\": [...], \"tuesday-1\": [...] }\n      const organizedClasses: Record<string, any[]> = {};\n      weekClasses.forEach(task => {\n        // For now, place all classes in the first student column on Monday\n        // This is a temporary solution until we have proper day/student tracking\n        const cellKey = \"monday-0\";\n        if (!organizedClasses[cellKey]) {\n          organizedClasses[cellKey] = [];\n        }\n        organizedClasses[cellKey].push(task);\n      });\n      \n      res.json(organizedClasses);\n    } else {\n      res.json(allClasses);\n    }\n  } catch (error) {\n    console.error(\"Error fetching classes:\", error);\n    res.status(500).json({ error: \"Failed to fetch classes\" });\n  }\n});\n\n// Legacy endpoint for backwards compatibility\nrouter.get(\"/tasks\", async (req, res) => {\n  try {\n    const allTasks = await storage.getAllTasks();\n    res.json(allTasks);\n  } catch (error) {\n    console.error(\"Error fetching tasks:\", error);\n    res.status(500).json({ error: \"Failed to fetch tasks\" });\n  }\n});\n\n// Create a new class\nrouter.post(\"/classes\", async (req, res) => {\n  try {\n    const validatedData = createClassSchema.parse(req.body);\n    \n    const classData = {\n      id: Date.now().toString(), // Simple ID generation\n      title: validatedData.title,\n      subject: validatedData.subject,\n      description: \"\",\n      day: \"monday\", // Default to Monday for now\n      studentIndex: 0, // Default to first student\n      weekKey: new Date().toISOString().split('T')[0], // Current date as week key\n      completed: false,\n      studentId: validatedData.studentId ? parseInt(validatedData.studentId) : null,\n    };\n\n    const newClass = await storage.createPlannerTask(classData);\n    res.json(newClass);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: \"Validation failed\", details: error.errors });\n    } else {\n      console.error(\"Error creating class:\", error);\n      res.status(500).json({ error: \"Failed to create class\" });\n    }\n  }\n});\n\n// Legacy endpoint for backwards compatibility\nrouter.post(\"/tasks\", async (req, res) => {\n  try {\n    const validatedData = createClassSchema.parse(req.body);\n    \n    const taskData = {\n      id: Date.now().toString(), // Simple ID generation\n      title: validatedData.title,\n      subject: validatedData.subject,\n      description: \"\",\n      day: \"monday\", // Default to Monday for now\n      studentIndex: 0, // Default to first student\n      weekKey: new Date().toISOString().split('T')[0], // Current date as week key\n      completed: false,\n      studentId: validatedData.studentId ? parseInt(validatedData.studentId) : null,\n    };\n\n    const newTask = await storage.createPlannerTask(taskData);\n    res.json(newTask);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: \"Validation failed\", details: error.errors });\n    } else {\n      console.error(\"Error creating task:\", error);\n      res.status(500).json({ error: \"Failed to create task\" });\n    }\n  }\n});\n\n// Update a class (toggle completion)\nrouter.patch(\"/classes/:id\", async (req, res) => {\n  try {\n    const classId = req.params.id;\n    const validatedData = updateClassSchema.parse(req.body);\n\n    const updatedClass = await storage.updatePlannerTask(classId, { completed: validatedData.completed });\n    \n    if (!updatedClass) {\n      return res.status(404).json({ error: \"Class not found\" });\n    }\n\n    res.json(updatedClass);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: \"Validation failed\", details: error.errors });\n    } else {\n      console.error(\"Error updating class:\", error);\n      res.status(500).json({ error: \"Failed to update class\" });\n    }\n  }\n});\n\n// Legacy: Update a task (toggle completion)\nrouter.patch(\"/tasks/:id\", async (req, res) => {\n  try {\n    const taskId = req.params.id;\n    const validatedData = updateClassSchema.parse(req.body);\n\n    const updatedTask = await storage.updatePlannerTask(taskId, { completed: validatedData.completed });\n    \n    if (!updatedTask) {\n      return res.status(404).json({ error: \"Task not found\" });\n    }\n\n    res.json(updatedTask);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: \"Validation failed\", details: error.errors });\n    } else {\n      console.error(\"Error updating task:\", error);\n      res.status(500).json({ error: \"Failed to update task\" });\n    }\n  }\n});\n\n// Delete a class\nrouter.delete(\"/classes/:id\", async (req, res) => {\n  try {\n    const classId = req.params.id;\n    const deleted = await storage.deletePlannerTask(classId);\n\n    if (!deleted) {\n      return res.status(404).json({ error: \"Class not found\" });\n    }\n\n    res.json({ message: \"Class deleted successfully\" });\n  } catch (error) {\n    console.error(\"Error deleting class:\", error);\n    res.status(500).json({ error: \"Failed to delete class\" });\n  }\n});\n\n// Legacy: Delete a task\nrouter.delete(\"/tasks/:id\", async (req, res) => {\n  try {\n    const taskId = req.params.id;\n    const deleted = await storage.deletePlannerTask(taskId);\n\n    if (!deleted) {\n      return res.status(404).json({ error: \"Task not found\" });\n    }\n\n    res.json({ message: \"Task deleted successfully\" });\n  } catch (error) {\n    console.error(\"Error deleting task:\", error);\n    res.status(500).json({ error: \"Failed to delete task\" });\n  }\n});\n\n// Get task statistics\nrouter.get(\"/stats\", async (req, res) => {\n  try {\n    const allTasks = await storage.getAllTasks();\n    \n    const stats = {\n      total: allTasks.length,\n      completed: allTasks.filter(t => t.completed).length,\n      remaining: allTasks.filter(t => !t.completed).length,\n    };\n\n    res.json(stats);\n  } catch (error) {\n    console.error(\"Error fetching stats:\", error);\n    res.status(500).json({ error: \"Failed to fetch statistics\" });\n  }\n});\n\n// Get all students\nrouter.get(\"/students\", async (req, res) => {\n  try {\n    const allStudents = await storage.getStudents();\n    res.json(allStudents);\n  } catch (error) {\n    console.error(\"Error fetching students:\", error);\n    res.status(500).json({ error: \"Failed to fetch students\" });\n  }\n});\n\n// Create a new student\nrouter.post(\"/students\", async (req, res) => {\n  try {\n    const studentData = {\n      parentId: \"demo-parent\", // For demo purposes\n      fullName: req.body.fullName,\n      gradeLevel: req.body.gradeLevel,\n    };\n\n    const newStudent = await storage.createStudent(studentData);\n    res.json(newStudent);\n  } catch (error) {\n    console.error(\"Error creating student:\", error);\n    res.status(500).json({ error: \"Failed to create student\" });\n  }\n});\n\n// Delete a student\nrouter.delete(\"/students/:id\", async (req, res) => {\n  try {\n    const studentId = parseInt(req.params.id);\n    const deleted = await storage.deleteStudent(studentId);\n\n    if (!deleted) {\n      return res.status(404).json({ error: \"Student not found\" });\n    }\n\n    res.json({ message: \"Student deleted successfully\" });\n  } catch (error) {\n    console.error(\"Error deleting student:\", error);\n    res.status(500).json({ error: \"Failed to delete student\" });\n  }\n});\n\nexport default router;","size_bytes":8136}}}